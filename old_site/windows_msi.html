---
layout: obsolete
title: "Windows MSI"
permalink: /old_site/Windows_MSI/
---

<h1>Windows MSI</h1>

<p><b>NOTE: I make lots of assumptions about things I do not fully understand (C stuff).  Please help me figure out what we need and what we don't need. &#160;:)  - jpobst</b>
</p><p>One of my goals for Mono 2.8 is to have a completely new .msi (the Windows standard) based installer for Windows.
</p><p>Currently, our Windows installer is not .msi, and is bloated with all kinds of things that don't really make sense to ship on Windows.
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Proposed_Changes"><span class="tocnumber">1</span> <span class="toctext">Proposed Changes</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Use_MSVC_instead_of_gcc_to_compile_native_code"><span class="tocnumber">1.1</span> <span class="toctext">Use MSVC instead of gcc to compile native code</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Use_eglib_instead_of_glib"><span class="tocnumber">1.2</span> <span class="toctext">Use eglib instead of glib</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Do_not_ship_the_1.0_profile"><span class="tocnumber">1.3</span> <span class="toctext">Do not ship the 1.0 profile</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Do_not_ship_Gtk.23"><span class="tocnumber">1.4</span> <span class="toctext">Do not ship Gtk#</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Strip_out_things_that_not_many_people_use"><span class="tocnumber">1.5</span> <span class="toctext">Strip out things that not many people use</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#What_GNU-ish.28.3F.29_stuff_do_we_still_need_to_include.3F"><span class="tocnumber">1.6</span> <span class="toctext">What GNU-ish(?) stuff do we still need to include?</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Conclusion"><span class="tocnumber">1.7</span> <span class="toctext">Conclusion</span></a></li>
</ul>
</li>
</ul>
</td></tr></table>
<h2> <span class="mw-headline" id="Proposed_Changes"> Proposed Changes </span></h2>
<h3> <span class="mw-headline" id="Use_MSVC_instead_of_gcc_to_compile_native_code"> Use MSVC instead of gcc to compile native code </span></h3>
<p>This will require vcproj files for all the native libraries/executables. This will also require redistributing the C runtimes from MS. We can either require admin privileges and install them into the machine side-by-side cache, or install them privately to mono. 
</p><p><a href="http://msdn.microsoft.com/en-us/library/ms235291(VS.80).aspx" class="external free" rel="nofollow">http://msdn.microsoft.com/en-us/library/ms235291(VS.80).aspx</a>
</p>
<h3> <span class="mw-headline" id="Use_eglib_instead_of_glib"> Use eglib instead of glib </span></h3>
<p>This is the first step to not requiring cygwin.  Also, the code produced by VC++ is likely better tuned for running on Windows.
</p>
<h3> <span class="mw-headline" id="Do_not_ship_the_1.0_profile"> Do not ship the 1.0 profile </span></h3>
<p>This is simply a Mono 2.8 change.  The 1.0/1.1 profile is no longer supported/shipped after Mono 2.6.
</p>
<h3> <span class="mw-headline" id="Do_not_ship_Gtk.23"> Do not ship Gtk# </span></h3>
<p>We should modify our "Gtk# installer for .Net" to also install to the Mono GAC instead of shipping a second copy with Mono.
</p><p>Note: There needs to be some work done with regards to ensuring Gtk# picks up our version of Gtk+ instead of the one installed with Pidgin, Inkscape, Miro, etc.  Currently, the first one in PATH is used.
</p>
<h3> <span class="mw-headline" id="Strip_out_things_that_not_many_people_use"> Strip out things that not many people use </span></h3>
<table>

<tr>
<td> IKVM
</td>
<td> Available <a href="http://www.ikvm.net/" class="external text" rel="nofollow">here</a>
</td></tr>
<tr>
<td> Boo
</td>
<td> Available <a href="http://boo.codehaus.org/" class="external text" rel="nofollow">here</a>
</td></tr>
<tr>
<td> NUnit
</td>
<td> Available <a href="http://www.nunit.org/index.php" class="external text" rel="nofollow">here</a>
</td></tr>
<tr>
<td> IPCE
</td>
<td> Available <a href="http://www.codeplex.com/IronPython" class="external text" rel="nofollow">here</a>
</td></tr>
<tr>
<td> NAnt
</td>
<td> Available <a href="http://nant.sourceforge.net/" class="external text" rel="nofollow">here</a>
</td></tr>
<tr>
<td> embedding stuff
</td>
<td> I'm not sure what is embedding stuff, and what is just leftovers from the build process.  I am thinking stuff like .h, .def, .lib, .a, .la, etc..
</td></tr>
<tr>
<td> class library documentation
</td>
<td> I don't think monodoc has ever worked on Windows?  Developers can use the online documentation.  Note that MD for Windows also ships with this documentation for use in MD.
</td></tr></table>
<h3> <span class="mw-headline" id="What_GNU-ish.28.3F.29_stuff_do_we_still_need_to_include.3F"> What GNU-ish(?) stuff do we still need to include? </span></h3>
<p>I don't know a lot about this, but I guess we need either eglib or custom versions of:
</p>
<ul><li> pkg-config
</li><li> gettext?
</li></ul>
<h3> <span class="mw-headline" id="Conclusion"> Conclusion </span></h3>
<p>With these changes, I think we can get a learner, meaner installer that is .msi-based.  My current estimation is we can get the installer under 30 MB.  Currently, it is 75-80 MB.
</p>
