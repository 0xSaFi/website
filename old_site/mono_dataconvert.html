---
layout: obsolete
title: "Mono DataConvert"
permalink: /old_site/Mono_DataConvert/
---

<h1>Mono DataConvert</h1>

<p>The DataConvert class is a replacement for System.BitConvert in the .NET class libraries that provides:
</p>
<ul><li> Host types to native byte arrays, little endian byte arrays and big endian byte arrays.
</li><li> native, little endian, big endian to Host types.
</li><li> Helper routines for Stream I/O.
</li><li> Convenience routines for packing and unpacking data structures.
</li></ul>
<p>This class offers three different ways of data conversion to address different usage scenarios:
</p><p><b>Static Methods API</b> are explicit in their names but can become a bit verbose
</p><p><b>Instance Methods API</b> if you know in advance that you will be processing all of your data in a specific encoding (host, little endian or big endian) it might be more comfortable to use these APIs.
</p><p><b>Pack/Unpack API</b> this is an API inspired after the Perl pack and unpack functions.   For example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #008080; font-style: italic;">// The following means:</span>
<span style="color: #008080; font-style: italic;">// Little endian encoding of a Int16, followed by an aligned</span>
<span style="color: #008080; font-style: italic;">// int32 value.</span>
<span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> r <span style="color: #008000;">=</span> DataConverter<span style="color: #008000;">.</span><span style="color: #0000FF;">Pack</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;_s!i&quot;</span>, 0x7b, 0x12345678<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&#160;
<span style="color: #008080; font-style: italic;">// Results in:</span>
<span style="color: #008080; font-style: italic;">// 7b 00 00 00 78 56 34 12</span>
&#160;
<span style="color: #008080; font-style: italic;">// The following means:</span>
<span style="color: #008080; font-style: italic;">// utf8-encoded and null terminated string:</span>
<span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> r <span style="color: #008000;">=</span> DataConverter<span style="color: #008000;">.</span><span style="color: #0000FF;">Pack</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;z8&quot;</span>, <span style="color: #666666;">&quot;hello&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&#160;
<span style="color: #008080; font-style: italic;">// Result is:</span>
<span style="color: #008080; font-style: italic;">// 68 65 6c 6c 6f 00 00 00 00</span></pre>
<p>These are some examples of Unpack:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #008080; font-style: italic;">//</span>
<span style="color: #008080; font-style: italic;">// The following unpacks a GUID stored in memory into its member values:</span>
<span style="color: #008080; font-style: italic;">//</span>
<span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> guid <span style="color: #008000;">=</span> <span style="color: #008000;">&#123;</span> 0x25, 0xf7, 0x00, 0xb2,
		 0x25, 0xe7, 0x53, 0x4c,
		 0xb3, 0x6a, 0x1e, 0xc2,
		 0x7a, 0xef, 0x12, 0xef <span style="color: #008000;">&#125;</span><span style="color: #008000;">;</span>
<span style="color: #0600FF; font-weight: bold;">foreach</span> <span style="color: #008000;">&#40;</span><span style="color: #0600FF; font-weight: bold;">var</span> x <span style="color: #0600FF; font-weight: bold;">in</span> DartaConverter<span style="color: #008000;">.</span><span style="color: #0000FF;">Unpack</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;_issbbbbbbbb&quot;</span>, guid, <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#123;</span>
	Console<span style="color: #008000;">.</span><span style="color: #0000FF;">Write</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;{0:x2}&quot;</span>,x<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
	Console<span style="color: #008000;">.</span><span style="color: #0000FF;">Write</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;-&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span>
<span style="color: #008080; font-style: italic;">//</span>
<span style="color: #008080; font-style: italic;">// Result is:</span>
<span style="color: #008080; font-style: italic;">// b200f725-e725-4c53-b3-6a-1e-c2-7a-ef-12-ef-</span></pre>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Instance_Methods"><span class="tocnumber">1</span> <span class="toctext">Instance Methods</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Examples_of_the_Instance_API"><span class="tocnumber">1.1</span> <span class="toctext">Examples of the Instance API</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3"><a href="#Pack_and_Unpack"><span class="tocnumber">2</span> <span class="toctext">Pack and Unpack</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Pack_Instruction_Specification"><span class="tocnumber">2.1</span> <span class="toctext">Pack Instruction Specification</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Pack.2FUnpack_Examples"><span class="tocnumber">2.2</span> <span class="toctext">Pack/Unpack Examples</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#Static_Methods"><span class="tocnumber">3</span> <span class="toctext">Static Methods</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Obtaining_Mono.DataConvert"><span class="tocnumber">4</span> <span class="toctext">Obtaining Mono.DataConvert</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Problems_with_the_CLI.27s_System.BitConverter"><span class="tocnumber">5</span> <span class="toctext">Problems with the CLI's System.BitConverter</span></a></li>
</ul>
</td></tr></table>
<h1> <span class="mw-headline" id="Instance_Methods"> Instance Methods </span></h1>
<p>The instance methods are useful if you know that all the data processing that you will be doing will be for a specific encoding.   To use these methods you obtain an instance of DataConverter from one of the public properties:
</p>
<pre class="csharp" style="font-family:monospace;">        <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #0600FF; font-weight: bold;">public</span> DataConverter LittleEndian <span style="color: #008000;">&#123;</span> <span style="color: #0600FF; font-weight: bold;">get</span><span style="color: #008000;">;</span> <span style="color: #008000;">&#125;</span>
        <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #0600FF; font-weight: bold;">public</span> DataConverter BigEndian <span style="color: #008000;">&#123;</span> <span style="color: #0600FF; font-weight: bold;">get</span><span style="color: #008000;">;</span> <span style="color: #008000;">&#125;</span>
        <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #0600FF; font-weight: bold;">public</span> DataConverter Native <span style="color: #008000;">&#123;</span> <span style="color: #0600FF; font-weight: bold;">get</span><span style="color: #008000;">;</span> <span style="color: #008000;">&#125;</span></pre>
<p>Each one of those instances will provide encoding to and from little endian format, big endian format or the native format of the host.  Internally you will get an instance of the proper class: if your endianness matches the requested encoding for example, the data is always copied, otherwise it is swapped.
</p><p><b>Storing the data into an existing array</b>:
</p><p>The following API is recommended if you want to decode the data directly into an existing array without having to allocate data and copying data.   You must pass an array that can contain the proper sized value and an index in the destination array to store it:
</p>
<pre class="csharp" style="font-family:monospace;">        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> PutBytes <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> dest, <span style="color: #6666cc; font-weight: bold;">int</span> destIdx, <span style="color: #6666cc; font-weight: bold;">double</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> PutBytes <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> dest, <span style="color: #6666cc; font-weight: bold;">int</span> destIdx, <span style="color: #6666cc; font-weight: bold;">short</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> PutBytes <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> dest, <span style="color: #6666cc; font-weight: bold;">int</span> destIdx, <span style="color: #6666cc; font-weight: bold;">int</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> PutBytes <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> dest, <span style="color: #6666cc; font-weight: bold;">int</span> destIdx, <span style="color: #6666cc; font-weight: bold;">long</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> PutBytes <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> dest, <span style="color: #6666cc; font-weight: bold;">int</span> destIdx, <span style="color: #6666cc; font-weight: bold;">float</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> PutBytes <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> dest, <span style="color: #6666cc; font-weight: bold;">int</span> destIdx, <span style="color: #6666cc; font-weight: bold;">ushort</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> PutBytes <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> dest, <span style="color: #6666cc; font-weight: bold;">int</span> destIdx, <span style="color: #6666cc; font-weight: bold;">uint</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> PutBytes <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> dest, <span style="color: #6666cc; font-weight: bold;">int</span> destIdx, <span style="color: #6666cc; font-weight: bold;">ulong</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p>Doubles, longs and ulongs need eight bytes;   ints, uints and floats need four bytes and short and ushorts need two bytes.
</p><p><b>Obtaining the byte representation</b>:
</p><p>The following family of methods will return newly allocated byte arrays that contain the value encoded in the requested representation:
</p>
<pre class="csharp" style="font-family:monospace;">        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytes <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">double</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytes <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">short</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytes <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytes <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">long</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytes <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">float</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytes <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">ushort</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytes <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">uint</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytes <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">ulong</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p><b>Converting bytes into native types</b>
</p>
<pre class="csharp" style="font-family:monospace;">        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">abstract</span> <span style="color: #6666cc; font-weight: bold;">double</span> GetDouble <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">abstract</span> <span style="color: #6666cc; font-weight: bold;">float</span>  GetFloat  <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">abstract</span> <span style="color: #6666cc; font-weight: bold;">short</span>  GetInt16  <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">abstract</span> <span style="color: #6666cc; font-weight: bold;">ushort</span> GetUInt16 <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">abstract</span> <span style="color: #6666cc; font-weight: bold;">int</span>    GetInt32  <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">abstract</span> <span style="color: #6666cc; font-weight: bold;">uint</span>   GetUInt32 <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">abstract</span> <span style="color: #6666cc; font-weight: bold;">long</span>   GetInt64  <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">abstract</span> <span style="color: #6666cc; font-weight: bold;">ulong</span>  GetUInt64 <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<h2> <span class="mw-headline" id="Examples_of_the_Instance_API"> Examples of the Instance API </span></h2>
<p>The following saves the value of PI in big endian format into the given file stream:
</p>
<pre class="csharp" style="font-family:monospace;">    <span style="color: #6666cc; font-weight: bold;">void</span> Save <span style="color: #008000;">&#40;</span>FileStream fs<span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
         DataConvert enc <span style="color: #008000;">=</span> DataConvert<span style="color: #008000;">.</span><span style="color: #0000FF;">BigEndian</span><span style="color: #008000;">;</span>
         fs<span style="color: #008000;">.</span><span style="color: #0000FF;">Write</span> <span style="color: #008000;">&#40;</span>enc<span style="color: #008000;">.</span><span style="color: #0000FF;">GetBytes</span> <span style="color: #008000;">&#40;</span>Math<span style="color: #008000;">.</span><span style="color: #0000FF;">PI</span><span style="color: #008000;">&#41;</span>, <span style="color: #FF0000;">0</span>,<span style="color: #FF0000;">8</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span></pre>
<p>The following loads a double encoded in little endian format from the given file:
</p>
<pre class="csharp" style="font-family:monospace;">    <span style="color: #6666cc; font-weight: bold;">double</span> GetFromFile <span style="color: #008000;">&#40;</span>FileStream fs<span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
         <span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> buffer <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> <span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #FF0000;">8</span><span style="color: #008000;">&#93;</span><span style="color: #008000;">;</span>
         fs<span style="color: #008000;">.</span><span style="color: #0000FF;">Read</span> <span style="color: #008000;">&#40;</span>buffer, <span style="color: #FF0000;">0</span>, <span style="color: #FF0000;">8</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
         DataConvert enc <span style="color: #008000;">=</span> DataConvert<span style="color: #008000;">.</span><span style="color: #0000FF;">LittleEndian</span><span style="color: #008000;">;</span>
         <span style="color: #0600FF; font-weight: bold;">return</span> enc<span style="color: #008000;">.</span><span style="color: #0000FF;">GetDouble</span> <span style="color: #008000;">&#40;</span>buffer, <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span></pre>
<h1> <span class="mw-headline" id="Pack_and_Unpack"> Pack and Unpack </span></h1>
<p>The DataConvert class offers two helper methods that can be used to reduce the number of code written when dealing with binary data structures.   These methods are inspired by Perl's pack and unpack functions.
</p><p>The C# prototypes are:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> Pack <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> description, <span style="color: #0600FF; font-weight: bold;">params</span> <span style="color: #6666cc; font-weight: bold;">object</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> args<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> PackEnumerable <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> description, IEnumerable args<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #0600FF; font-weight: bold;">public</span> IList Unpack <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> description, <span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> buffer, <span style="color: #6666cc; font-weight: bold;">int</span> startIndex<span style="color: #008000;">&#41;</span></pre>
<p>For Pack there are two modes of operation: one takes a variable number of arguments (params method) and another one operates on an IEnumerable allowing arrays and other collections to be used as input.  The reason they have different names is to avoid ambiguities with types like String that happen to be IEnumerables.
</p><p>The description string is used to drive the packing and unpacking of the arguments, it controls how each of the arguments that are passed are encoded.  Internally the Pack method uses System.Convert to convert each data type to the requested type.
</p><p>Unpack takes a description, the byte array and the initial position to Unpack from and returns a List of objects in the format specified by the description.
</p><p>For example, to pack two integers in big endian format, you would use this:
</p>
<pre class="csharp" style="font-family:monospace;">    <span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data <span style="color: #008000;">=</span> DataConvert<span style="color: #008000;">.</span><span style="color: #0000FF;">Pack</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;^ii&quot;</span>, <span style="color: #FF0000;">1234</span>, <span style="color: #FF0000;">4542</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p>The <b>^</b> character specifies that encoding from that point on will be done in using the big-endian encoder and then one <b>i</b> letter for each integer that will be packed.
</p>
<h2> <span class="mw-headline" id="Pack_Instruction_Specification"> Pack Instruction Specification </span></h2>
<p><b>Pack Control Specifiers</b>
</p>
<table border="1" cellpadding="2" cellspacing="0" align="center" style="margin: 0 0 1em 1em; text-align:left; border-collapse:collapse; border:1px gray solid; font-size:95%; background:#f9f9f9">

<tr>
<th>Character
</th>
<th>Description
</th></tr>
<tr>
<td>^
</td>
<td> Switch to big endian encoding
</td></tr>
<tr>
<td>_
</td>
<td> Switch to little endian encoding
</td></tr>
<tr>
<td>%
</td>
<td> Switch to host (native) encoding
</td></tr>
<tr>
<td>!
</td>
<td> aligns the next data type to its natural boundary, for example for a double that would be 8 bytes, for a 32-bit int, that would be 4 bytes.  For strings this is set to 4.
</td></tr>
<tr>
<td>N
</td>
<td> a number between 1 and 9, indicates a repeat count (process N items with the following datatype
</td></tr>
<tr>
<td>[N]
</td>
<td>For numbers larger than 9, use brackets, for example [20]
</td></tr>
<tr>
<td>*
</td>
<td> Repeat the next data type until the arguments are exhausted
</td></tr></table>
<p><b>Pack Data Encoding</b>
</p>
<table border="1" cellpadding="2" cellspacing="0" align="center" style="margin: 0 0 1em 1em; text-align:left; border-collapse:collapse; border:1px gray solid; font-size:95%; background:#f9f9f9">

<tr>
<th>
</th>
<th>Description
</th></tr>
<tr>
<td>s
</td>
<td> Int16
</td></tr>
<tr>
<td>S
</td>
<td> UInt16
</td></tr>
<tr>
<td>i
</td>
<td> Int32
</td></tr>
<tr>
<td>I
</td>
<td> UInt32
</td></tr>
<tr>
<td>l
</td>
<td> Int64
</td></tr>
<tr>
<td>L
</td>
<td> UInt64
</td></tr>
<tr>
<td>f
</td>
<td>float
</td></tr>
<tr>
<td>d
</td>
<td>double
</td></tr>
<tr>
<td>b
</td>
<td>byte
</td></tr>
<tr>
<td>c
</td>
<td>1-byte signed character
</td></tr>
<tr>
<td>C
</td>
<td>1-byte unsigned character
</td></tr>
<tr>
<td>z8
</td>
<td> string encoded as UTF8 with 1-byte null terminator
</td></tr>
<tr>
<td>z6
</td>
<td> string encoded as UTF16 with 2-byte null terminator
</td></tr>
<tr>
<td>z7
</td>
<td>string encoded as UTF7 with 1-byte null terminator
</td></tr>
<tr>
<td>zb
</td>
<td>string encoded as BigEndianUnicode with 2-byte null terminator
</td></tr>
<tr>
<td>z3
</td>
<td>string encoded as UTF32 with 4-byte null terminator
</td></tr>
<tr>
<td>z4
</td>
<td>string encoded as UTF32 big endian with 4-byte null terminator
</td></tr>
<tr>
<td>$8
</td>
<td>string encoded as UTF8
</td></tr>
<tr>
<td>$6
</td>
<td>string encoded as UTF16
</td></tr>
<tr>
<td>$7
</td>
<td>string encoded as UTF7
</td></tr>
<tr>
<td>$b
</td>
<td>string encoded as BigEndianUnicode
</td></tr>
<tr>
<td>$3
</td>
<td>string encoded as UTF32
</td></tr>
<tr>
<td>$4
</td>
<td>string encoded as UTF-32 big endian encoding
</td></tr>
<tr>
<td>x
</td>
<td>null byte
</td></tr></table>
<p>While packing, if more packing instructions exist than data to be packed, the value packed is null.
</p>
<h2> <span class="mw-headline" id="Pack.2FUnpack_Examples"> Pack/Unpack Examples </span></h2>
<pre class="csharp" style="font-family:monospace;">DataConverter<span style="color: #008000;">.</span><span style="color: #0000FF;">Pack</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;CCCC&quot;</span>, <span style="color: #FF0000;">65</span>, <span style="color: #FF0000;">66</span>, <span style="color: #FF0000;">67</span>, <span style="color: #FF0000;">68</span><span style="color: #008000;">&#41;</span>
<span style="color: #008080; font-style: italic;">// Result: 4-byte sequence for &quot;ABCD&quot;</span>
&#160;
DataConverter<span style="color: #008000;">.</span><span style="color: #0000FF;">Pack</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;4C&quot;</span>, <span style="color: #FF0000;">65</span>, <span style="color: #FF0000;">66</span>, <span style="color: #FF0000;">67</span>, <span style="color: #FF0000;">68</span><span style="color: #008000;">&#41;</span>
<span style="color: #008080; font-style: italic;">// Result: 4-byte sequence for &quot;ABCD&quot;</span>
&#160;
DataConverter<span style="color: #008000;">.</span><span style="color: #0000FF;">Pack</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;4C&quot;</span>, <span style="color: #FF0000;">65</span>, <span style="color: #FF0000;">66</span>, <span style="color: #FF0000;">67</span>, <span style="color: #FF0000;">68</span>, <span style="color: #FF0000;">69</span>, <span style="color: #FF0000;">70</span><span style="color: #008000;">&#41;</span>
<span style="color: #008080; font-style: italic;">// Result: 4-byte sequence for &quot;ABCD&quot;</span>
&#160;
DataConverter<span style="color: #008000;">.</span><span style="color: #0000FF;">Pack</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;^ii&quot;</span>, 0x1234abcd, 0x7fadb007<span style="color: #008000;">&#41;</span>
<span style="color: #008080; font-style: italic;">// Result: 12 34 ab cd 7f ad b0 07</span>
&#160;
<span style="color: #008080; font-style: italic;">// Encode 3 integers as big-endian, but only provides two as arguments,</span>
<span style="color: #008080; font-style: italic;">// this defaults to zero for the last value.</span>
DataConverter<span style="color: #008000;">.</span><span style="color: #0000FF;">Pack</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;^iii&quot;</span>, 0x1234abcd, 0x7fadb007<span style="color: #008000;">&#41;</span>
<span style="color: #008080; font-style: italic;">// Result: 12 34 ab cd 7f ad b0 07 00 00 00 00</span>
&#160;
<span style="color: #008080; font-style: italic;">// Encode as little endian, pack 1 short, align, 1 int</span>
Dump <span style="color: #008000;">&#40;</span>DataConverter<span style="color: #008000;">.</span><span style="color: #0000FF;">Pack</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;_s!i&quot;</span>, 0x7b, 0x12345678<span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008080; font-style: italic;">// Result: 7b 00 00 00 78 56 34 12</span>
&#160;
<span style="color: #008080; font-style: italic;">// Encode a string in utf-8 with a null terminator</span>
Dump <span style="color: #008000;">&#40;</span>DataConverter<span style="color: #008000;">.</span><span style="color: #0000FF;">Pack</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;z8&quot;</span>, <span style="color: #666666;">&quot;hello&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span>
<span style="color: #008080; font-style: italic;">// Result: 68 65 6c 6c 6f 00 00 00 00</span>
&#160;
<span style="color: #008080; font-style: italic;">// Little endian encoding, for Int16, followed by an aligned</span>
<span style="color: #008080; font-style: italic;">// Int32</span>
DataConverter<span style="color: #008000;">.</span><span style="color: #0000FF;">Pack</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;_s!i&quot;</span>, 0x7b, 0x12345678<span style="color: #008000;">&#41;</span>
<span style="color: #008080; font-style: italic;">// Result: 7b 00 00 00 78 56 34 12</span>
&#160;
<span style="color: #008080; font-style: italic;">// Unpack a GUID:</span>
IList l <span style="color: #008000;">=</span> DataConverter<span style="color: #008000;">.</span><span style="color: #0000FF;">Unpack</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;_issbbbbbbbb&quot;</span>, guid, <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008080; font-style: italic;">// l [0] contains the 32 bit value</span>
<span style="color: #008080; font-style: italic;">// l [1] contains the first 16 bit value</span>
<span style="color: #008080; font-style: italic;">// l [2] contains the second 16 bit value</span>
<span style="color: #008080; font-style: italic;">// l [3] contains the first 8 bit value</span>
<span style="color: #008080; font-style: italic;">// and so on.</span></pre>
<h1> <span class="mw-headline" id="Static_Methods"> Static Methods </span></h1>
<p><b>Note:</b> the static methods are not included by default, if you want to use them you must enable their compilation by defining the MONO_DATACONVERT_STATIC_METHODS define.
</p><p>The methods to convert from arrays of bytes into native types take the following naming convention: <b>Type</b>From<b>Source</b>.   Where <b>Type</b> is one of Double, Float, Int64, UInt64, Int32, UInt32, Int32, UInt32, Int16, UInt16 and <b>Source</b> is one of BE, LE or Memory.
</p><p>The <b>Memory</b> variants will convert the byte array into the proper value, the byte array must have the values stored in the same order that the host expects it to be (this is similar to System.BitConverter).
</p><p>The BE variants will convert from a byte array that contains data in big-endian format to a data type that is suitable for use in the current host.  
</p><p>The LE variants will convert from a byte array that contains data in little-endian format to a data type that is suitable for use in the current host.
</p>
<pre class="csharp" style="font-family:monospace;">        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">double</span> DoubleFromBE     <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">double</span> DoubleFromLE     <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">double</span> DoubleFromMemory <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">float</span>  FloatFromBE      <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">float</span>  FloatFromLE      <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">float</span>  FloatFromMemory  <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">short</span>  Int16FromBE      <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">short</span>  Int16FromLE      <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">short</span>  Int16FromMemory  <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">ushort</span> UInt16FromBE     <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">ushort</span> UInt16FromLE     <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">ushort</span> UInt16FromMemory <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">int</span>    Int32FromBE      <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">int</span>    Int32FromLE      <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">int</span>    Int32FromMemory  <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">uint</span>   UInt32FromBE     <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">uint</span>   UInt32FromLE     <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">uint</span>   UInt32FromMemory <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">long</span>   Int64FromBE      <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">long</span>   Int64FromLE      <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">long</span>   Int64FromMemory  <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">ulong</span>  UInt64FromBE     <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">ulong</span>  UInt64FromLE     <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">ulong</span>  UInt64FromMemory <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data, <span style="color: #6666cc; font-weight: bold;">int</span> index<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<pre class="csharp" style="font-family:monospace;">        <span style="color: #008080; font-style: italic;">// Encode to the host binary representation</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesNative <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">bool</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesNative <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">char</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesNative <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">short</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesNative <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesNative <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">long</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesNative <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">ushort</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesNative <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">uint</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesNative <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">ulong</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesNative <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">float</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesNative <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">double</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
&#160;
        <span style="color: #008080; font-style: italic;">// To Little Endian</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesLE <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">bool</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesLE <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">char</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesLE <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">short</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesLE <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesLE <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">long</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesLE <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">ushort</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesLE <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">uint</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesLE <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">ulong</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesLE <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">float</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesLE <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">double</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
&#160;
        <span style="color: #008080; font-style: italic;">// To Big Endian</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesBE <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">bool</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesBE <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">char</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesBE <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">short</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesBE <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesBE <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">long</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesBE <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">ushort</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesBE <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">uint</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesBE <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">ulong</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesBE <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">float</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
	<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetBytesBE <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">double</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span></pre>
<h1> <span class="mw-headline" id="Obtaining_Mono.DataConvert"> Obtaining Mono.DataConvert </span></h1>
<p>We encourage developers to use Mono.DataConvert in their applications by copying the source code file into their application.   
</p><p>The Mono.DataConvert class by default is internal, but you can change this by defining the DATACONVERTER_PUBLIC define when compiling the source code.  Also, the static methods are not included by default.
</p><p><b>Compilation Options</b>:
</p><p><b>MONO_DATACONVERTER_PUBLIC</b>: if set, the class is made public instead of the default setting which is internal.
</p><p><b>MONO_DATACONVERTER_STATIC_METHODS</b>: if set, this includes the static methods in the build.   By default they are not included.
</p><p>At this point we do not have plans of shipping an independent assembly.
</p><p>Download the source code from <a href="https://github.com/mono/mono/raw/master/mcs/class/corlib/Mono/DataConverter.cs" class="external autonumber" rel="nofollow">[1]</a>.
</p><p>A full history of this file is available <a href="https://github.com/mono/mono/commits/master/mcs/class/corlib/Mono/DataConverter.cs" class="external text" rel="nofollow">here</a>
</p>
<h1> <span class="mw-headline" id="Problems_with_the_CLI.27s_System.BitConverter"> Problems with the CLI's System.BitConverter </span></h1>
<p>The System.BitConverter class in the .NET framework 1.0 used to be a class that merely did conversions to and from host types into byte arrays.   This means that developers had to roll their own routines and check for the endianness of the host system.
</p>
