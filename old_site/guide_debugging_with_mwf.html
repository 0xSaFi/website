---
layout: obsolete
title: "Guide: Debugging With MWF"
permalink: /old_site/Guide:_Debugging_With_MWF/
redirect_from:
  - /Guide:_Debugging_With_MWF/
---

<h1>Guide: Debugging With MWF</h1>

<div style="margin-left: auto; padding: 5px; margin-right: auto; background-color: #F0FADE; border: 1px solid #DBEAC1; margin-top: 7px;"><b>This guide builds on the sample presented in <a href="{{site.github.url}}/old_site/Guide:_Porting_Winforms_Applications" title="Guide: Porting Winforms Applications">Guide: Porting Winforms Applications</a>.  Please refer to it if you need background information on the project being used.</b></div>
<p>When debugging Winforms applications for Mono, many times it is easier if you can debug with Managed.Windows.Forms (MWF - Mono's version of System.Windows.Forms), instead of Microsoft's System.Windows.Forms.  To accomplish this, you can load the MWF project file into your solution, which will allow you to debug into Mono's MWF code.  This guide illustrates the steps necessary to do this.
</p>
<h2> <span class="mw-headline" id="Getting_the_MWF_Project"> Getting the MWF Project </span></h2>
<p>Download Mono's source tree from:
</p><p><a href="http://github.com/mono/mono" class="external free" rel="nofollow">http://github.com/mono/mono</a>
</p>
<h2> <span class="mw-headline" id="Setting_up_the_Environment"> Setting up the Environment </span></h2>
<p>Mono's System.Windows.Forms implementation resides in the mcs/class/Managed.Windows.Forms folder of the Mono source tree, and it includes Visual Studio project files for both Visual Studio 2003 and 2005. These are used to debug MWF for the 1.1 (SWF.csproj - VStudio 2003) and 2.0 (SWF2k5.csproj - VStudio 2005) profiles.
</p><p>To debug an application using Mono's Winforms library instead of the MS.Net version, we load into the solution the project file, and change the application references to point to the library generated by the project.
</p><p><a href="{{site.github.url}}/images/old_site/1/1d/Mwf_adding.png" class="image"><img alt="Mwf adding.png" src="{{site.github.url}}/images/old_site/1/1d/Mwf_adding.png" width="850" height="399" /></a>
</p><p>With the project loaded in the solution, all we need now is to change any references to the System.Windows.Forms assembly so they point to our newly loaded project. Of the 4 projects that comprise the NClass solution, only 2 reference SWF - GUI and GUI.Diagram - so we remove those references and add new ones to the SWF2k5 project.
</p><p><a href="{{site.github.url}}/images/old_site/f/f7/Mwf_reference.png" class="image"><img alt="Mwf reference.png" src="{{site.github.url}}/images/old_site/f/f7/Mwf_reference.png" width="700" height="415" /></a>
</p>
<h2> <span class="mw-headline" id="Building"> Building </span></h2>
<p>Another nice feature of this setup is that it will show us exactly which methods of MWF the project uses that are not implemented.  Using our NClass example before we modified it, building gives us this:
</p><p><a href="{{site.github.url}}/images/old_site/6/62/Nclass_builderrors.png" class="image"><img alt="Nclass builderrors.png" src="{{site.github.url}}/images/old_site/6/62/Nclass_builderrors.png" width="605" height="210" /></a>
</p><p><a href="{{site.github.url}}/images/old_site/a/af/Nclass_builderrors2.png" class="image"><img alt="Nclass builderrors2.png" src="{{site.github.url}}/images/old_site/a/af/Nclass_builderrors2.png" width="597" height="105" /></a>
</p><p>Since GUI depends on GUI.Diagram, you'll have to fix or comment the build errors on GUI.Diagram first, before going on to GUI. The list of errors above shows errors for both projects, and I had to temporarily comment all the lines with errors on GUI.Diagram so that I could see the errors on the GUI project.
</p><p>Note that this setup only replaces System.Windows.Forms, and not other references like System or System.Drawing.  The Microsoft version of these will still be used.  This can be useful for narrowing down a bug to MWF and not one of its dependencies.  Also, you cannot use the visual designers in Visual Studio while using this trick, as they are linked to .Net's System.Windows.Forms and not Mono's Managed.Windows.Forms.
</p>
