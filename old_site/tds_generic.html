---
layout: obsolete
title: "TDS Generic"
permalink: /old_site/TDS_Generic/
---

<h1>TDS Generic</h1>

<h1> <span class="mw-headline" id="TDS_Generic"> TDS Generic </span></h1>
<ul><li> ADO.NET Provider for old Sybase and Microsoft SQL Server databases
</li></ul>
<ul><li> Provider is no longer maintained
</li></ul>
<ul><li> Exists in namespace Mono.Data.TdsClient and assembly Mono.Data.TdsClient
</li></ul>
<ul><li> Used the <a href="http://www.freetds.org/" class="external text" rel="nofollow">FreeTDS</a> and <a href="http://jtds.sourceforge.net/" class="external text" rel="nofollow">jTDS</a> projects as resources.
</li></ul>
<ul><li> Does not require a client library
</li></ul>
<ul><li> Requires the assembly Mono.Data.Tds.dll which implements the TDS protocol
</li></ul>
<ul><li> Uses TDS Protocol Version 4.2 by default
</li></ul>
<h2> <span class="mw-headline" id="Using"> Using </span></h2>
<p><b>Prerequisites</b> 
</p>
<ul><li> Have a working mono and mcs installed
</li></ul>
<ul><li> Have access to a Sybase or Microsoft SQL Server database or either download it:
</li></ul>
<ul><li> <a href="http://www.microsoft.com/sql/default.asp" class="external text" rel="nofollow">Microsoft SQL Server</a>
</li></ul>
<ul><li> <a href="http://www.sybase.com/downloads" class="external text" rel="nofollow">Sybase</a>
</li></ul>
<ul><li> If using Microsoft SQL Server 2000, make sure you are using at least Service Pack 3 for Microsoft SQL Server 2000
</li></ul>
<ul><li> Located at mcs/class/System.Data/Test is a test for System.Data.SqlClient named SqlTest.cs and you could use this as a basis for your test.
</li></ul>
<p><b>Connection String Format</b> 
</p>
<ul><li> Has a connection string format:
</li></ul>
<pre>
Server=hostname;Database=databaseName;User ID=userid;Password=password
</pre>
<ul><li> The Server part can be used two ways:
</li></ul>
<ul><li> hostname - "Server=MYHOST"
</li></ul>
<ul><li> hostname,port - "Server=MYHOST,1533"
</li></ul>
<b>C# Example</b> <pre class="csharp" style="font-family:monospace;"> <span style="color: #0600FF; font-weight: bold;">using</span> <span style="color: #008080;">System</span><span style="color: #008000;">;</span>
 <span style="color: #0600FF; font-weight: bold;">using</span> <span style="color: #008080;">System.Data</span><span style="color: #008000;">;</span>
 <span style="color: #0600FF; font-weight: bold;">using</span> <span style="color: #008080;">Mono.Data.TdsClient</span><span style="color: #008000;">;</span>
&#160;
 <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> Test
 <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">void</span> Main<span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> args<span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
       <span style="color: #6666cc; font-weight: bold;">string</span> connectionString <span style="color: #008000;">=</span>
          <span style="color: #666666;">&quot;Server=localhost;&quot;</span> <span style="color: #008000;">+</span>
          <span style="color: #666666;">&quot;Database=pubs;&quot;</span> <span style="color: #008000;">+</span>
          <span style="color: #666666;">&quot;User ID=myuserid;&quot;</span> <span style="color: #008000;">+</span>
          <span style="color: #666666;">&quot;Password=mypassword;&quot;</span><span style="color: #008000;">;</span>
       IDbConnection dbcon<span style="color: #008000;">;</span>
       dbcon <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> TdsConnection<span style="color: #008000;">&#40;</span>connectionString<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
       dbcon<span style="color: #008000;">.</span><span style="color: #0000FF;">Open</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
       IDbCommand dbcmd <span style="color: #008000;">=</span> dbcon<span style="color: #008000;">.</span><span style="color: #0000FF;">CreateCommand</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
       <span style="color: #6666cc; font-weight: bold;">string</span> sql <span style="color: #008000;">=</span>
           <span style="color: #666666;">&quot;SELECT fname, lname &quot;</span> <span style="color: #008000;">+</span>
           <span style="color: #666666;">&quot;FROM employee&quot;</span><span style="color: #008000;">;</span>
       dbcmd<span style="color: #008000;">.</span><span style="color: #0000FF;">CommandText</span> <span style="color: #008000;">=</span> sql<span style="color: #008000;">;</span>
       IDataReader reader <span style="color: #008000;">=</span> dbcmd<span style="color: #008000;">.</span><span style="color: #0000FF;">ExecuteReader</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
       <span style="color: #0600FF; font-weight: bold;">while</span><span style="color: #008000;">&#40;</span>reader<span style="color: #008000;">.</span><span style="color: #0000FF;">Read</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
            <span style="color: #6666cc; font-weight: bold;">string</span> FirstName <span style="color: #008000;">=</span> <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span><span style="color: #008000;">&#41;</span> reader<span style="color: #008000;">&#91;</span><span style="color: #666666;">&quot;fname&quot;</span><span style="color: #008000;">&#93;</span><span style="color: #008000;">;</span>
            <span style="color: #6666cc; font-weight: bold;">string</span> LastName <span style="color: #008000;">=</span> <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span><span style="color: #008000;">&#41;</span> reader<span style="color: #008000;">&#91;</span><span style="color: #666666;">&quot;lname&quot;</span><span style="color: #008000;">&#93;</span><span style="color: #008000;">;</span>
            Console<span style="color: #008000;">.</span><span style="color: #0000FF;">WriteLine</span><span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;Name: &quot;</span> <span style="color: #008000;">+</span>
                 FirstName <span style="color: #008000;">+</span> <span style="color: #666666;">&quot; &quot;</span> <span style="color: #008000;">+</span> LastName<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
       <span style="color: #008000;">&#125;</span>
       <span style="color: #008080; font-style: italic;">// clean up</span>
       reader<span style="color: #008000;">.</span><span style="color: #0000FF;">Close</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
       reader <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">null</span><span style="color: #008000;">;</span>
       dbcmd<span style="color: #008000;">.</span><span style="color: #0000FF;">Dispose</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
       dbcmd <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">null</span><span style="color: #008000;">;</span>
       dbcon<span style="color: #008000;">.</span><span style="color: #0000FF;">Close</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
       dbcon <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">null</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
 <span style="color: #008000;">&#125;</span></pre>
<ul><li> Building C# Example: 
</li></ul>
<ul><li> Save the example to a file, such as, TestExample.cs
</li></ul>
<ul><li> Build using Mono C# compiler:
</li></ul>
<pre>
 mcs TestExample.cs -r:System.Data.dll -r:Mono.Data.TdsClient.dll
</pre>
<ul><li> Running the Example:
</li></ul>
<pre>
 mono TestExample.exe 
</pre>

