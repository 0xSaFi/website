---
layout: obsolete
title: "Accessibility: Getting Started With Development"
permalink: /old_site/Accessibility:_Getting_Started_With_Development/
redirect_from:
  - /Accessibility:_Getting_Started_With_Development/
---

<h1>Accessibility: Getting Started With Development</h1>

<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Getting_the_Code"><span class="tocnumber">2</span> <span class="toctext">Getting the Code</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Setting_Up_Your_Environment"><span class="tocnumber">3</span> <span class="toctext">Setting Up Your Environment</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Building_the_Code"><span class="tocnumber">4</span> <span class="toctext">Building the Code</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Making_Changes"><span class="tocnumber">5</span> <span class="toctext">Making Changes</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Coding_Guidelines"><span class="tocnumber">5.1</span> <span class="toctext">Coding Guidelines</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Good_resources"><span class="tocnumber">5.2</span> <span class="toctext">Good resources</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="#Testing_Your_Changes"><span class="tocnumber">6</span> <span class="toctext">Testing Your Changes</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#Getting_Code_Coverage"><span class="tocnumber">6.1</span> <span class="toctext">Getting Code Coverage</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="#Submitting_Patches"><span class="tocnumber">7</span> <span class="toctext">Submitting Patches</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#Committing_Changes_to_SVN"><span class="tocnumber">8</span> <span class="toctext">Committing Changes to SVN</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#BEFORE_COMMITTING:_Setting_up_SVN_auto-props"><span class="tocnumber">8.1</span> <span class="toctext">BEFORE COMMITTING: Setting up SVN auto-props</span></a></li>
</ul>
</li>
</ul>
</td></tr></table>
<h2> <span class="mw-headline" id="Introduction">Introduction</span></h2>
<p>So you've just joined the <a href="{{site.github.url}}/old_site/Accessibility:_Team" title="Accessibility: Team">UIA team</a>, or are interested in contributing to the development effort.  Welcome!  Here are some guidelines to get started with building our software, making changes, submitting patches, and committing to SVN.
</p>
<h2> <span class="mw-headline" id="Getting_the_Code">Getting the Code</span></h2>
<p>The UIA code is located in Mono SVN.  It is contained in the uia2atk module.  We suggest that you keep all Mono SVN checkouts in one common directory, such as ~/mono-svn.  Change to this directory and run the following command:
</p>
<pre>svn co svn+ssh://[yournamehere]@mono-cvs.ximian.com/source/trunk/uia2atk
</pre>
<p>As of this writing, you will also need gtk-sharp, mono, and mcs from SVN.
</p>
<pre>svn co svn+ssh://[yournamehere]@mono-cvs.ximian.com/source/trunk/mono
svn co svn+ssh://[yournamehere]@mono-cvs.ximian.com/source/trunk/mcs
svn co svn+ssh://[yournamehere]@mono-cvs.ximian.com/source/trunk/gtk-sharp
</pre>
<h2> <span class="mw-headline" id="Setting_Up_Your_Environment">Setting Up Your Environment</span></h2>
<ul><li> You need a bunch of bleeding edge stuff in your GAC.  Easiest way to do that is to set up <a href="{{site.github.url}}/old_site/Parallel_Mono_Environments" title="Parallel Mono Environments">Parallel Mono Environments</a>.  We recommend using a user-writable path for your prefix, so you don't have to use `sudo` whenever you `make install`.  On this page we'll use the example prefix of /home/[user]/parallel-mono
<ul><li> Follow the wiki page exactly, installing mono/gtk-sharp/etc from latest SVN (not from tarballs).
</li><li> Follow the same instructions but for uia2atk/UIAutomation.
</li><li> Install <a href="http://www.go-mono.com/sources/mono-addins/mono-addins-0.3.1.tar.bz2" class="external text" rel="nofollow">Mono.Addins 0.3.1 from tarball</a> in the parallel environment.
</li><li> Install MonoDevelop in the parallel environment:
<ul><li> Checkout the latest MonoDevelop trunk (or use MonoDevelop 1.9.1 (aka 2.0 Alpha 2)): 
</li></ul>
</li></ul>
</li></ul>
<pre> svn co svn+ssh://[yournamehere]@mono-cvs.ximian.com/source/trunk/monodevelop
</pre>
<ul><li><ul><li><ul><li> And build it with:
</li></ul>
</li></ul>
</li></ul>
<pre>cd monodevelop
./configure --profile=core --prefix=<i>/home/[user]/parallel-mono</i>
make
</pre>
<ul><li><ul><li><ul><li> You can run it uninstalled if you like:
</li></ul>
</li></ul>
</li></ul>
<pre>make run
</pre>
<ul><li><ul><li><ul><li> Or install it in your parallel environment (may require sudo):
</li></ul>
</li></ul>
</li></ul>
<pre>make install
</pre>
<ul><li><ul><li><ul><li> If you have trouble starting your new MD, you may need to delete your old addin configuration by doing `rm -rf ~/.config/MonoDevelop/addin*`.
</li></ul>
</li><li> <b>Whenever you deal with mono-a11y stuff, make sure you're running in the parallel environment!</b>  You do this by doing everything from a terminal that has run `source ~/mono-dev-env` (replace ~/mono-dev-env with the location of your parallel mono environment script).
</li></ul>
</li></ul>
<h2> <span class="mw-headline" id="Building_the_Code">Building the Code</span></h2>
<p>First, always make sure you are running in the parallel mono environment when you work with this code:
</p>
<pre>sandy@linux:~&gt; source ~/mono-dev-env
[mono] ~ @
</pre>
<p>(If you don't have your <a href="{{site.github.url}}/Parallel_Mono_Environments#Tip:_CONFIG_SITE" class="external text" rel="nofollow">CONFIG_SITE</a> set up, you will need to specify the correct prefix when you run autogen.sh, for example `./autogen.sh --prefix=/home/[user]/parallel-mono`)
</p>
<pre>[mono] ~/mono-svn/uia2atk/UIAutomation @ ./autogen.sh &amp;&amp; make &amp;&amp; make install
</pre>
<pre>[mono] ~/mono-svn/uia2atk/UiaAtkBridge @ ./autogen.sh
</pre>
<pre>[mono] ~/mono-svn/uia2atk/UIAutomationWinforms @ ./autogen.sh
</pre>
<p>You can then open uia2atk/Uia2Atk.mds in MonoDevelop to modify our code and build your changes:
</p>
<pre>[mono] ~/mono-svn/uia2atk @ monodevelop Uia2Atk.mds
</pre>
<p>You will need to `make install` UiaAtkBridge and UIAutomationWinforms in order to have a11y support for winforms.
</p>
<h2> <span class="mw-headline" id="Making_Changes">Making Changes</span></h2>
<p>We highly recommend using MonoDevelop to edit UIA code.  If you are adding any new files, MonoDevelop will automatically update our makefiles to include those files in the build.  Also, those new files will be added to your SVN working copy, so your patches will come out correctly.
</p>
<h3> <span class="mw-headline" id="Coding_Guidelines">Coding Guidelines</span></h3>
<p>In general we follow the <a href="{{site.github.url}}/old_site/Coding_Guidelines" title="Coding Guidelines">Mono Coding Guidelines</a>, with the following notable exceptions:
</p>
<ul><li> We use camelCase instead of names_with_underscores for all private/protected fields and local variables.
</li><li> We put the opening curly brace ('{') for a class on the next line.
</li><li> We align method call arguments the same way method declaration arguments are aligned according to the Mono guidelines (this is MonoDevelop's default behavior).
</li><li> Almost every non-private class you write should be internal instead of public. Make sure you have a good reason for making a class public.
</li><li> Names in UIA are so long that we often cannot avoid going over 80 characters per line.  Try your best to keep your lines short and your code readable, though.
</li></ul>
<h3> <span class="mw-headline" id="Good_resources">Good resources</span></h3>
<ul><li> <a href="{{site.github.url}}/old_site/Accessibility:_Provider_From_Scratch" title="Accessibility: Provider From Scratch"> Writing Provider from Scratch</a>
</li><li> <a href="{{site.github.url}}/old_site/Accessibility:_Winforms_Implementation" title="Accessibility: Winforms Implementation"> Windows Forms Implementation</a>
</li></ul>
<h2> <span class="mw-headline" id="Testing_Your_Changes">Testing Your Changes</span></h2>
<ol><li> Make sure your changes build by rebuilding the MonoDevelop solution.
</li><li> Install your modifications to the system using `make install`.
</li><li> Run unit tests to make sure nothing broke.
</li><li> Test to make sure your changes do what you think they do.
</li></ol>
<h3> <span class="mw-headline" id="Getting_Code_Coverage">Getting Code Coverage</span></h3>
<p>If you install monocov from svn, you can do something like this to get code coverage when you run your unit tests:
</p>
<pre>cd ~/mono-svn/uia2atk/UIAutomationWinforms/UIAutomationWinformsTests/bin/Debug
MONO_OPTIONS="--profile=monocov:outfile=mytest.cov,+[UIAutomationWinforms]" nunit-console2 UIAutomationWinformsTests.dll
monocov mytest.cov
</pre>
<p>This can be really helpful if you want to make sure that your tests are really exercising your code sufficiently.
</p>
<h2> <span class="mw-headline" id="Submitting_Patches">Submitting Patches</span></h2>
<p>Now you have made your changes and tested them and would like them to be reviewed so that they can be committed.  First, generate a patch from the top level of your working copy with this command (in this example, notice that my current directory is the top level of the uia2atk SVN module):
</p>
<pre>[mono] ~/mono-svn/uia2atk @ svn diff &gt; my-cool-fix.patch
</pre>
<p>Then send an email to the mono-a11y list (<a href="http://forge.novell.com/mailman/listinfo/mono-a11y" class="external text" rel="nofollow">mono-a11y@forge.novell.com</a>) describing your patch, with the patch attached to the email.  The development team will review your patch, and may request some changes.  If that is the case, please follow the process above to re-test and re-submit your patch.  If the patch is approved, a team member may commit it to SVN for you, or you may be asked to commit it yourself.
</p>
<h2> <span class="mw-headline" id="Committing_Changes_to_SVN">Committing Changes to SVN</span></h2>
<p>If you have a Mono SVN account, you may be asked to commit your changes.  We highly recommend using MonoDevelop to do this, to ensure that your commit messages and ChangeLog entries follow the same convention that we use.
</p><p>Open up the MonoDevelop solution in which you have been working, right-click it in the Solution Explorer, and select "Version Control -&gt; Review Changes".  You will be presented with a lovely UI where you can see what files have been changed, review diffs, etc.  Make sure only the files you want to commit are checked.  Click on a file and a text entry will appear where you can document the changes you made.  This text will automatically be converted into appropriate ChangeLog entires and commit log messages.  After entering a message for each file (HINT: you can select multiple files at once and give them the same message), click the "Commit..." button, review the ChangeLog entries, and select "Commit".
</p>
<h3> <span class="mw-headline" id="BEFORE_COMMITTING:_Setting_up_SVN_auto-props">BEFORE COMMITTING: Setting up SVN auto-props</span></h3>
<p>Some of our files should be editable in Windows and in Linux.  To make sure we don't get mixed line endings in our files, all files should have the svn:eol-style property set to "native".  You should configure Subversion to automatically set this property on new files.
</p><p>You need to edit your subversion configuration file.  On Linux, this file is located at ~/.subversion/config .  On Windows, using TortoiseSVN, right-click anywhere on the Desktop and go to TortoiseSVN -&gt; Settings -&gt; General -&gt; Subversion configuration file, and select the Edit button.
</p><p>Unless you have already customized yours, most of the file will be commented out with "#" characters.  Add this to your configuration file:
</p>
<pre>### Set enable-auto-props to 'yes' to enable automatic properties
### for 'svn add' and 'svn import', it defaults to 'no'.
### Automatic properties are defined in the section 'auto-props'.
enable-auto-props = yes

### Section for configuring automatic properties.
[auto-props]
### The format of the entries is:
###   file-name-pattern = propname[=value][;propname[=value]...]
### The file-name-pattern can contain wildcards (such as '*' and
### '?').  All entries which match (case-insensitively) will be
### applied to the file.  Note that auto-props functionality
### must be enabled, which is typically done by setting the
### 'enable-auto-props' option.
*.c = svn:eol-style=native
*.cpp = svn:eol-style=native
*.h = svn:eol-style=native
*.cs = svn:eol-style=native
*.py = svn:eol-style=native
*.boo = svn:eol-style=native
Makefile = svn:eol-style=native
ChangeLog = svn:eol-style=native
*.dll.sources = svn:eol-style=native
</pre>
