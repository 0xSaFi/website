---
layout: obsolete
title: "Compiling GtkSharp"
permalink: /old_site/Compiling_GtkSharp/
redirect_from:
  - /Compiling_GtkSharp/
---

<h1>Compiling GtkSharp</h1>

<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Dependencies"><span class="tocnumber">2</span> <span class="toctext">Dependencies</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Build_process"><span class="tocnumber">3</span> <span class="toctext">Build process</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Troubleshooting"><span class="tocnumber">4</span> <span class="toctext">Troubleshooting</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Links_.26_Resources"><span class="tocnumber">5</span> <span class="toctext">Links &amp; Resources</span></a></li>
</ul>
</td></tr></table>
<h2> <span class="mw-headline" id="Introduction"> Introduction </span></h2>
<p>This article describes how to build Gtk# &gt;= 2.12.9 on Windows.
</p><p>We recommend to use Gtk# trunk from our <a href="{{site.github.url}}/old_site/AnonSVN" title="AnonSVN" class="mw-redirect">AnonSVN</a> repository which currently targets Gtk+ 2.14 as it builds much faster.
</p>
<h2> <span class="mw-headline" id="Dependencies"> Dependencies </span></h2>
<p>Building GTK# 2 uses a similar process as <a href="{{site.github.url}}/old_site/Compiling_Mono_on_Windows" title="Compiling Mono on Windows">Compiling_Mono_on_Windows</a>. First, we'll need some more dependencies:
</p>
<ul><li> Microsoft's .NET Framework and SDK. If you're building Gtk# 2.12, you need version 1.1 whilst trunk builds against .net 2 or any later version. Do <b>not</b> try to build Gtk# 2.12 against .net 2.
</li></ul>
<p>The MS .NET SDK is needed because the gtk-sharp2 build currently uses the disassembler(ildasm) and gacutil from the MS SDK for a portion of the build. 
</p><p>Now the Gtk dependencies:
</p>
<ul><li> Download the latest Gtk+ bundle from <a href="http://www.gtk.org/download-windows.html" class="external free" rel="nofollow">http://www.gtk.org/download-windows.html</a>
</li></ul>
<p>If you want to build Glade#(optional):
</p>
<ul><li> iconv and libxml2 from <a href="http://xmlsoft.org/sources/win32/" class="external free" rel="nofollow">http://xmlsoft.org/sources/win32/</a>
</li><li> libglade-bin and libglade-dev from the gladewin32 project: <a href="http://sourceforge.net/project/showfiles.php?group_id=98754" class="external free" rel="nofollow">http://sourceforge.net/project/showfiles.php?group_id=98754</a>
</li></ul>
<p>Extract these zip files to the same location by using Microsoft's xcopy or the very useful copy function in 7-zip which can also handle directory structures.
</p><p>Add the ZIP_FILES\bin directory to your path(Windows XP: control panel-&gt;System-&gt;Advanced-&gt;Environment variables-&gt;Path) and run gtk-demo.exe in the same directory to test your Gtk+ installation.
</p><p>As we have to use the win32 pkg-config from the Gtk+ bundle(because has supports for dynamic disks such as C:/devel/target/... needed by the Gtk+ pkg-config files), create a symlink from your ZIP_FILES/share/aclocal/pkg.m4 file to /usr/share/aclocal/pkg.m4:
</p>
<pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">ln</span> <span style="color: #660033;">-s</span> <span style="color: #000000; font-weight: bold;">/</span>cygdrive<span style="color: #000000; font-weight: bold;">/</span>c<span style="color: #000000; font-weight: bold;">/</span>ZIP_FILES<span style="color: #000000; font-weight: bold;">/</span>share<span style="color: #000000; font-weight: bold;">/</span>aclocal<span style="color: #000000; font-weight: bold;">/</span>pkg.m4 <span style="color: #000000; font-weight: bold;">/</span>usr<span style="color: #000000; font-weight: bold;">/</span>share<span style="color: #000000; font-weight: bold;">/</span>aclocal<span style="color: #000000; font-weight: bold;">/</span>pkg.m4</pre>
<p>If the target already exists, uninstall the cygwin pkg-config package.
</p><p>Now you should create some symlinks to shorten the cygwin paths and to avoid spaces. For example:
</p>
<pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">ln</span> <span style="color: #660033;">-s</span> <span style="color: #ff0000;">&quot;/cygrive/c/Windows/Microsoft.NET/Framework/v2.0&quot;</span> <span style="color: #000000; font-weight: bold;">/</span>dotnet
<span style="color: #c20cb9; font-weight: bold;">ln</span> <span style="color: #660033;">-s</span> <span style="color: #ff0000;">&quot;/cygdrive/c/Program Files/Microsoft.NET/SDK/v2.0/Bin&quot;</span> <span style="color: #000000; font-weight: bold;">/</span>sdk
<span style="color: #c20cb9; font-weight: bold;">ln</span> <span style="color: #660033;">-s</span> <span style="color: #ff0000;">&quot;/cygrive/c/ZIP_FILES/bin&quot;</span> <span style="color: #000000; font-weight: bold;">/</span>gtk</pre>
<h2> <span class="mw-headline" id="Build_process"> Build process </span></h2>
<p>Make sure that Mono is not in the path, and put the MS tools in the path. Here's an example of how to do this from the cygwin bash shell:
</p>
<pre class="bash" style="font-family:monospace;"><span style="color: #7a0874; font-weight: bold;">export</span> <span style="color: #007800;">PATH</span>=<span style="color: #ff0000;">&quot;/dotnet:/sdk:/gtk/bin:/bin&quot;</span></pre>
<p>Now we can start building. Unpack the gtk-sharp2 source and enter it's directory. Here are the commands to build:
</p>
<pre class="bash" style="font-family:monospace;"><span style="color: #7a0874; font-weight: bold;">export</span> <span style="color: #007800;">CC</span>=<span style="color: #ff0000;">&quot;gcc -mno-cygwin&quot;</span>             <span style="color: #666666; font-style: italic;"># Make sure we're not dependent on cygwin</span>
.<span style="color: #000000; font-weight: bold;">/</span>configure <span style="color: #660033;">--prefix</span>=<span style="color: #000000; font-weight: bold;">/</span>tmp<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">install</span>       <span style="color: #666666; font-style: italic;"># Choose any prefix you like, call bootstrap-2.xx instead when building SVN</span>
&#160;
<span style="color: #c20cb9; font-weight: bold;">make</span>
<span style="color: #c20cb9; font-weight: bold;">make</span> <span style="color: #c20cb9; font-weight: bold;">install</span></pre>
<p>Add the INSTALL_PREFIX\lib directory to your Windows(not Cygwin!) Path as well. The .NET dll's will be placed in the MS GAC. Enjoy!
</p>
<h2> <span class="mw-headline" id="Troubleshooting"> Troubleshooting </span></h2>
<ul><li> The most likely reason for the build to fail is that you are using Cygwin't pkg-config package instead of the one that is shipped with the Gtk+ bundle. Make sure that you uninstalled Cygwin's pkg-config and put "/gtk/bin" in your PATH.
</li></ul>
<ul><li> Building Gtk# 2.12 with .net &gt;= 2.0 is known not to work.
</li></ul>
<ul><li> If you still can't get it to work, write a mail to the Gtk# mailing list (see <a href="{{site.github.url}}/old_site/Mailing_Lists" title="Mailing Lists">Mailing_Lists</a>).
</li></ul>
<h2> <span class="mw-headline" id="Links_.26_Resources"> Links &amp; Resources </span></h2>
<ul><li> Gtk# installer for .net from <a href="{{site.github.url}}/old_site/Downloads" title="Downloads">Downloads</a>
</li></ul>
<ul><li> Up to date glib (<a href="http://anonsvn.mono-project.com/viewcvs/*checkout*/trunk/release/packaging/defs/mono" class="external free" rel="nofollow">http://anonsvn.mono-project.com/viewcvs/*checkout*/trunk/release/packaging/defs/mono</a>) and gtk (<a href="http://anonsvn.mono-project.com/viewcvs/*checkout*/trunk/release/packaging/defs/gtk-sharp" class="external free" rel="nofollow">http://anonsvn.mono-project.com/viewcvs/*checkout*/trunk/release/packaging/defs/gtk-sharp</a>) dependencies that are being used for the Mono Windows Combined Installer.
</li></ul>

