---
layout: obsolete
title: "Guide:Running Mono Applications"
permalink: /old_site/Guide:Running_Mono_Applications/
redirect_from:
  - /Guide:Running_Mono_Applications/
---

<h1>Guide:Running Mono Applications</h1>

<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Basic_usage"><span class="tocnumber">1</span> <span class="toctext">Basic usage</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Shell_Scripts"><span class="tocnumber">2</span> <span class="toctext">Shell Scripts</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Registering_.exe_as_non-native_binaries_.28Linux_only.29"><span class="tocnumber">3</span> <span class="toctext">Registering .exe as non-native binaries (Linux only)</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Bundles"><span class="tocnumber">4</span> <span class="toctext">Bundles</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#macpack_.28Mac_OS_X_only.29"><span class="tocnumber">5</span> <span class="toctext">macpack (Mac OS X only)</span></a></li>
</ul>
</td></tr></table>
<h2> <span class="mw-headline" id="Basic_usage"> Basic usage </span></h2>
<p>The normal way to run an application you have compiled with Mono would be to invoke it through the Mono runtime, like this: 
</p>
<pre>
mono myprogram.exe
</pre>
<p>Mono includes two execution systems: 
</p>
<ul><li> one is based on an advanced code generator (with the <tt>mono</tt> command); and
</li><li> one, older and unsupported, is based on an interpreter (the <tt>mint</tt> command).
</li></ul>
<p>With the mono JIT default, not all optimizations are turned on, since some of them can be quite time consuming. However, when using it in batch mode, it is recommended that you use the <tt>-O=all</tt> switch to improve the code generation, for example: 
</p>
<pre>$ mono --aot -O=all library.dll
</pre>
<p>The above will leave the native version of the code in `library.dll.so'.  See the page on <a href="{{site.github.url}}/old_site/AOT" title="AOT">AOT</a> for more details.
</p>
<h2> <span class="mw-headline" id="Shell_Scripts"> Shell Scripts </span></h2>
<p>However, there are two things you can do to make it more convenient to run Mono applications. The first is to use a shell script instead of the EXE file. For example, if you had "myprogram.exe" you could create a shell script called "myprogram" that had the contents: 
</p>
<pre>
#!/bin/sh
/usr/bin/mono /usr/lib/APPLICATION/myprogram.exe &quot;$@&quot;
</pre>
<p>When you run "myprogram," the shell will replace $@ with any arguments you provided. 
</p><p>If you installed mono to a different location, substitute that for /usr/bin/mono. You can check with the "which mono" command.
</p><p>See also <a href="{{site.github.url}}/old_site/Guidelines:Application_Deployment#Layout_Recommendation" title="Guidelines:Application Deployment">Application Deployment Layout Guidelines</a>.
</p>
<h2> <span class="mw-headline" id="Registering_.exe_as_non-native_binaries_.28Linux_only.29"> Registering .exe as non-native binaries (Linux only) </span></h2>
<p>Because this is a Linux-specific feature, we do not recommend that developers deploy this solution, as it would limit the portability of their scripts.
</p><p>In addition, this mechanism does not work as intended by the <a href="{{site.github.url}}/old_site/Guidelines:Application_Deployment" title="Guidelines:Application Deployment">Application Deployment Guidelines</a>.  
</p><p>You can also make a systemwide change, and use binfmt to register the exe files as non-native binaries. Then, when trying to launch an exe file, the kernel will run the mono interpreter to handle the command. Binfmt can also be used to launch Windows executables using WINE, or Java .class files using a JVM. To register exe with the kernel: 
</p>
<ul><li>Become root and turn on the binfmt module in your kernel with this command: 
</li></ul>
<pre>
modprobe binfmt
</pre>
<p>In addition, you may want to add that command to your /etc/rc.local boot script, so that it will be executed on boot.
</p>
<ul><li>Add the line below to your /etc/fstab file: 
</li></ul>
<pre>
binfmt_misc /proc/sys/fs/binfmt_misc binfmt_misc none
</pre>
<ul><li>Then, have your system run the following command on boot: 
</li></ul>
<pre>
echo ':CLR:M::MZ::/usr/bin/mono:' &gt; /proc/sys/fs/binfmt_misc/register
</pre>
<ul><li>Be sure to mark your .exe files as executable in the filesystem as well: 
</li></ul>
<pre>
chmod +x myprogram.exe
</pre>
<p>Note that this doesn't change your kernel, just the modules that it loads when you boot your system. In other words, you can still upgrade your kernel without worrying about losing these changes. Similarly, you can upgrade your Mono runtime without affecting any of the invocation methods listed in this section.
</p>
<h2> <span class="mw-headline" id="Bundles"> Bundles </span></h2>
<p><i>mkbundle</i> generates an executable program that will contain static copies of the assemblies listed on the command line.
</p><p>By  default  only  the assemblies specified in the command line will be included in the bundle. To automatically include all of the dependencies referenced, use the "--deps" command line option.
</p><p>For example, to create a bundle for hello world, use the following command:
</p>
<pre>            $ mkbundle -o hello hello.exe --deps
             Sources: 1 Auto-dependencies: True
                embedding: /home/ed/Projects/hello_world/hello.exe
                embedding: /mono/lib/mono/1.0/mscorlib.dll
             Compiling:
             as -o /tmp/tmp54ff73e6.o temp.s
             cc -o hello -Wall temp.c `pkg-config --cflags --libs mono` /tmp/tmp54ff73e6.o
             Done

             $ ls -l
             total 1481
             -rwxr-xr-x  1 ed users 1503897 2005-04-29 11:07 hello
             -rw-r--r--  1 ed users     136 2005-04-29 11:06 hello.cs
             -rwxr-xr-x  1 ed users    3072 2005-04-29 11:06 hello.exe

</pre>
<p>The resulting executable is self contained and does not need the Mono runtime installed to run. However, if your application relies on libraries linked to by the mono runtime or Gtk#, those will need to be installed (Gtk# helper libraries come to mind).
</p><p>An example with a slightly more complex application (with the same mkbundle options) which uses Gtk# and misc assemblies:
</p>
<pre>
            $ mkbundle eGuide.exe --deps -o eGuide
            Sources: 1 Auto-dependencies: True
               embedding: /home/ed/Projects/eguide-mono/eGuide.exe
               embedding: /mono/lib/mono/1.0/mscorlib.dll
               embedding: /mono/lib/mono/gac/gtk-sharp/1.0.0.0__35e10195dab3c99f/gtk-sharp.dll
             config from: /mono/lib/mono/gac/gtk-sharp/1.0.0.0__35e10195dab3c99f/gtk-sharp.dll.config
               embedding: /mono/lib/mono/gac/glib-sharp/1.0.0.0__35e10195dab3c99f/glib-sharp.dll
             config from: /mono/lib/mono/gac/glib-sharp/1.0.0.0__35e10195dab3c99f/glib-sharp.dll.config
               embedding: /mono/lib/mono/1.0/System.dll
               embedding: /mono/lib/mono/1.0/System.Xml.dll
               embedding: /mono/lib/mono/gac/gdk-sharp/1.0.0.0__35e10195dab3c99f/gdk-sharp.dll
             config from: /mono/lib/mono/gac/gdk-sharp/1.0.0.0__35e10195dab3c99f/gdk-sharp.dll.config
               embedding: /mono/lib/mono/gac/pango-sharp/1.0.0.0__35e10195dab3c99f/pango-sharp.dll
             config from: /mono/lib/mono/gac/pango-sharp/1.0.0.0__35e10195dab3c99f/pango-sharp.dll.config
               embedding: /mono/lib/mono/gac/atk-sharp/1.0.0.0__35e10195dab3c99f/atk-sharp.dll
             config from: /mono/lib/mono/gac/atk-sharp/1.0.0.0__35e10195dab3c99f/atk-sharp.dll.config
               embedding: /mono/lib/mono/gac/glade-sharp/1.0.0.0__35e10195dab3c99f/glade-sharp.dll
             config from: /mono/lib/mono/gac/glade-sharp/1.0.0.0__35e10195dab3c99f/glade-sharp.dll.config
               embedding: /mono/lib/mono/1.0/System.DirectoryServices.dll
               embedding: /mono/lib/mono/1.0/Novell.Directory.Ldap.dll
               embedding: /mono/lib/mono/1.0/Mono.Security.dll
            Compiling:
            as -o /tmp/tmp713f3cc1.o temp.s
            cc -o eGuide -Wall temp.c `pkg-config --cflags --libs mono` /tmp/tmp713f3cc1.o
            Done
            
            $ ls -l
            -rwxr-xr-x  1 ed users 5022039 2005-04-29 10:52 eGuide
            -rwxr-xr-x  1 ed users   16384 2005-04-13 16:20 eGuide.exe
</pre>
<p>The -z option allows you to compress the assemblies included in the bundle, and reduce the disk space consumed.
</p><p>The -c option will create a host.c file which contains the main function of the program, which you can modify before compiling and linking the application.  
</p><p>With -c, the further option --nomain will generate the host.c file without a main method so that you can embed it as a library in an existing native application in which you are embedding the Mono runtime yourself.  Just call mono_mkbundle_init() before initializing the JIT to make the bundled assemblies available.
</p><p>Bundles in addition support a --static flag.   The --static flag causes mkbundle to generate a static executable that statically links the Mono runtime.   Be advised that this option will trigger the LGPL requirement that you still distribute the independent pieces to your user so he can manually upgrade his Mono runtime if he chooses to do so.    Alternatively, you can obtain a proprietary license of Mono by <a href="{{site.github.url}}/old_site/Contact" title="Contact">contacting Xamarin</a>. 
</p>
<h2> <span class="mw-headline" id="macpack_.28Mac_OS_X_only.29"> macpack (Mac OS X only) </span></h2>
<p><i>macpack</i> is a tool that must be used to bundle Cocoa#   applications into Double-Clickable, Finder friendly, bundles on Mac OS X.  It bundles  
static libraries and resources, as well as generates a basic info.plist into the .app bundle.
</p><p>For example the following commands are used to build the CurrencyConverter.exe into an application bundle:
</p>
<pre>
$ mcs -g -debug+ CurrencyConverter.cs -out:CurrencyConverter.exe -pkg:cocoa-sharp
$ rm -rf CurrencyConverter.app
$ macpack -m:2 -o:.  -r:/Library/Frameworks/Mono.framework/Versions/Current/lib/ libCocoaSharpGlue.dylib
        -r:CurrencyConverter.nib -n:CurrencyConverter -a:CurrencyConverter.exe
</pre>
<p>The resulting CurrencyConverter.app is just another Mac OS X application as far as the Finder is concerned, and can be opened from Finder, or launched  
from Terminal using the open -a CurrencyConverter command.
</p>
