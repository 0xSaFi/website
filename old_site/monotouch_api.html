---
layout: obsolete
title: "MonoTouch API"
permalink: /old_site/MonoTouch_API/
redirect_from:
  - /MonoTouch_API/
---

<h1>MonoTouch API</h1>

<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Unbound_Types_.26_Members"><span class="tocnumber">2</span> <span class="toctext">Unbound Types &amp; Members</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Major_Namespaces"><span class="tocnumber">3</span> <span class="toctext">Major Namespaces</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#MonoTouch.ObjCRuntime"><span class="tocnumber">3.1</span> <span class="toctext">MonoTouch.ObjCRuntime</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#MonoTouch.Foundation"><span class="tocnumber">3.2</span> <span class="toctext">MonoTouch.Foundation</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="#NSObject"><span class="tocnumber">3.2.1</span> <span class="toctext">NSObject</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-7"><a href="#MonoTouch.UIKit"><span class="tocnumber">3.3</span> <span class="toctext">MonoTouch.UIKit</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#OpenGLES"><span class="tocnumber">3.4</span> <span class="toctext">OpenGLES</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#Binding_Design"><span class="tocnumber">4</span> <span class="toctext">Binding Design</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Types"><span class="tocnumber">4.1</span> <span class="toctext">Types</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Delegates"><span class="tocnumber">4.2</span> <span class="toctext">Delegates</span></a>
<ul>
<li class="toclevel-3 tocsection-12"><a href="#Via_Events"><span class="tocnumber">4.2.1</span> <span class="toctext">Via Events</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#Strongly_typed_via_a_Delegate_property"><span class="tocnumber">4.2.2</span> <span class="toctext">Strongly typed via a Delegate property</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#Loosely_typed_via_the_WeakDelegate_property"><span class="tocnumber">4.2.3</span> <span class="toctext">Loosely typed via the WeakDelegate property</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#Mapping_of_the_Objective-C_delegate_pattern_to_C.23"><span class="tocnumber">4.2.4</span> <span class="toctext">Mapping of the Objective-C delegate pattern to C#</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#Mapping_Delegates_to_C.23"><span class="tocnumber">4.2.5</span> <span class="toctext">Mapping Delegates to C#</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-17"><a href="#Responding_to_Events"><span class="tocnumber">4.3</span> <span class="toctext">Responding to Events</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Models"><span class="tocnumber">4.4</span> <span class="toctext">Models</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Interface_Builder_Outlets_and_C.23"><span class="tocnumber">4.5</span> <span class="toctext">Interface Builder Outlets and C#</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Selectors"><span class="tocnumber">4.6</span> <span class="toctext">Selectors</span></a></li>
</ul>
</li>
</ul>
</td></tr></table>
<h1> <span class="mw-headline" id="Overview"> Overview </span></h1>
<p>In addition to the core Base Class Libraries that are part of Mono, <a href="{{site.baseurl}}/MonoTouch" title="MonoTouch">MonoTouch</a> ships with bindings for various iPhone APIs to allow developers to create native iPhone applications with Mono.
</p><p>At the core of MonoTouch there is an interop engine that bridges the C# world with the Objective-C world as well as bindings for the iPhone C-based APIs like CoreGraphics and <a href="#OpenGLES">OpenGLES</a>.
</p><p>The low-level runtime to communicate with Objective-C code is in the <a href="#MonoTouch.ObjCRuntime">MonoTouch.ObjCRuntime</a>.   On top of this foundation bindings for <a href="#MonoTouch.Foundation">Foundation</a>, CoreFoundation and <a href="#MonoTouch.UIKit">UIKit</a> are provided.
</p>
<h1> <span class="mw-headline" id="Unbound_Types_.26_Members"> Unbound Types &amp; Members </span></h1>
<p>At this point in time, not all CocoaTouch types and members have been bound for use by managed code.  Some frameworks consist solely of C code, and thus can be bound via <a href="{{site.baseurl}}/Dllimport" title="Dllimport" class="mw-redirect">P/Invoke</a>.  Other frameworks are Objective-C code, and thus require <a href="{{site.baseurl}}/MonoTouch_ManualSelectorInvocation" title="MonoTouch ManualSelectorInvocation">manual selector invocation</a>.
</p>
<h1> <span class="mw-headline" id="Major_Namespaces"> Major Namespaces </span></h1>
<h2> <span class="mw-headline" id="MonoTouch.ObjCRuntime"> MonoTouch.ObjCRuntime </span></h2>
<p>The <a href="http://www.go-mono.com/docs/index.aspx?tlink=20@N:MonoTouch.ObjCRuntime" class="external text" rel="nofollow">MonoTouch.ObjCRuntime</a> namespace allows developers to bridge the worlds between C# and Objective-C.   This is a new binding designed specifically for the iPhone based on the experience from Cocoa# and Gtk#.
</p>
<h2> <span class="mw-headline" id="MonoTouch.Foundation"> MonoTouch.Foundation  </span></h2>
<p>The <a href="http://www.go-mono.com/docs/index.aspx?link=N:MonoTouch.Foundation" class="external text" rel="nofollow">MonoTouch.Foundation</a> namespace provides the basic data types designed to interoperate with the Objective-C Foundation framework that is part of the iPhone and it is the base for object oriented programming in Objective-C.
</p><p>MonoTouch mirrors in C# the hierarchy of classes from Objective-C.  For example, the Objective-C base class <a href="http://developer.apple.com/iphone/library/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html" class="external text" rel="nofollow">NSObject</a> is usable from C# via <a href="http://www.go-mono.com/docs/index.aspx?link=T:MonoTouch.Foundation.NSObject" class="external text" rel="nofollow">MonoTouch.Foundation.NSObject</a>.
</p><p>Although this namespace provides bindings for the underlying Objective-C Foundation types, in a few cases we have mapped the underlying types to .NET types.  For example:
</p>
<ul><li> Instead of dealing with <a href="http://developer.apple.com/iphone/library/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html" class="external text" rel="nofollow">NSString</a> and <a href="http://developer.apple.com/iphone/library/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/Reference/Reference.html" class="external text" rel="nofollow">NSArray</a> the runtime instead exposes these as C# <a href="http://www.go-mono.com/docs/index.aspx?link=T:System.String" class="external text" rel="nofollow">string</a>s and strongly typed <a href="http://www.go-mono.com/docs/index.aspx?link=T:System.Array" class="external text" rel="nofollow">array</a>s throughout the API.
</li><li> Various helper APIs are exposed here to allow developers to bind third party Objective-C APIs, other iPhone APIs or APIs that are not currently bound by MonoTouch.
</li></ul>
<p>For more details on binding APIs see the <a href="/index.php?title=MonoTouch_Binding_Generator&amp;action=edit&amp;redlink=1" class="new" title="MonoTouch Binding Generator (page does not exist)">MonoTouch Binding Generator</a> section.
</p>
<h3> <span class="mw-headline" id="NSObject"> NSObject </span></h3>
<p>The <a href="http://www.go-mono.com/docs/index.aspx?link=T:MonoTouch.Foundation.NSObject" class="external text" rel="nofollow">NSObject</a> type is the foundation for all the Objective-C bindings.  
</p><p>While Mono will provide garbage collection for all of your objects, we made the <code>MonoTouch.Foundation.NSObject</code> implement the [http:/monodoc/T:System.IDisposable System.IDisposable] interface.  If your type needs to perform deterministic finalization, override the 
<a href="http://www.go-mono.com/docs/index.aspx?link=M:MonoTouch.Foundation.NSObject.Dispose(System.Boolean)" class="external text" rel="nofollow">NSObject.Dispose(bool) method</a>.
</p>
<h2> <span class="mw-headline" id="MonoTouch.UIKit"> MonoTouch.UIKit </span></h2>
<p>The <a href="http://www.go-mono.com/docs/index.aspx?link=N:MonoTouch.UIKit" class="external text" rel="nofollow">MonoTouch.UIKit</a> namespace contains a 1 to 1 mapping to all of the UI components that make up CocoaTouch in the form of C# classes.    The API has been modified to follow the conventions used in the C# language.
</p><p>C# delegates are provided for common operations.   See the <a href="#Delegates">delegates</a> section for more information.
</p>
<h2> <span class="mw-headline" id="OpenGLES"> OpenGLES </span></h2>
<p>For OpenGLES we distribute a <a href="http://www.go-mono.com/docs/index.aspx?link=N:OpenTK" class="external text" rel="nofollow">modified version</a> of the <a href="http://www.opentk.com" class="external text" rel="nofollow">OpenTK</a> API, an object-oriented binding to OpenGL that has been modified to use CoreGraphics data types and structures as well as only exposing the functionality that is available on the iPhone.
</p><p>OpenGLES 1.1 functionality is available through the <a href="http://www.go-mono.com/docs/index.aspx?link=T:OpenTK.Graphics.ES11.ES" class="external text" rel="nofollow">ES</a> type.
</p><p>OpenGLES 2.0 functionality is available through the <a href="http://www.go-mono.com/docs/index.aspx?link=T:OpenTK.Graphics.ES20.ES" class="external text" rel="nofollow">ES</a> type.
</p>
<h1> <span class="mw-headline" id="Binding_Design"> Binding Design </span></h1>
<p>MonoTouch is not merely a binding to the underlying Objective-C platform.   It extends the .NET type system and dispatch system to better blend C# and Objective-C.
</p><p>Just like P/Invoke is a useful tool to invoke native libraries on Windows and Linux, or how IJW support can be used for COM interop on Windows, MonoTouch extends the runtime to support binding C# objects to Objective-C objects.
</p><p>The discussion in the next few sections is not necessary for users that are creating MonoTouch applications, but will help developers understand how things are done and will assist them when creating more complicated applications.
</p>
<h2> <span class="mw-headline" id="Types"> Types </span></h2>
<p>Where it made sense, we exposed C# types instead of low-level MonoTouch.Foundation types to the C# universe.    This means that the API uses the C# "string" type instead of NSString and it uses strongly typed C# arrays instead of exposing NSArray.
</p><p>Additionally, instead of exposing CGRect, CGPoint and CGSize from the CoreGraphics API, we replaced those with the System.Drawing implementations RectF, PointF and SizeF as they would help developers preserve existing OpenGL code that uses OpenTK.
</p>
<h2> <span class="mw-headline" id="Delegates"> Delegates </span></h2>
<p>Objective-C and C# have different meanings for the words delegate in each language.
</p><p>In the Objective-C world and in the documentation that you will find online about CocoaTouch, a delegate is typically an instance of a class that will respond to a set of methods.   This is very similar to a C# interface with the difference that the methods are not always mandatory.   
</p><p><br />
These delegates play an important role in UIKit and other CocoaTouch APIs.    They are used for various things:
</p>
<ul><li> To provide notifications to your code (Similar to event delivery in C# or Gtk+)
</li><li> To implement models for data visualization controls.
</li><li> To drive the behavior of a control.
</li></ul>
<p>The programming pattern was designed to minimize the creation of derived classes to alter behavior for a control.   This solution is similar in spirit to what other GUI toolkits have done over the years: Gtk's signals, Qt slots, Winforms events, WPF/Silverlight events and so on.    To avoid having hundreds of interfaces (one for each action) or requiring developers to implement too many methods they do not need, Objective-C supports optional method definitions.   This is different than C# interfaces that require all methods to be implemented.   
</p><p>In Objective-C classes, you will see that classes that use this programming pattern expose a property, usually called <code>delegate</code> which is required to implement the mandatory parts of the interface and zero or more of the optional parts.
</p><p>In MonoTouch we offer three mutually exclusive mechanisms to bind to these delegates:
</p>
<ol><li> <a href="#Events">Via events</a>.
</li><li> <a href="#StrongDelegate">Strongly typed via a <code>Delegate</code> property</a>.
</li><li> <a href="#WeakDelegate">Loosely typed via a <code>WeakDelegate</code> property</a>.
</li></ol>
<p>For example, consider the <a href="http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIWebView_Class/Reference/Reference.html" class="external text" rel="nofollow">UIWebView</a> class.  This dispatches to a <a href="http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIWebViewDelegate_Protocol/Reference/Reference.html" class="external text" rel="nofollow">UIWebViewDelegate</a> instance which is assigned to the <a href="http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIWebView_Class/Reference/Reference.html#//apple_ref/occ/instp/UIWebView/delegate" class="external text" rel="nofollow">delegate</a> property.
</p>
<p id="Events"></p>
<h3> <span class="mw-headline" id="Via_Events"> Via Events </span></h3>
<p>For many types, MonoTouch will automatically create an appropriate delegate which will forward the UIWebViewDelegate calls onto C# events.  For UIWebView:
</p>
<ul><li> The <a href="http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIWebViewDelegate/webViewDidStartLoad:" class="external text" rel="nofollow">webViewDidStartLoad</a> method is mapped to the <a href="http://www.go-mono.com/docs/index.aspx?link=E:MonoTouch.UIKit.UIWebView.LoadStarted" class="external text" rel="nofollow">UIWebView.LoadStarted</a> event.
</li><li> The <a href="http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIWebViewDelegate/webViewDidFinishLoad:" class="external text" rel="nofollow">webViewDidFinishLoad</a> method is mapped to the <a href="http://www.go-mono.com/docs/index.aspx?link=E:MonoTouch.UIKit.UIWebView.LoadFinished" class="external text" rel="nofollow">UIWebView.LoadFinished</a> event.
</li><li> The <a href="http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIWebViewDelegate/webView:didFailLoadWithError:" class="external text" rel="nofollow">webView:didFailLoadWithError</a> method is mapped to the <a href="http://www.go-mono.com/docs/index.aspx?link=E:MonoTouch.UIKit.UIWebView.LoadError" class="external text" rel="nofollow">UIWebView.LoadError</a> event.
</li></ul>
<p>For example, this simple program times the time it takes to load a web view:
</p>
<pre class="csharp" style="font-family:monospace;">DateTime startTime, endTime<span style="color: #008000;">;</span>
<span style="color: #0600FF; font-weight: bold;">var</span> web <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> UIWebView <span style="color: #008000;">&#40;</span><a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> CGRect <span style="color: #008000;">&#40;</span><span style="color: #FF0000;">0</span>, <span style="color: #FF0000;">0</span>, <span style="color: #FF0000;">200</span>, <span style="color: #FF0000;">200</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
web<span style="color: #008000;">.</span><span style="color: #0000FF;">LoadStarted</span> <span style="color: #008000;">+=</span> <span style="color: #008000;">&#40;</span>o, e<span style="color: #008000;">&#41;</span> <span style="color: #008000;">=&gt;</span> startTime <span style="color: #008000;">=</span> DateTime<span style="color: #008000;">.</span><span style="color: #0000FF;">Now</span><span style="color: #008000;">;</span>
web<span style="color: #008000;">.</span><span style="color: #0000FF;">LoadFinished</span> <span style="color: #008000;">+=</span> <span style="color: #008000;">&#40;</span>o, e<span style="color: #008000;">&#41;</span> <span style="color: #008000;">=&gt;</span> endTime <span style="color: #008000;">=</span> DateTime<span style="color: #008000;">.</span><span style="color: #0000FF;">Now</span><span style="color: #008000;">;</span></pre>
<p><br />
</p>
<p id="StrongDelegate"></p>
<h3> <span class="mw-headline" id="Strongly_typed_via_a_Delegate_property"> Strongly typed via a Delegate property </span></h3>
<p>If you would prefer not to use events, you can provide your own <a href="http://www.go-mono.com/docs/index.aspx?link=T:MonoTouch.UIKit.UIWebViewDelegate" class="external text" rel="nofollow">UIWebViewDelegate</a> subclass and assign it to the <a href="http://www.go-mono.com/docs/index.aspx?link=P:MonoTouch.UIKit.UIWebView.Delegate" class="external text" rel="nofollow">UIWebView.Delegate</a> property.  Once UIWebView.Delegate has been assigned, the UIWebView event dispatch mechanism will no longer function, and the UIWebViewDelegate methods will be invoked when the corresponding events occur.
</p><p>For example, this simple type records the time it takes to load a web view:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #6666cc; font-weight: bold;">class</span> Notifier <span style="color: #008000;">:</span> UIWebViewDelegate  <span style="color: #008000;">&#123;</span>
    DateTime startTime, endTime<span style="color: #008000;">;</span>
&#160;
    <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">override</span> LoadStarted <span style="color: #008000;">&#40;</span>UIWebView webview<span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        startTime <span style="color: #008000;">=</span> DateTime<span style="color: #008000;">.</span><span style="color: #0000FF;">Now</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
&#160;
    <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">override</span> LoadingFinished <span style="color: #008000;">&#40;</span>UIWebView webView<span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span> 
        endTime<span style="color: #008000;">=</span> DateTime<span style="color: #008000;">.</span><span style="color: #0000FF;">Now</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p>The above is used in code like this:
</p>
<pre class="csharp" style="font-family:monospace;">     <span style="color: #0600FF; font-weight: bold;">var</span> web <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> UIWebView <span style="color: #008000;">&#40;</span><a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> CGRect <span style="color: #008000;">&#40;</span><span style="color: #FF0000;">0</span>, <span style="color: #FF0000;">0</span>, <span style="color: #FF0000;">200</span>, <span style="color: #FF0000;">200</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
     web<span style="color: #008000;">.</span><span style="color: #6666cc; font-weight: bold;">Delegate</span> <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> Notifier <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p>The above will create a UIWebViewer and it will instruct it to send messages to an instance of Notifier, a class that we created to respond to messages.
</p><p>This pattern is also used to control behavior for certain controls, for example in the UIWebView case, the <a href="http://www.go-mono.com/docs/index.aspx?link=P:MonoTouch.UIKit.UIWebView.ShouldStartLoad" class="external text" rel="nofollow">UIWebView.ShouldStartLoad</a> property allows the UIWebView instance to control whether the UIWebView will load a page or not.
</p><p>The pattern is also used to provide the data on demand for a few controls.    For example the <a href="http://www.go-mono.com/docs/index.aspx?link=T:MonoTouch.UIKit.UITableView" class="external text" rel="nofollow">UITableView</a> control is a powerful table rendering control and both the look and the contents are driven by an instace of a <a href="http://www.go-mono.com/docs/index.aspx?link=T:MonoTouch.UIKit.UITableViewDataSource" class="external text" rel="nofollow">UITableViewDataSource</a>.
</p><p><br />
</p>
<p id="WeakDelegate"></p>
<h3> <span class="mw-headline" id="Loosely_typed_via_the_WeakDelegate_property"> Loosely typed via the WeakDelegate property </span></h3>
<p>In addition to the strongly typed property, there is also a weak typed delegate that allows the developer to bind things differently if desired.   Everywhere where a strongly typed <code>Delegate</code> property is exposed in MonoTouch's binding a corresponding <code>WeakDelegate</code> property is also exposed.
</p><p>When using the <code>WeakDelegate</code> you are responsible for properly decorating your class using the <a href="http://www.go-mono.com/docs/index.aspx?link=T:MonoTouch.Foundation.ExportAttribute" class="external text" rel="nofollow">Export</a> attribute to specify the selector.   For example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #6666cc; font-weight: bold;">class</span> Notifier <span style="color: #008000;">:</span> NSObject  <span style="color: #008000;">&#123;</span>
    DateTime startTime, endTime<span style="color: #008000;">;</span>
&#160;
    <span style="color: #008000;">&#91;</span>Export <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;webViewDidStartLoad:&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span>
    <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> LoadStarted <span style="color: #008000;">&#40;</span>UIWebView webview<span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        startTime <span style="color: #008000;">=</span> DateTime<span style="color: #008000;">.</span><span style="color: #0000FF;">Now</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
&#160;
    <span style="color: #008000;">&#91;</span>Export <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;webViewDidFinishLoad:&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span>
    <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> LoadingFinished <span style="color: #008000;">&#40;</span>UIWebView webView<span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span> 
        endTime<span style="color: #008000;">=</span> DateTime<span style="color: #008000;">.</span><span style="color: #0000FF;">Now</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#91;</span><span style="color: #008000;">...</span><span style="color: #008000;">&#93;</span>
     <span style="color: #0600FF; font-weight: bold;">var</span> web <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> UIWebView <span style="color: #008000;">&#40;</span><a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> CGRect <span style="color: #008000;">&#40;</span><span style="color: #FF0000;">0</span>, <span style="color: #FF0000;">0</span>, <span style="color: #FF0000;">200</span>, <span style="color: #FF0000;">200</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
     web<span style="color: #008000;">.</span><span style="color: #0000FF;">WeakDelegate</span> <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> Notifier <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p>Note that once the <code>WeakDelegate</code> property has been assigned, the <code>Delegate</code> property will not be used.
</p><p><br />
</p>
<h3> <span class="mw-headline" id="Mapping_of_the_Objective-C_delegate_pattern_to_C.23"> Mapping of the Objective-C delegate pattern to C# </span></h3>
<p>When you see Objective-C samples that look like this:
</p>
<pre class="c" style="font-family:monospace;">foo.<span style="color: #202020;">delegate</span> <span style="color: #339933;">=</span> <span style="color: #009900;">&#91;</span><span style="color: #009900;">&#91;</span>SomethingDelegate<span style="color: #009900;">&#93;</span> alloc<span style="color: #009900;">&#93;</span> init<span style="color: #009900;">&#93;</span></pre>
<p>This instructs the language to create and construct an instance of the class "SomethingDelegate" and assign the value to the delegate property on the foo variable.   This mechanism is supported by MonoTouch and C# the syntax is:
</p>
<pre class="csharp" style="font-family:monospace;">    foo<span style="color: #008000;">.</span><span style="color: #6666cc; font-weight: bold;">Delegate</span> <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> SomethingDelegate <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p>In MonoTouch we have provided strongly-typed classes that map to the Objective-C delegate classes.   To use them, you will be subclassing and overriding the methods defined by MonoTouch's implementation.   For more information on how they work, see the section "Models" below.
</p>
<h3> <span class="mw-headline" id="Mapping_Delegates_to_C.23"> Mapping Delegates to C# </span></h3>
<p>UIKit in general uses Objective-C delegates in two forms.   
</p><p>The first form is to provide an interface to a component's model.  For example, as a mechanism to provide data on demand for a view, for example as the data storage facility for a List view.   In these cases, you should always create an instance of the proper class and assign the variable.
</p><p>In the following example, we provide the UIPickerView with an implementation for a model that uses strings:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> SampleTitleModel <span style="color: #008000;">:</span> UIPickerViewTitleModel <span style="color: #008000;">&#123;</span>
&#160;
    <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">override</span> <span style="color: #6666cc; font-weight: bold;">string</span> TitleForRow <span style="color: #008000;">&#40;</span>UIPickerView picker, <span style="color: #6666cc; font-weight: bold;">int</span> row, <span style="color: #6666cc; font-weight: bold;">int</span> component<span style="color: #008000;">&#41;</span> 
    <span style="color: #008000;">&#123;</span> 
        <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #6666cc; font-weight: bold;">String</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Format</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;At {0} {1}&quot;</span>, row, component<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span> 
<span style="color: #008000;">&#125;</span>
&#160;
<span style="color: #008000;">&#91;</span><span style="color: #008000;">...</span><span style="color: #008000;">&#93;</span>
&#160;
pickerView<span style="color: #008000;">.</span><span style="color: #0000FF;">Model</span> <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> MyPickerModel <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p>The second form is to provide notification for events.   In those cases, although we still expose the API in the form outlined above, we also provide C# events, which should be simpler to use for quick operations and integrated with anonymous delegates and lambda expressions in C#.    
</p><p>For example, you can subscribe to UIAccelerometer events like this:
</p>
<pre class="csharp" style="font-family:monospace;">   UIAccelerometer<span style="color: #008000;">.</span><span style="color: #0000FF;">SharedAccelerometer</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Acceleration</span> <span style="color: #008000;">+=</span> <span style="color: #008000;">&#40;</span>sender, args<span style="color: #008000;">&#41;</span> <span style="color: #008000;">=&gt;</span> <span style="color: #008000;">&#123;</span>
      UIAcceleration acc <span style="color: #008000;">=</span> args<span style="color: #008000;">.</span><span style="color: #0000FF;">Acceleration</span><span style="color: #008000;">;</span>
      Console<span style="color: #008000;">.</span><span style="color: #0000FF;">WriteLine</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;Time={0} at {1},{2},{3}&quot;</span>, acc<span style="color: #008000;">.</span><span style="color: #0000FF;">Time</span>, acc<span style="color: #008000;">.</span><span style="color: #0000FF;">X</span>, acc<span style="color: #008000;">.</span><span style="color: #0000FF;">Y</span>, acc<span style="color: #008000;">.</span><span style="color: #0000FF;">Z</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
   <span style="color: #008000;">&#125;</span></pre>
<p>The two options are available where they make sense, but as a programmer you must pick one or the other.    If you create your own instance of a strongly typed responder/delegate and assign it, the C# events will not be functional.    If you use the C# events, the methods in your responder/delegate class will never be called.
</p><p>The previous example that used UIWebView can be written using C# 3.0 lambdas like this:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">var</span> web <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> UIWebView <span style="color: #008000;">&#40;</span><a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> CGRect <span style="color: #008000;">&#40;</span><span style="color: #FF0000;">0</span>, <span style="color: #FF0000;">0</span>, <span style="color: #FF0000;">200</span>, <span style="color: #FF0000;">200</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
web<span style="color: #008000;">.</span><span style="color: #0000FF;">LoadStarted</span> <span style="color: #008000;">+=</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">=&gt;</span> <span style="color: #008000;">&#123;</span> startTime <span style="color: #008000;">=</span> DateTime<span style="color: #008000;">.</span><span style="color: #0000FF;">Now</span><span style="color: #008000;">;</span> <span style="color: #008000;">&#125;</span>
web<span style="color: #008000;">.</span><span style="color: #0000FF;">LoadFinished</span> <span style="color: #008000;">+=</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">=&gt;</span> <span style="color: #008000;">&#123;</span> endTime <span style="color: #008000;">=</span> DateTime<span style="color: #008000;">.</span><span style="color: #0000FF;">Now</span><span style="color: #008000;">;</span> <span style="color: #008000;">&#125;</span></pre>
<h2> <span class="mw-headline" id="Responding_to_Events"> Responding to Events </span></h2>
<p>In Objective-C code sometimes event handlers for multiple controls and provides for information for multiple controls will be hosted in the same class.   This is possible because classes respond to messages, and as long as a class responds to that message it is possible to link objects together.
</p><p>As previously detailed, MonoTouch supports both the Objective-C delegate pattern, when you can create a new class that implements the delegate and override the desired methods as well as the C# event-based programming model.
</p><p>It is also possible to support Objective-C's pattern where responders for multiple different operations are all hosted in the same instance of a class.   To do this though, you will have to use low-level features of the MonoTouch binding.
</p><p>For example, if you wanted your class to respond both to the <code>UITextFieldDelegate.textFieldShouldClear:</code>  message as well as the <code>UIWebViewDelegate.webViewDidStartLoad:</code> in the same instance of a class you would have to use the [Export] attribute declaration.   It would look like this:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> MyCallbacks <span style="color: #008000;">:</span> NSObject <span style="color: #008000;">&#123;</span>
    <span style="color: #008000;">&#91;</span>Export <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;textFieldShouldClear:&quot;</span><span style="color: #008000;">&#93;</span>
    <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">bool</span> should_we_clear <span style="color: #008000;">&#40;</span>UITextField tf<span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
&#160;
    <span style="color: #008000;">&#91;</span>Export <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;webViewDidStartLoad:&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span> 
    <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> OnWebViewStart <span style="color: #008000;">&#40;</span>UIWebView view<span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        Console<span style="color: #008000;">.</span><span style="color: #0000FF;">WriteLine</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;Loading started&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p>The C# names for the methods are not important, all that matters are the strings passed to the [Export] attribute.    
</p><p>When using this style of programming you are responsible for making sure that the C# parameters match the actual types that the runtime engine will pass.
</p>
<h2> <span class="mw-headline" id="Models"> Models </span></h2>
<p>In UIKit storage facilities or responders are implemented using helper classes, these are usually referred in the Objective-C code as delegates and they are implemented as protocols.
</p><p>Objective-C protocols are like interfaces, but they support optional methods, that is, not all of the methods need to be implemented for the protocol to work.
</p><p>There are two ways of implementing a model, you can either implement it manually or use the existing strongly typed definitions.
</p><p>The manual mechanism is necessary when you try to implement a class that has not been bound by MonoTouch.   It is very easy to do, all you have to do is:
</p>
<ul><li> Flag your class for registration with the runtime
</li><li> Apply the [Export] attribute with the actual selector name on each method you want to override
</li><li> Instantiate the class, and pass it.
</li></ul>
<p>For example, the following implement only one of the optional methods in the UIApplicationDelegate protocol definition:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> MyAppController <span style="color: #008000;">:</span> NSObject <span style="color: #008000;">&#123;</span>
        <span style="color: #008000;">&#91;</span>Export <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;applicationDidFinishLaunching:&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> FinishedLaunching <span style="color: #008000;">&#40;</span>UIApplication app<span style="color: #008000;">&#41;</span>
        <span style="color: #008000;">&#123;</span>
                SetupWindow <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p>The Objective-C selector name ("applicationDidFinishLaunching:") is declared with the Export attribute and the class is registered with the [Register] attribute.
</p><p>MonoTouch provides already strongly typed declarations ready to use that do not require manual binding. To support this programming model, the MonoTouch runtime supports the [Model] attribute on a class declaration.   This informs the runtime that it should not wire up all the methods in the class, unless the method is explicitly implemented.
</p><p>This means that in MonoTouch.UIKit the classes that represent a protocol with optional methods are written like this:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #008000;">&#91;</span>Model<span style="color: #008000;">&#93;</span>
<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> SomeViewModel <span style="color: #008000;">:</span> NSObject <span style="color: #008000;">&#123;</span>
    <span style="color: #008000;">&#91;</span>Export <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;someMethod:&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span>
    <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">virtual</span> <span style="color: #6666cc; font-weight: bold;">int</span> SomeMethod <span style="color: #008000;">&#40;</span>TheView view<span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
       <span style="color: #0600FF; font-weight: bold;">throw</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> ModelNotImplementedException <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
    <span style="color: #008000;">...</span>
<span style="color: #008000;">&#125;</span></pre>
<p>When you want to implement a model that only implements some of the methods all you have to do is to override the methods that you are interested in, and ignore the other methods.   The runtime will only hook up the overwritten methods, not the original methods to the Objective-C world.
</p><p>The equivalent to the previous manual sample is:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> AppController <span style="color: #008000;">:</span> UIApplicationDelegate <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">override</span> <span style="color: #6666cc; font-weight: bold;">void</span> FinishedLaunching <span style="color: #008000;">&#40;</span>UIApplication uia<span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
     <span style="color: #008000;">...</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p>The advantage is that there is no need to dig into the Objective-C header files to find the selector, the types of the arguments, the mapping to C# and that you get intellisense from MonoDevelop and strong types.
</p>
<h2> <span class="mw-headline" id="Interface_Builder_Outlets_and_C.23"> Interface Builder Outlets and C# </span></h2>
<p>This is a low-level description of how Outlets integrate with C# and is provided for advanced users of MonoTouch.    When using MonoDevelop the mapping is done automatically behind the scenes using generated code on the flight for you.
</p><p>When you design your user interface with Interface Builder, you will only be designing the look of the application and will establish some default connections.    If you want to programatically fetch information, alter the behavior of a control at runtime or modify the control at runtime, it is necessary to bind some of the controls to your managed code.
</p><p>This is done in a few steps:
</p>
<ol><li> Add the outlet declaration to your "File's owner".
</li><li> Connect your control to the "File's owner".
</li><li> Store the UI plus the connections into your XIB/NIB file.
</li><li> Load the NIB file at runtime.
</li><li> Access the outlet variable.
</li></ol>
<p>The steps (1) through (3) are covered in Apple's documentation for building interfaces with Interface Builder.    
</p><p>When using MonoTouch your application will need to create a class that derives from UIViewController and implement it like this:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> MyViewController <span style="color: #008000;">:</span> UIViewController <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">public</span> MyViewController <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> nibName, NSBundle bundle<span style="color: #008000;">&#41;</span> <span style="color: #008000;">:</span> <span style="color: #0600FF; font-weight: bold;">base</span> <span style="color: #008000;">&#40;</span>nibName, bundle<span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        <span style="color: #008080; font-style: italic;">// You can have as many arguments as you want, but you need to call</span>
        <span style="color: #008080; font-style: italic;">// the base constructor with the provided nibName and bundle.</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p>Then to load your ViewController from a NIB file, you do this:
</p>
<pre class="csharp" style="font-family:monospace;">		<span style="color: #0600FF; font-weight: bold;">var</span> controller <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> MyViewController <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;HelloWorld&quot;</span>, NSBundle<span style="color: #008000;">.</span><span style="color: #0000FF;">MainBundle</span>, <span style="color: #0600FF; font-weight: bold;">this</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p>This loads the user interface from the NIB.   Now, to access the outlets, it is necessary to inform the runtime that we want to access them.   To do this, the <code>UIViewController</code> subclass needs to declare the properties and annotate them with the [Connect] attribute.  Like this:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #008000;">&#91;</span>Connect<span style="color: #008000;">&#93;</span>
UITextField UserName <span style="color: #008000;">&#123;</span> 
    <span style="color: #0600FF; font-weight: bold;">get</span> <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #008000;">&#40;</span>UITextField<span style="color: #008000;">&#41;</span> GetNativeField <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;UserName&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
    <span style="color: #0600FF; font-weight: bold;">set</span> <span style="color: #008000;">&#123;</span>
        SetNativeField <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;UserName&quot;</span>, <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p>The property implementation is the one that actually fetches and stores the value for the actual native type.
</p><p>You do not need to worry about this when using MonoDevelop and InterfaceBuilder.   MonoDevelop automatically mirrors all the declared outlets with code in a partial class that is compiled as part of your project.
</p>
<h2> <span class="mw-headline" id="Selectors"> Selectors </span></h2>
<p>A core concept of Objective-C programming are selectors.    You will often come across APIs that require you to pass a selector, or expects your code to respond to a selector.   
</p><p>Creating new selectors in C# is very easy, you just create a new instance of the <code>MonoTouch.ObjCRuntime.Selector</code> class and use the result in any place in the API that requires it.    For example:
</p>
<pre class="csharp" style="font-family:monospace;">    <span style="color: #0600FF; font-weight: bold;">var</span> selector_add <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> Selector <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;add:plus:&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p>To make a C# method respond to a selector call, you need to inherit from the NSObject type and decorating your C# method with the selector name using the [Export] attribute, for example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> MyMath <span style="color: #008000;">:</span> NSObject <span style="color: #008000;">&#123;</span>
    <span style="color: #008000;">&#91;</span>Export <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;add:plus:&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span>
    <span style="color: #6666cc; font-weight: bold;">int</span> <span style="color: #0600FF; font-weight: bold;">Add</span> <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> first, <span style="color: #6666cc; font-weight: bold;">int</span> second<span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
         <span style="color: #0600FF; font-weight: bold;">return</span> first <span style="color: #008000;">+</span> second<span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p>Note that selector names <b>must</b> match exactly, including all intermediate and trailing colons (":") if present.
</p>
