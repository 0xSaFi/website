---
layout: obsolete
title: "GtkSharpNewInVersion2x"
permalink: /old_site/GtkSharpNewInVersion2x/
---

<h1>GtkSharpNewInVersion2x</h1>

<p>This document describes the new features in Gtk# 2, the upgrade to Gtk+'s .NET binding.
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Gtk.23_2.12_additions"><span class="tocnumber">1</span> <span class="toctext">Gtk# 2.12 additions</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Memory_and_Reference_Management_Improvements"><span class="tocnumber">1.1</span> <span class="toctext">Memory and Reference Management Improvements</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Gtk.Object_destruction_enhancements"><span class="tocnumber">1.2</span> <span class="toctext">Gtk.Object destruction enhancements</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Revamped_the_GLib.Object_finalization_mechanism"><span class="tocnumber">1.3</span> <span class="toctext">Revamped the GLib.Object finalization mechanism</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Better_exception_handling"><span class="tocnumber">1.4</span> <span class="toctext">Better exception handling</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Structure_marshaling"><span class="tocnumber">1.5</span> <span class="toctext">Structure marshaling</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#GInterface_Registration"><span class="tocnumber">1.6</span> <span class="toctext">GInterface Registration</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#GObject_property_registration"><span class="tocnumber">1.7</span> <span class="toctext">GObject property registration</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#Gtk.23_2.6_additions"><span class="tocnumber">2</span> <span class="toctext">Gtk# 2.6 additions</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#AboutDialog"><span class="tocnumber">2.1</span> <span class="toctext">AboutDialog</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#New_Cell_renderer_types"><span class="tocnumber">2.2</span> <span class="toctext">New Cell renderer types</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#IconView"><span class="tocnumber">2.3</span> <span class="toctext">IconView</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13"><a href="#New_Binding_Features"><span class="tocnumber">3</span> <span class="toctext">New Binding Features</span></a>
<ul>
<li class="toclevel-2 tocsection-14"><a href="#Public_Field_generation_for_Objects_and_Opaques"><span class="tocnumber">3.1</span> <span class="toctext">Public Field generation for Objects and Opaques</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Enhanced_Ref_handling_and_Memory_Management"><span class="tocnumber">3.2</span> <span class="toctext">Enhanced Ref handling and Memory Management</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Callback_Lifecycle_management"><span class="tocnumber">3.3</span> <span class="toctext">Callback Lifecycle management</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#String_marshaling_overhaul"><span class="tocnumber">3.4</span> <span class="toctext">String marshaling overhaul</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#CDecl_Calling_Convention_for_Delegates"><span class="tocnumber">3.5</span> <span class="toctext">CDecl Calling Convention for Delegates</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Automatic_null_handling_for_Objects.2C_Opaques.2C_and_Interfaces"><span class="tocnumber">3.6</span> <span class="toctext">Automatic null handling for Objects, Opaques, and Interfaces</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Container_Child_Property_generation"><span class="tocnumber">3.7</span> <span class="toctext">Container Child Property generation</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#64_bit_marshaling_support"><span class="tocnumber">3.8</span> <span class="toctext">64 bit marshaling support</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#List_to_Array_marshaling"><span class="tocnumber">3.9</span> <span class="toctext">List to Array marshaling</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#Anonymous_delegate_parameter_parsing_and_generation"><span class="tocnumber">3.10</span> <span class="toctext">Anonymous delegate parameter parsing and generation</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-24"><a href="#Gtk.2B_2.4_API_Additions"><span class="tocnumber">4</span> <span class="toctext">Gtk+ 2.4 API Additions</span></a>
<ul>
<li class="toclevel-2 tocsection-25"><a href="#Actions_and_UIManager"><span class="tocnumber">4.1</span> <span class="toctext">Actions and UIManager</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#ComboBox"><span class="tocnumber">4.2</span> <span class="toctext">ComboBox</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#FileChooser"><span class="tocnumber">4.3</span> <span class="toctext">FileChooser</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#Toolbar"><span class="tocnumber">4.4</span> <span class="toctext">Toolbar</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-29"><a href="#Newly_bound_libraries"><span class="tocnumber">5</span> <span class="toctext">Newly bound libraries</span></a>
<ul>
<li class="toclevel-2 tocsection-30"><a href="#Gnome.Vfs"><span class="tocnumber">5.1</span> <span class="toctext">Gnome.Vfs</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#Gnome.PanelApplet"><span class="tocnumber">5.2</span> <span class="toctext">Gnome.PanelApplet</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-32"><a href="#New_Extensions_to_the_Bindings"><span class="tocnumber">6</span> <span class="toctext">New Extensions to the Bindings</span></a>
<ul>
<li class="toclevel-2 tocsection-33"><a href="#NodeView_and_NodeSelection"><span class="tocnumber">6.1</span> <span class="toctext">NodeView and NodeSelection</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#Gtk.Dotnet"><span class="tocnumber">6.2</span> <span class="toctext">Gtk.Dotnet</span></a></li>
<li class="toclevel-2 tocsection-35"><a href="#Key_Binding_Support"><span class="tocnumber">6.3</span> <span class="toctext">Key Binding Support</span></a></li>
<li class="toclevel-2 tocsection-36"><a href="#Application.Invoke"><span class="tocnumber">6.4</span> <span class="toctext">Application.Invoke</span></a></li>
</ul>
</li>
</ul>
</td></tr></table>
<h2> <span class="mw-headline" id="Gtk.23_2.12_additions"> Gtk# 2.12 additions </span></h2>
<h4> <span class="mw-headline" id="Memory_and_Reference_Management_Improvements"> Memory and Reference Management Improvements </span></h4>
<p>We now use the toggle_ref API introduced in glib-2.8 to provide more accurate reference management for managed subclasses of GLib.Object.  Toggle refs are a special class of reference that lets us determine if we are the sole owner of a native object.  This is especially important when dealing with managed subclasses of GLib.Object.  As long as unmanaged code holds references to a managed subclass, we have to artificially keep a managed ref around to ensure garbage collection doesn't occur, since the objects likely contain instance data that would be lost if the managed object is finalized.
</p>
<h4> <span class="mw-headline" id="Gtk.Object_destruction_enhancements"> Gtk.Object destruction enhancements </span></h4>
<p>We have simplified and improved the notification and release mechanism for Gtk object destruction, eliminating a substantial number of leakage scenarios.
</p>
<h4> <span class="mw-headline" id="Revamped_the_GLib.Object_finalization_mechanism"> Revamped the GLib.Object finalization mechanism </span></h4>
<p>In the previous implementation, the finalizers invoked GLib.Object.Dispose.  GLib.Object.Dispose would queue up the object for a timeout handler to process it.  This approach caused problems for subclasses that override Dispose.  Basically, any Dispose override would have had to do a similar timeout mechanism to ensure that any GObject operations they performed would not occur on the GC thread.
</p><p>We now do the timeout in the finalizer itself.  It queues up the object for a timeout handler which invokes Dispose on the queued objects.  This ensures that all Dispose invocations occur on the "GUI thread" and takes the burden off the subclass author to do the switch in their Dispose overrides.
</p>
<h4> <span class="mw-headline" id="Better_exception_handling"> Better exception handling </span></h4>
<p>Exceptions thrown during native to managed callbacks like signal handlers and callback parameters previously caused stack corruption and were nearly impossible to debug.  Trunk contains a new GLib.ExceptionManager.UnhandledException event that applications can connect to be notified of any exceptions thrown in these scenarios.  The exceptions can not be thrown across the native to managed boundary so this is a mechanism to "catch" those exceptions and deal with them gracefully.
</p><p>The following code snippet would display an error dialog and terminate the application:
</p>
<pre class="csharp" style="font-family:monospace;">  <span style="color: #008000;">...</span>
  <span style="color: #0000FF;">UnhandledExceptionHandler</span> h <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> UnhandledExceptionHandler <span style="color: #008000;">&#40;</span>OnException<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
  ExceptionManager<span style="color: #008000;">.</span><span style="color: #0000FF;">UnhandledException</span> <span style="color: #008000;">+=</span> h<span style="color: #008000;">;</span>
  Gtk<span style="color: #008000;">.</span><span style="color: #0000FF;">Application</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Run</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
  <span style="color: #008000;">...</span>
  <span style="color: #6666cc; font-weight: bold;">void</span> OnException <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">object</span> o, UnhandledExceptionArgs args<span style="color: #008000;">&#41;</span>
  <span style="color: #008000;">&#123;</span>
    ShowErrorDialog <span style="color: #008000;">&#40;</span>args<span style="color: #008000;">.</span><span style="color: #0000FF;">ExceptionObject</span>, args<span style="color: #008000;">.</span><span style="color: #0000FF;">IsTerminating</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    args<span style="color: #008000;">.</span><span style="color: #0000FF;">ExitApplication</span> <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">;</span>
  <span style="color: #008000;">&#125;</span></pre>
<h4> <span class="mw-headline" id="Structure_marshaling"> Structure marshaling </span></h4>
<p>Structures passed to callback marshaling delegates in many cases can be NULL pointers.  We previously marshaled these parameters as "ref Foo" types, which caused crashes in the runtime marshaling code.  The generator has been enhanced to treat these parameters as IntPtr to allow for NULL checking prior to marshaling.
</p>
<h4> <span class="mw-headline" id="GInterface_Registration"> GInterface Registration </span></h4>
<p>Registration of GInterface implementations is now supported.  Details on how to implement an interface with a tutorial can be found at <a href="{{site.baseurl}}/ImplementingGInterfaces" title="ImplementingGInterfaces">ImplementingGInterfaces</a>
</p>
<h4> <span class="mw-headline" id="GObject_property_registration"> GObject property registration </span></h4>
<p>Properties with a [GLib.Property ("prop_name")] attribute will now be registered with the GObject type system. This feature is especially useful when creating custom cell renderers. (since 2.12.2)
</p>
<h2> <span class="mw-headline" id="Gtk.23_2.6_additions"> Gtk# 2.6 additions </span></h2>
<p>We are also simultaneously releasing bindings for Gtk+ 2.6 and Gnome 2.10 in source form only.  Gtk# 2.6.x is backward compatible with the 2.4.x releases via the new Publisher Policy mechanism.  Once you upgrade your application to 2.4.x, you won't have to change anything again during the 2.x series, unless you want to use the new goodies in 2.6/2.8/etc...
</p><p>The Gtk# 2.6.x releases expose the following new API elements and more.
</p>
<h3> <span class="mw-headline" id="AboutDialog"> AboutDialog </span></h3>
<p><a href="{{site.baseurl}}/images/old_site/b/b6/GtkSharpAbout.png" class="image"><img alt="GtkSharpAbout.png" src="{{site.baseurl}}/images/old_site/b/b6/GtkSharpAbout.png" width="124" height="188" /></a>
</p><p>The Gnome About dialog has been cleaned up and integrated directly into Gtk.
</p>
<h3> <span class="mw-headline" id="New_Cell_renderer_types"> New Cell renderer types </span></h3>
<p>Gtk# 1.0.x came with Cell Renderers for [http:/monodoc/T:Gtk.CellRendererText text], [http:/monodoc/T:Gtk.CellRendererPixbuf images], and [http:/monodoc/T:Gtk.CellRendererToggle checkboxes].
</p><p>Starting in 2.6, we have the popular new [http:/monodoc/T:Gtk.CellRendererProgress Gtk.CellRendererProgress] and [http:/monodoc/T:Gtk.CellRendererCombo Gtk.CellRendererCombo] renderers.  Use them to expose ProgressBar cells and dropdown ComboBox cells in your TreeViews and NodeViews.
</p>
<h3> <span class="mw-headline" id="IconView"> IconView </span></h3>
<p>A new icon list widget which utilizes the existing List/Tree model.
</p><p>See the API here: [http:/monodoc/T:Gtk.IconView Gtk.IconView].
</p><p><a href="{{site.baseurl}}/images/old_site/1/12/GtkSharpIconView.png" class="image"><img alt="GtkSharpIconView.png" src="{{site.baseurl}}/images/old_site/1/12/GtkSharpIconView.png" width="623" height="420" /></a>
</p>
<h2> <span class="mw-headline" id="New_Binding_Features"> New Binding Features </span></h2>
<p>The following features provide more complete bindings for Application Developers using the Gtk and GNOME libraries bound by Gtk# as well as providing more powerful binding capabilities for external Binding Authors.
</p>
<h3> <span class="mw-headline" id="Public_Field_generation_for_Objects_and_Opaques"> Public Field generation for Objects and Opaques </span></h3>
<p>Any fields marked /*&lt; public &gt;*/ in the sources are now automatically exposed if you provide the glue-related parameters to your generation command.  This feature is only available if you build glue with your binding.
</p>
<h3> <span class="mw-headline" id="Enhanced_Ref_handling_and_Memory_Management"> Enhanced Ref handling and Memory Management </span></h3>
<p>The ref management for GLib.Objects has improved significantly, especially for managed subclasses.  Opaque types which expose ref, unref, free, and destroy methods are now automatically ref managed as well.
</p>
<h3> <span class="mw-headline" id="Callback_Lifecycle_management"> Callback Lifecycle management </span></h3>
<p>Callback delegates passed to methods are now assumed to persist only for the duration of the method call unless a destroy notification is implied by the method signature. Destroy notified delegates are detected automatically from the method signature and persist until notified.  Any delegates which must persist beyond the method invocation but are not destroy notified must now be manually managed by the binding author and released when appropriate to avoid potential crashes.  They are no longer ref managed and leaked as they were in 1.0.x.
</p>
<h3> <span class="mw-headline" id="String_marshaling_overhaul"> String marshaling overhaul </span></h3>
<p>Strings are now manually marshaled so that win32 encodings are performed correctly.  Both UTF8 and filename encoded strings are supported.  In 1.0.x, we used the automatic string marshaling of PInvoke which resulted in non-UTF8 encoded strings being passed to the Gtk+ libraries on the MS runtime on win32. The mono runtime defaults to UTF8, but the MS runtime does not. We now use System.Text.Encoding to manually marshal the strings to UTF8 and marshal them as IntPtrs to the native side to ensure proper encoding.
</p>
<h3> <span class="mw-headline" id="CDecl_Calling_Convention_for_Delegates"> CDecl Calling Convention for Delegates </span></h3>
<p>A huge bug has been squashed in supporting the CDecl calling convention for native to managed callback delegates.
</p>
<h3> <span class="mw-headline" id="Automatic_null_handling_for_Objects.2C_Opaques.2C_and_Interfaces"> Automatic null handling for Objects, Opaques, and Interfaces </span></h3>
<p>Gone are the days of adding null_ok attributes to parameters that can accept NULL.  The generator now automatically marshals null to NULL for the ref types.
</p>
<h3> <span class="mw-headline" id="Container_Child_Property_generation"> Container Child Property generation </span></h3>
<p>Types declaring container child properties now generate API elements to access them.
</p>
<h3> <span class="mw-headline" id="64_bit_marshaling_support"> 64 bit marshaling support </span></h3>
<p>Support for marshaling of long, ulong, size_t, etc... properly for ILP32 and LP64 platforms alike.
</p>
<h3> <span class="mw-headline" id="List_to_Array_marshaling"> List to Array marshaling </span></h3>
<p>We've improved support for automatic marshaling via metadata tags for GList and GSList return values to typed arrays.  No more need to customize all those methods.
</p>
<h3> <span class="mw-headline" id="Anonymous_delegate_parameter_parsing_and_generation"> Anonymous delegate parameter parsing and generation </span></h3>
<p>For those methods which declare callback delegates inline, we now generate delegate types and the methods which expose them.
</p>
<h2> <span class="mw-headline" id="Gtk.2B_2.4_API_Additions"> Gtk+ 2.4 API Additions </span></h2>
<p>Several powerful widgets and objects were added in version 2.4 that are bound by Gtk# version 2.4.x.  The following are some of the highlights.
</p>
<h3> <span class="mw-headline" id="Actions_and_UIManager"> Actions and UIManager </span></h3>
<p>Actions are a way of associating a behavior to both menu items and toolbar buttons in your User Interface.  The UIManager uses an XML-based UI description format to create menu items and toolbars and associate them with actions.
</p>
<pre class="xml" style="font-family:monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;toolbar</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;toolbar&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;toolitem</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;cut&quot;</span> <span style="color: #000066;">action</span>=<span style="color: #ff0000;">&quot;cut&quot;</span> <span style="color: #000000; font-weight: bold;">/&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;toolitem</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;copy&quot;</span> <span style="color: #000066;">action</span>=<span style="color: #ff0000;">&quot;copy&quot;</span> <span style="color: #000000; font-weight: bold;">/&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;toolitem</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;paste&quot;</span> <span style="color: #000066;">action</span>=<span style="color: #ff0000;">&quot;paste&quot;</span> <span style="color: #000000; font-weight: bold;">/&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/toolbar<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre>
<p><br />
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">static</span> ActionEntry<span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> entries <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> ActionEntry<span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> <span style="color: #008000;">&#123;</span>
    <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> ActionEntry <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;cut&quot;</span>, Stock<span style="color: #008000;">.</span><span style="color: #0000FF;">Cut</span>, <span style="color: #666666;">&quot;C_ut&quot;</span>, <span style="color: #666666;">&quot;&lt;control&gt;X&quot;</span>,
                     <span style="color: #666666;">&quot;Cut the selected text to the clipboard&quot;</span>,
                     <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> EventHandler <span style="color: #008000;">&#40;</span>OnActivate<span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span>,
    <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> ActionEntry <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;copy&quot;</span>, Stock<span style="color: #008000;">.</span><span style="color: #0000FF;">Copy</span>, <span style="color: #666666;">&quot;_Copy&quot;</span>, <span style="color: #666666;">&quot;&lt;control&gt;C&quot;</span>,
                     <span style="color: #666666;">&quot;Copy the selected text to the clipboard&quot;</span>,
                     <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> EventHandler <span style="color: #008000;">&#40;</span>OnActivate<span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span>,
    <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> ActionEntry <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;paste&quot;</span>, Stock<span style="color: #008000;">.</span><span style="color: #0000FF;">Paste</span>, <span style="color: #666666;">&quot;_Paste&quot;</span>, <span style="color: #666666;">&quot;&lt;control&gt;V&quot;</span>,
                     <span style="color: #666666;">&quot;Paste the text from the clipboard&quot;</span>,
                     <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> EventHandler <span style="color: #008000;">&#40;</span>OnActivate<span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#125;</span><span style="color: #008000;">;</span>
&#160;
<span style="color: #008000;">...</span>
&#160;
<span style="color: #0600FF; font-weight: bold;">group</span> <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> ActionGroup <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;TestActions&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #0600FF; font-weight: bold;">group</span><span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">Add</span> <span style="color: #008000;">&#40;</span>entries<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
uim <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> UIManager <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
uim<span style="color: #008000;">.</span><span style="color: #0000FF;">InsertActionGroup</span> <span style="color: #008000;">&#40;</span><span style="color: #0600FF; font-weight: bold;">group</span>, <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>  
uim<span style="color: #008000;">.</span><span style="color: #0000FF;">AddUiFromString</span> <span style="color: #008000;">&#40;</span>ui_info<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&#160;
<span style="color: #008000;">...</span></pre>
<p>A complete sample application utilizing Actions and the UI manager can be found in the sample/Action.cs file shipped with the Gtk# source or viewed <a href="http://anonsvn.mono-project.com/viewcvs/trunk/gtk-sharp/sample/Actions.cs?view=markup" class="external text" rel="nofollow">on the web</a>.
</p>
<h3> <span class="mw-headline" id="ComboBox"> ComboBox </span></h3>
<p><a href="{{site.baseurl}}/images/old_site/0/04/GtkSharpCombo.png" class="image"><img alt="GtkSharpCombo.png" src="{{site.baseurl}}/images/old_site/0/04/GtkSharpCombo.png" width="213" height="129" /></a>
</p><p>The old Gtk Combo widget was long a sore point for developers.  The new ComboBox widgets utilize the power of the Tree/List Model API and provide a nice clean look.
</p><p>See the API here: [http:/monodoc/T:Gtk.ComboBox Gtk.ComboBox].
</p>
<h3> <span class="mw-headline" id="FileChooser"> FileChooser </span></h3>
<p><a href="{{site.baseurl}}/images/old_site/8/8a/GtkSharpFileChooser.png" class="image"><img alt="GtkSharpFileChooser.png" src="{{site.baseurl}}/images/old_site/8/8a/GtkSharpFileChooser.png" width="367" height="252" /></a>
</p><p>The new FileChooser interface is implemented by FileChooserDialog to provide an attractive and powerful way for your application to interface with the file system.
</p><p>See the API here: [http:/monodoc/T:Gtk.FileChooser Gtk.FileChooser].
</p>
<h3> <span class="mw-headline" id="Toolbar"> Toolbar </span></h3>
<p><a href="{{site.baseurl}}/images/old_site/b/b5/GtkSharpToolbar.png" class="image"><img alt="GtkSharpToolbar.png" src="{{site.baseurl}}/images/old_site/b/b5/GtkSharpToolbar.png" width="175" height="60" /></a>
</p><p>The new Toolbar widget comes complete with all the typical buttons and separators and provides a more attractive API to expose Toolbar User Interface elements either programatically or via the UIManager API.
</p><p>See the API here: [http:/monodoc/T:Gtk.Toolbar Gtk.Toolbar].
</p>
<h2> <span class="mw-headline" id="Newly_bound_libraries"> Newly bound libraries </span></h2>
<h4> <span class="mw-headline" id="Gnome.Vfs"> Gnome.Vfs </span></h4>
<p>Use the Gnome.Vfs namespace in the new gnome-vfs-sharp.dll assembly for virtual file system operations.
</p><p>See the API here: <a href="http://monodoc/N:Gnome.Vfs" class="external text" rel="nofollow">Gnome.Vfs</a>.
</p>
<h4> <span class="mw-headline" id="Gnome.PanelApplet"> Gnome.PanelApplet </span></h4>
<p>Use the PanelApplet object now exposed by gnome-sharp.dll to implement new Panel applets.
</p><p>See the API here: [http:/monodoc/T:Gnome.PanelApplet Gnome.PanelApplet].
</p><p>A full sample can be seen <a href="http://anonsvn.mono-project.com/viewvc/trunk/gnome-sharp/sample/panelapplet/" class="external text" rel="nofollow">here</a>.
</p>
<h2> <span class="mw-headline" id="New_Extensions_to_the_Bindings"> New Extensions to the Bindings </span></h2>
<h3> <span class="mw-headline" id="NodeView_and_NodeSelection"> NodeView and NodeSelection </span></h3>
<p>The NodeStore is now interactive with new selection and view objects.  Use NodeStore, NodeSelection, and NodeView to simplify the TreeView API with a nice attribute driven C# friendly syntax.
</p><p><a href="{{site.baseurl}}/images/old_site/0/04/GtkSharpNodeViewSimple.png" class="image"><img alt="GtkSharpNodeViewSimple.png" src="{{site.baseurl}}/images/old_site/0/04/GtkSharpNodeViewSimple.png" width="210" height="179" /></a>
</p><p>There is a [http:/GtkSharpNodeViewTutorial tutorial article] available showing how to use the NodeView convenience APIs to implement tree and list views like the one above in your application.
</p>
<h3> <span class="mw-headline" id="Gtk.Dotnet"> Gtk.Dotnet </span></h3>
<p>Use the new gtk-dotnet.dll assembly to open up the power of System.Drawing to your new application, or to port your existing custom controls to Gtk.
</p><p>See the API here: [http:/monodoc/T:Gtk.DotNet.Graphics Gtk.DotNet.Graphics].
</p><p>You can find a sample with various patterns in the Gtk# distribution in the samples directory as "DrawingSample.cs"
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">using</span> <span style="color: #008080;">System.Drawing</span><span style="color: #008000;">;</span>
<span style="color: #0600FF; font-weight: bold;">using</span> <span style="color: #008080;">Gtk</span><span style="color: #008000;">;</span>
&#160;
<span style="color: #008080; font-style: italic;">//</span>
<span style="color: #008080; font-style: italic;">// This is a widget that displays a pretty graphic using System.Drawing</span>
<span style="color: #008080; font-style: italic;">// from Gtk#</span>
<span style="color: #008080; font-style: italic;">//</span>
<span style="color: #6666cc; font-weight: bold;">class</span> PrettyGraphic <span style="color: #008000;">:</span> DrawingArea <span style="color: #008000;">&#123;</span>
&#160;
        <span style="color: #0600FF; font-weight: bold;">public</span> PrettyGraphic <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
        <span style="color: #008000;">&#123;</span>
                SetSizeRequest <span style="color: #008000;">&#40;</span><span style="color: #FF0000;">200</span>, <span style="color: #FF0000;">200</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #008000;">&#125;</span>
&#160;
        <span style="color: #0600FF; font-weight: bold;">protected</span> <span style="color: #0600FF; font-weight: bold;">override</span> <span style="color: #6666cc; font-weight: bold;">bool</span> OnExposeEvent <span style="color: #008000;">&#40;</span>Gdk<span style="color: #008000;">.</span><span style="color: #0000FF;">EventExpose</span> args<span style="color: #008000;">&#41;</span>
        <span style="color: #008000;">&#123;</span>
                <span style="color: #0600FF; font-weight: bold;">using</span> <span style="color: #008000;">&#40;</span>Graphics g <span style="color: #008000;">=</span> Gtk<span style="color: #008000;">.</span><span style="color: #0000FF;">DotNet</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Graphics</span><span style="color: #008000;">.</span><span style="color: #0000FF;">FromDrawable</span> <span style="color: #008000;">&#40;</span>args<span style="color: #008000;">.</span><span style="color: #0000FF;">Window</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#123;</span>
                        Pen p <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> Pen <span style="color: #008000;">&#40;</span>Color<span style="color: #008000;">.</span><span style="color: #0000FF;">Blue</span>, 1<span style="color: #008000;">.</span>0f<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&#160;
                        <span style="color: #0600FF; font-weight: bold;">for</span> <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> i <span style="color: #008000;">=</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">;</span> i <span style="color: #008000;">&lt;</span> <span style="color: #FF0000;">600</span><span style="color: #008000;">;</span> i <span style="color: #008000;">+=</span> <span style="color: #FF0000;">60</span><span style="color: #008000;">&#41;</span>
                                <span style="color: #0600FF; font-weight: bold;">for</span> <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> j <span style="color: #008000;">=</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">;</span> j <span style="color: #008000;">&lt;</span> <span style="color: #FF0000;">600</span><span style="color: #008000;">;</span> j <span style="color: #008000;">+=</span> <span style="color: #FF0000;">60</span><span style="color: #008000;">&#41;</span>
                                        g<span style="color: #008000;">.</span><span style="color: #0000FF;">DrawLine</span> <span style="color: #008000;">&#40;</span>p, i, <span style="color: #FF0000;">0</span>, <span style="color: #FF0000;">0</span>, j<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
                <span style="color: #008000;">&#125;</span>
                <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">;</span>
        <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<h3> <span class="mw-headline" id="Key_Binding_Support"> Key Binding Support </span></h3>
<p>With version 2.4.x, it is now possible to create KeyBindings for your Widget subclasses by simply adding attributes to the class declaration.
</p>
<pre class="csharp" style="font-family:monospace;">        <span style="color: #008000;">&#91;</span>Binding <span style="color: #008000;">&#40;</span>Gdk<span style="color: #008000;">.</span><span style="color: #0000FF;">Key</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Escape</span>, <span style="color: #666666;">&quot;HandleBinding&quot;</span>, <span style="color: #666666;">&quot;Escape&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span>
        <span style="color: #008000;">&#91;</span>Binding <span style="color: #008000;">&#40;</span>Gdk<span style="color: #008000;">.</span><span style="color: #0000FF;">Key</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Left</span>, <span style="color: #666666;">&quot;HandleBinding&quot;</span>, <span style="color: #666666;">&quot;Left&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span>
        <span style="color: #008000;">&#91;</span>Binding <span style="color: #008000;">&#40;</span>Gdk<span style="color: #008000;">.</span><span style="color: #0000FF;">Key</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Right</span>, <span style="color: #666666;">&quot;HandleBinding&quot;</span>, <span style="color: #666666;">&quot;Right&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span>
        <span style="color: #008000;">&#91;</span>Binding <span style="color: #008000;">&#40;</span>Gdk<span style="color: #008000;">.</span><span style="color: #0000FF;">Key</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Up</span>, <span style="color: #666666;">&quot;HandleBinding&quot;</span>, <span style="color: #666666;">&quot;Up&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span>
        <span style="color: #008000;">&#91;</span>Binding <span style="color: #008000;">&#40;</span>Gdk<span style="color: #008000;">.</span><span style="color: #0000FF;">Key</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Down</span>, <span style="color: #666666;">&quot;HandleBinding&quot;</span>, <span style="color: #666666;">&quot;Down&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> MyButton <span style="color: #008000;">:</span> Gtk<span style="color: #008000;">.</span><span style="color: #0000FF;">Button</span> <span style="color: #008000;">&#123;</span>
&#160;
                <span style="color: #0600FF; font-weight: bold;">public</span> MyButton <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">:</span> <span style="color: #0600FF; font-weight: bold;">base</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;I'm a subclassed button&quot;</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span><span style="color: #008000;">&#125;</span>
&#160;
                <span style="color: #0600FF; font-weight: bold;">protected</span> <span style="color: #0600FF; font-weight: bold;">override</span> <span style="color: #6666cc; font-weight: bold;">void</span> OnClicked <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
                <span style="color: #008000;">&#123;</span>
                        Console<span style="color: #008000;">.</span><span style="color: #0000FF;">WriteLine</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;Button::Clicked default handler fired.&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
                <span style="color: #008000;">&#125;</span>
&#160;
                <span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #6666cc; font-weight: bold;">void</span> HandleBinding <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> text<span style="color: #008000;">&#41;</span>
                <span style="color: #008000;">&#123;</span>
                        Console<span style="color: #008000;">.</span><span style="color: #0000FF;">WriteLine</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;Got a bound keypress: &quot;</span> <span style="color: #008000;">+</span> text<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
                <span style="color: #008000;">&#125;</span>
        <span style="color: #008000;">&#125;</span></pre>
<h3> <span class="mw-headline" id="Application.Invoke"> Application.Invoke </span></h3>
<p>It is now simpler to use threads with Gtk# applications using Gtk.Application.Invoke.   This new API call can be used with anonymous methods to simplify writing code that must be executed on the Gtk# main loop, for example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> CountingThread <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">for</span> <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> i <span style="color: #008000;">=</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">;</span> i <span style="color: #008000;">&lt;</span> <span style="color: #FF0000;">100</span><span style="color: #008000;">;</span> i<span style="color: #008000;">++</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#123;</span>
          <span style="color: #6666cc; font-weight: bold;">int</span> j <span style="color: #008000;">=</span> i<span style="color: #008000;">;</span>
          SlowComputation <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
          Gtk<span style="color: #008000;">.</span><span style="color: #0000FF;">Application</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Invoke</span> <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">delegate</span> <span style="color: #008000;">&#123;</span>
             status_label<span style="color: #008000;">.</span><span style="color: #0000FF;">Text</span> <span style="color: #008000;">=</span> <span style="color: #6666cc; font-weight: bold;">String</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Format</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;Iteration {0}&quot;</span>, j<span style="color: #008000;">&#41;</span>
          <span style="color: #008000;">&#125;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>

