---
layout: obsolete
title: "Test Suite"
permalink: /old_site/Test_Suite/
redirect_from:
  - /Test_Suite/
  - /Testing/
---

<h1>Test Suite</h1>

<p><br />
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Testing"><span class="tocnumber">1</span> <span class="toctext">Testing</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Class_Library_tests"><span class="tocnumber">2</span> <span class="toctext">Class Library tests</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Running_Class_Library_Tests"><span class="tocnumber">2.1</span> <span class="toctext">Running Class Library Tests</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Other_Class_Library_Tests"><span class="tocnumber">2.2</span> <span class="toctext">Other Class Library Tests</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#Tips_on_writing_Unit_tests"><span class="tocnumber">3</span> <span class="toctext">Tips on writing Unit tests</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Provide_an_unique_error_message_for_Assert.28.29"><span class="tocnumber">3.1</span> <span class="toctext">Provide an unique error message for Assert()</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Use_Assert.AreEqual.28.29_to_compare_things.2C_not_Assert.IsTrue_.28.29"><span class="tocnumber">3.2</span> <span class="toctext">Use Assert.AreEqual() to compare things, not Assert.IsTrue ()</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Test_your_test_with_the_Microsoft_runtime"><span class="tocnumber">3.3</span> <span class="toctext">Test your test with the Microsoft runtime</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Unit_tests"><span class="tocnumber">3.4</span> <span class="toctext">Unit tests</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Getting_Started"><span class="tocnumber">3.5</span> <span class="toctext">Getting Started</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#Compiler_tests"><span class="tocnumber">4</span> <span class="toctext">Compiler tests</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="#Runtime_tests"><span class="tocnumber">5</span> <span class="toctext">Runtime tests</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#Web_Services_tests"><span class="tocnumber">6</span> <span class="toctext">Web Services tests</span></a></li>
</ul>
</td></tr></table>
<h2> <span class="mw-headline" id="Testing"> Testing </span></h2>
<p>Testing is an important part of the Mono project: every one of its three major components has a test suite tailored for its needs. This is very helpful, because in the course of developing the software it is very common to introduce bugs in existing code. A test suite helps us fix the bugs as soon as they are introduced.
</p><p>There are various kinds of tests in Mono: 
</p>
<ul><li> <b>Class Library Unit Tests:</b> These are used to test the class libraries.
</li></ul>
<ul><li> <b>Compiler tests</b>: Both tests that should pass and tests that should fail are included. 
</li></ul>
<ul><li> <b>Runtime tests</b>: Tests for the virtual machine.
</li></ul>
<ul><li> <b>Web Services tests</b>: Web Services client/server tests.
</li></ul>
<p>The latest test results are available at <a href="https://wrench.mono-project.com/Wrench/" class="external free" rel="nofollow">https://wrench.mono-project.com/Wrench/</a> for all major platform run continuously after every commit.
</p>
<h2> <span class="mw-headline" id="Class_Library_tests"> Class Library tests </span></h2>
<p>All classes in Mono libraries should have comprehensive unit test suites to go with them. Unit testing is a software engineering methodology that makes it easier to build correct code. Every method in every class should have a set of tests to verify that they work correctly. Mono also needs a testing framework to make it easy to write and run lots of tests. 
</p><p>In some classes, we might also provide standalone tests because of some reasons such as too huge testcases, another downloading and so on. (For example, managed XSLT has a standalone test which downloads and expands several megabytes of the OASIS test suite.)
</p>
<h3> <span class="mw-headline" id="Running_Class_Library_Tests"> Running Class Library Tests </span></h3>
<p>To run the class library tests for a particular class library, go into the directory for the class library, and run make with `run-test' argument.   For example, to run the mscorlib tests do this:
</p>
<pre class="bash" style="font-family:monospace;">$ <span style="color: #7a0874; font-weight: bold;">cd</span> mcs<span style="color: #000000; font-weight: bold;">/</span>class<span style="color: #000000; font-weight: bold;">/</span>corlib
$ <span style="color: #c20cb9; font-weight: bold;">make</span> run-test <span style="color: #000000; font-weight: bold;">&amp;&amp;</span> <span style="color: #c20cb9; font-weight: bold;">make</span> run-test <span style="color: #007800;">PROFILE</span>=net_2_0</pre>
<p>This will run the mscorlib tests for the default profile and then 2.0, if you only want to run the 2.0 tests, run:
</p>
<pre class="bash" style="font-family:monospace;">$ <span style="color: #7a0874; font-weight: bold;">cd</span> mcs<span style="color: #000000; font-weight: bold;">/</span>class<span style="color: #000000; font-weight: bold;">/</span>corlib
$ <span style="color: #c20cb9; font-weight: bold;">make</span> run-test <span style="color: #007800;">PROFILE</span>=net_2_0</pre>
<p>The PROFILE variable controls which profile will be used to run the tests, if you do not specify it, it will be limited to 4.5.
</p><p>If you want to run a single fixture, you can use the convenience parameter FIXTURE which assumes that your test is in the MonoTests namespace, like this:
</p>
<pre class="bash" style="font-family:monospace;">$ <span style="color: #7a0874; font-weight: bold;">cd</span> mcs<span style="color: #000000; font-weight: bold;">/</span>class<span style="color: #000000; font-weight: bold;">/</span>corlib
$ <span style="color: #c20cb9; font-weight: bold;">make</span> run-test <span style="color: #007800;">FIXTURE</span>=System.DecimalTest</pre>
<p>That will run the fixture for MonoTests.System.DecimalTest
</p><p>You can pass arbitrary command line options to nunit-console, like this:
</p>
<pre class="bash" style="font-family:monospace;">$ <span style="color: #7a0874; font-weight: bold;">cd</span> mcs<span style="color: #000000; font-weight: bold;">/</span>class<span style="color: #000000; font-weight: bold;">/</span>corlib
$ <span style="color: #c20cb9; font-weight: bold;">make</span> run-test <span style="color: #007800;">TEST_HARNESS_FLAGS</span>=-fixture=MonoTests.System.DateTimeTest</pre>
<p>If you think you're getting failures related to l10n/i18n of your system, run them with the default language setting:
</p>
<pre class="bash" style="font-family:monospace;">$ <span style="color: #7a0874; font-weight: bold;">cd</span> mcs<span style="color: #000000; font-weight: bold;">/</span>class<span style="color: #000000; font-weight: bold;">/</span>corlib
$ <span style="color: #007800;">LANG</span>=en <span style="color: #c20cb9; font-weight: bold;">make</span> run-test <span style="color: #000000; font-weight: bold;">&amp;&amp;</span> <span style="color: #c20cb9; font-weight: bold;">make</span> run-test</pre>
<h3> <span class="mw-headline" id="Other_Class_Library_Tests"> Other Class Library Tests </span></h3>
<p>In addition to unit tests, some class libraries have standalone tests that can be used to exercise specific features.
</p><p>Here I list them up as long as I know. If you are going to add another standalone tests, please add one line here. It is also recommended that you add some notes on how to build and run tests.
</p>
<ul><li> Mono.Data/test/ 
</li></ul>
<ul><li> System.Data/Test, and some individual ADO.NET libraries:
</li></ul>
<p>there are some standalone tests. See the bottom of <a href="{{site.baseurl}}/old_site/ADO.NET" title="ADO.NET"> ADO.NET page</a> for detail.
</p>
<ul><li> System.Web/Test/TestMonoWeb&#160;: see README 
</li></ul>
<ul><li> System.Web.Services/Test/standalone&#160;: see README 
</li></ul>
<ul><li> System.Windows.Forms/SWFTest/ 
</li></ul>
<ul><li> System.XML/Test/System.Xml/standalone_tests&#160;: see README 
</li></ul>
<ul><li> System.XML/Test/System.Xml.Schema/standalone_tests&#160;: see README 
</li></ul>
<ul><li> System.XML/System.Xml.Serialization/standalone_tests/ 
</li></ul>
<ul><li> System.XML/Test/System.Xml.Xsl/standalone_tests&#160;: see README 
</li></ul>
<ul><li> Commons.Xml.Relaxng/Test/standalone_tests&#160;: see README
</li></ul>
<p><b>Getting started</b>
</p><p>If you are new to writing NUnit tests, there is a template you may use to help get started. The file is:
</p><p><a href="{{site.baseurl}}/old_site/TemplateTest.cs" title="TemplateTest.cs"><b>mcs/class/doc/TemplateTest.cs</b></a>
</p><p>Save a copy of this file in the appropriate test subdirecty (see below), and replace all the {text} markers with appropriate code. Comments in the template are there to guide you. You should also look at existing tests to see how other people have written them. <a href="https://github.com/mono/mono/blob/master/mcs/class/corlib/Test/System/StringTest.cs" class="external text" rel="nofollow">StringTest.cs</a> is a good example that might help you get started.
</p><p>The directory that will contain your new file depends on the assembly/namespace of the class for which you are creating the tests. Under mcs/class there is a directory for each assembly. In each assembly there is a Test directory, e.g. mcs/class/corlib/Test. In the Test directory there are sub-directories for each namespace in the assembly, e.g. mcs/class/corlib/Test/Sytem. Put your new test file in the appropriate sub-directory under Test for the class you are testing.
</p><p>Once all of that is done, you can do a 'make test' from the top mcs directory. Your test class needs also to be listed in the .sources file at the top of the Test directory.
</p>
<h2> <span class="mw-headline" id="Tips_on_writing_Unit_tests"> Tips on writing Unit tests </span></h2>
<p>You should look at the <a href="http://nunit.org" class="external text" rel="nofollow">NUnit documentation</a>, as it is a fantastic product, and includes fantastic documentation, but here are some tips for those of you who are already reading this web page.
</p>
<h3> <span class="mw-headline" id="Provide_an_unique_error_message_for_Assert.28.29"> Provide an unique error message for Assert() </span></h3>
<p>Include an unique message for each Assert() so that when the assert fails, it is trivial to locate it in the source. Otherwise, it may be difficult to determine which part of the test is failing. A good way to ensure unique messages is to use something like #A01, #A02 etc.
</p><p>Ok:
</p>
<pre> Assert.AreEqual(compare[0], i1[0], "array match");
 Assert.AreEqual(compare[1], i1[1], "array match");
 Assert.AreEqual(compare[2], i1[2], "array match");
 Assert.AreEqual(compare[3], i1[3], "array match");
</pre>
<p>Excellent:
</p>
<pre> Assert.AreEqual(compare[0], i1[0], "#A01");
 Assert.AreEqual(compare[1], i1[1], "#A02");
 Assert.AreEqual(compare[2], i1[2], "#A03");
 Assert.AreEqual(compare[3], i1[3], "#A04");
</pre>
<p>Once you used such a number in an Assert(), don't change it later on - people might use it it identify the test in bug reports or in mailing lists.
</p>
<h3> <span class="mw-headline" id="Use_Assert.AreEqual.28.29_to_compare_things.2C_not_Assert.IsTrue_.28.29"> Use Assert.AreEqual() to compare things, not Assert.IsTrue () </span></h3>
<p>Do not compare two values with Assert.IsTrue() - if the test fails, people have no idea what went wrong while Assert.AreEqual() reports the failed value.
</p><p>Ok:
</p>
<pre> Assert.IsTrue (myTicks[0] == t1.Ticks, "A01");
</pre>
<p>Excellent:
</p>
<pre>Assert.AreEqual (myTicks[0], t1.Ticks, "A01"); 
</pre>
<h3> <span class="mw-headline" id="Test_your_test_with_the_Microsoft_runtime"> Test your test with the Microsoft runtime </span></h3>
<p>If possible, try to run your testsuite with the Microsoft runtime on .NET on Windows and make sure all tests in it pass. This is especially important if you're writing a totally new testcase - without this check you can never be sure that your testcase contains no bugs ....
</p><p>Don't worry if you're writing your test on Linux, other people can test it for you on Windows.
</p><p>Sometimes you may discover that a test doesn't show the expected result when run with the Microsoft runtime - either because there is a bug in their runtime or something is misleading or wrong in their documentation. In this case, please put a detailed description of the problem to mcs/class/doc/API-notes and do also report it to the <a href="{{site.baseurl}}/old_site/Mailing_Lists" title="Mailing Lists">mailing list</a> - we'll forward this to the Microsoft people from time to time to help them fix their documentation and runtime.
</p>
<h3> <span class="mw-headline" id="Unit_tests"> Unit tests </span></h3>
<p>Why do unit testing? It becomes simple to run automated tests for the whole library. Unit tests are a safety net - you can change part of the code and verify that you haven't broken anything. Ideally, tests are written before the actual library code itself. And every time a bug is discovered, a test should be written to demonstrate the bug and its fix. Then, if you ever reintroduce the bug, you will know immediately. For more info, read <a href="http://junit.sourceforge.net/doc/testinfected/testing.htm" class="external text" rel="nofollow">JUnit Test Infected: Programmers Love Writing Tests</a>.
</p>
<h3> <span class="mw-headline" id="Getting_Started"> Getting Started </span></h3>
<p>We welcome all contributions to the Class Libary Test Suite.
</p><p>There is information to help you get started in SVN at mcs/class/doc/NUnitGuidelines. Once you have written your test, please post it to <a href="{{site.baseurl}}/old_site/Mailing_Lists" title="Mailing Lists">mono-list</a>.
</p><p>Someone will make sure to add the file or apply the patch as appropriate. If you plan to be an on-going contributor and would like to get a svn account, email <a href="mailto:miguel@ximian.com" class="external text" rel="nofollow">miguel</a>.
</p><p>Normally, after you send a couple of well-written new files and/or patches to the list, you will be given Git access.
</p>
<h2> <span class="mw-headline" id="Compiler_tests"> Compiler tests </span></h2>
<p>Mono ships with three compilers: C#, VB.NET and JScript. The tests are executed by running the makefile target `make run-test-local' in the appropriate directory.
</p><p>The C# compilation tests live in mcs/tests, and the C# error tests live in mcs/errors.
</p><p>The VB.NET compilation tests live in mcs/btests. 
</p>
<h2> <span class="mw-headline" id="Runtime_tests"> Runtime tests </span></h2>
<p>These tests verify the virtual machine, to run these tests, do:
</p>
<pre>
cd mono/mono
make check
</pre>
<h2> <span class="mw-headline" id="Web_Services_tests"> Web Services tests </span></h2>
<p>The Test directory for the System.Web.Services assembly contains a standalone test suite for testing web services. It tests:
</p>
<ul><li> Proxy generation using the wsdl tool
</li><li> Access to web services using the generated client proxies
</li><li> Execution of web services in the server
</li></ul>
<p>This suite not only tests web services running on XSP, but it can also test services running on other platforms and that are available in internet. This will help track down interoperability issues.
To build the test suite, just run:
</p>
<pre>
cd mcs/class/System.Web.Services/Test/standalone xsp --root server
</pre>
<p>And from another terminal:
</p>
<pre>
cd mcs/class/System.Web.Services/Test/standalone make nunit-console testclient.dll
</pre>
<p><br />
This will download the wsdl documents, generate the proxies, build a dll with the proxies, and build the nunit tests. Then you can use nunit-console or gnunit to run the tests (the nunit dll is testclient.dll).
</p><p>Read the README file in mcs/class/System.Web.Services/Test/standalone for more info.
</p>
