---
layout: obsolete
title: "Howto aspnet Callbacks"
permalink: /old_site/Howto_aspnet_Callbacks/
---

<h1>Howto aspnet Callbacks</h1>

<p>This sample shows how to implement some asp.net callbacks methods and you to get data without to generate a visible postback.
</p><p>You will need mono runtime, csharp compilers and the minimalistic web server xsp version 2.
</p><p>Create two files to test this sample.
</p><p>Default.aspx
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #008000;">&lt;%</span> @Page Language<span style="color: #008000;">=</span><span style="color: #666666;">&quot;C#&quot;</span> Inherits<span style="color: #008000;">=</span><span style="color: #666666;">&quot;Default&quot;</span> CodeFile<span style="color: #008000;">=</span><span style="color: #666666;">&quot;Default.aspx.cs&quot;</span> <span style="color: #008000;">%&gt;</span>
<span style="color: #008000;">&lt;</span>html<span style="color: #008000;">&gt;</span>
<span style="color: #008000;">&lt;</span>head id<span style="color: #008000;">=</span><span style="color: #666666;">&quot;headid&quot;</span> runat<span style="color: #008000;">=</span><span style="color: #666666;">&quot;server&quot;</span><span style="color: #008000;">&gt;</span>
 <span style="color: #008000;">&lt;</span>title<span style="color: #008000;">&gt;</span>jacob ASP<span style="color: #008000;">.</span><span style="color: #0000FF;">NET</span> WebForm_DoCallbacks<span style="color: #008000;">&lt;/</span>title<span style="color: #008000;">&gt;</span>
<span style="color: #008000;">&lt;/</span>head<span style="color: #008000;">&gt;</span>
<span style="color: #008000;">&lt;</span>script type<span style="color: #008000;">=</span><span style="color: #666666;">&quot;text/javascript&quot;</span><span style="color: #008000;">&gt;</span>
&#160;
	function SendValuesToSumatoryOnServer<span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span> 
        <span style="color: #008000;">&#123;</span>	 	
	 <span style="color: #0600FF; font-weight: bold;">var</span> foo_a <span style="color: #008000;">=</span> document<span style="color: #008000;">.</span><span style="color: #0000FF;">getElementById</span><span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;txt_fooa&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">;</span>
	 <span style="color: #0600FF; font-weight: bold;">var</span> foo_b <span style="color: #008000;">=</span> document<span style="color: #008000;">.</span><span style="color: #0000FF;">getElementById</span><span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;txt_foob&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">;</span>	 
         SumatoryOnServer<span style="color: #008000;">&#40;</span>foo_a <span style="color: #008000;">+</span> <span style="color: #666666;">&quot;:&quot;</span> <span style="color: #008000;">+</span> foo_b,<span style="color: #666666;">&quot;&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
	<span style="color: #008000;">&#125;</span>
&#160;
	function GetDataFromServer<span style="color: #008000;">&#40;</span>tmpValue<span style="color: #008000;">&#41;</span>
        <span style="color: #008000;">&#123;</span>
	 <span style="color: #0600FF; font-weight: bold;">var</span> foo_result <span style="color: #008000;">=</span> document<span style="color: #008000;">.</span><span style="color: #0000FF;">getElementById</span><span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;txt_fooresult&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>	 
         foo_result<span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">value</span> <span style="color: #008000;">=</span> tmpValue<span style="color: #008000;">;</span>   
	<span style="color: #008000;">&#125;</span>
&#160;
<span style="color: #008000;">&lt;/</span>script<span style="color: #008000;">&gt;</span>
<span style="color: #008000;">&lt;</span>body<span style="color: #008000;">&gt;</span>
 <span style="color: #008000;">&lt;</span>form id<span style="color: #008000;">=</span><span style="color: #666666;">&quot;frmMain&quot;</span> runat<span style="color: #008000;">=</span><span style="color: #666666;">&quot;server&quot;</span><span style="color: #008000;">&gt;</span>
	Sumatory <span style="color: #008000;">=</span> <span style="color: #008000;">&lt;</span>asp<span style="color: #008000;">:</span>TextBox id<span style="color: #008000;">=</span><span style="color: #666666;">&quot;txt_fooa&quot;</span> 
                                runat<span style="color: #008000;">=</span><span style="color: #666666;">&quot;server&quot;</span> 
                                style<span style="color: #008000;">=</span><span style="color: #666666;">&quot;font:status-bar;border:1px solid lightgray&quot;</span> <span style="color: #008000;">/&gt;</span>
	<span style="color: #008000;">+</span>
	<span style="color: #008000;">&lt;</span>asp<span style="color: #008000;">:</span>TextBox id<span style="color: #008000;">=</span><span style="color: #666666;">&quot;txt_foob&quot;</span>
  		     runat<span style="color: #008000;">=</span><span style="color: #666666;">&quot;server&quot;</span>
		     style<span style="color: #008000;">=</span><span style="color: #666666;">&quot;font:status-bar;border:1px solid lightgray&quot;</span>	<span style="color: #008000;">/&gt;</span>
&#160;
	<span style="color: #008000;">&lt;</span>input type<span style="color: #008000;">=</span><span style="color: #666666;">&quot;button&quot;</span> id<span style="color: #008000;">=</span><span style="color: #666666;">&quot;btn_sum&quot;</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">=</span><span style="color: #666666;">&quot;click here to exec sumatory on server&quot;</span>
	       onclick<span style="color: #008000;">=</span><span style="color: #666666;">&quot;SendValuesToSumatoryOnServer()&quot;</span> 
 	       style<span style="color: #008000;">=</span><span style="color: #666666;">&quot;font:status-bar;border:1px solid black&quot;</span> <span style="color: #008000;">/&gt;</span>
	<span style="color: #008000;">&lt;</span>br<span style="color: #008000;">&gt;&lt;</span>br<span style="color: #008000;">&gt;&lt;</span>br<span style="color: #008000;">&gt;</span>
	Result<span style="color: #008000;">:</span> <span style="color: #008000;">&lt;</span>asp<span style="color: #008000;">:</span>TextBox id<span style="color: #008000;">=</span><span style="color: #666666;">&quot;txt_fooresult&quot;</span>
				runat<span style="color: #008000;">=</span><span style="color: #666666;">&quot;server&quot;</span>
				style<span style="color: #008000;">=</span><span style="color: #666666;">&quot;font:status-bar;border:1px solid lightblue&quot;</span> <span style="color: #008000;">/&gt;</span> 
	<span style="color: #008000;">&lt;</span>br<span style="color: #008000;">&gt;</span>
&#160;
 <span style="color: #008000;">&lt;/</span>form<span style="color: #008000;">&gt;</span>
<span style="color: #008000;">&lt;/</span>body<span style="color: #008000;">&gt;</span>
<span style="color: #008000;">&lt;/</span>html<span style="color: #008000;">&gt;</span></pre>
<p>Default.aspx.cs
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">using</span> <span style="color: #008080;">System</span><span style="color: #008000;">;</span>
<span style="color: #0600FF; font-weight: bold;">using</span> <span style="color: #008080;">System.Web</span><span style="color: #008000;">;</span>
<span style="color: #0600FF; font-weight: bold;">using</span> <span style="color: #008080;">System.Web.UI</span><span style="color: #008000;">;</span>
&#160;
<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">partial</span> <span style="color: #6666cc; font-weight: bold;">class</span> <span style="color: #0600FF; font-weight: bold;">Default</span><span style="color: #008000;">:</span>Page,ICallbackEventHandler <span style="color: #008000;">&#123;</span>
&#160;
  <span style="color: #0600FF; font-weight: bold;">protected</span> <span style="color: #6666cc; font-weight: bold;">string</span> returnValue<span style="color: #008000;">;</span>
&#160;
  <span style="color: #0600FF; font-weight: bold;">protected</span> <span style="color: #6666cc; font-weight: bold;">void</span> Page_Load<span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">object</span> o,EventArgs e<span style="color: #008000;">&#41;</span> 
  <span style="color: #008000;">&#123;</span>
    <span style="color: #6666cc; font-weight: bold;">string</span> callback_event_reference <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">this</span><span style="color: #008000;">.</span><span style="color: #0000FF;">ClientScript</span><span style="color: #008000;">.</span><span style="color: #0000FF;">GetCallbackEventReference</span><span style="color: #008000;">&#40;</span><span style="color: #0600FF; font-weight: bold;">this</span>,<span style="color: #666666;">&quot;arg&quot;</span>,<span style="color: #666666;">&quot;GetDataFromServer&quot;</span>,<span style="color: #666666;">&quot;context&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&#160;
    <span style="color: #6666cc; font-weight: bold;">string</span> callback_implementation <span style="color: #008000;">=</span> <span style="color: #666666;">&quot;function SumatoryOnServer(arg,context)&quot;</span> <span style="color: #008000;">+</span> 
					  <span style="color: #666666;">&quot;{ &quot;</span> <span style="color: #008000;">+</span> callback_event_reference <span style="color: #008000;">+</span> <span style="color: #666666;">&quot;;}&quot;</span><span style="color: #008000;">;</span>
<span style="color: #0600FF; font-weight: bold;">this</span><span style="color: #008000;">.</span><span style="color: #0000FF;">ClientScript</span><span style="color: #008000;">.</span><span style="color: #0000FF;">RegisterClientScriptBlock</span><span style="color: #008000;">&#40;</span><span style="color: #0600FF; font-weight: bold;">this</span><span style="color: #008000;">.</span><span style="color: #0000FF;">GetType</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>,<span style="color: #666666;">&quot;SumatoryOnServer&quot;</span>,callback_implementation,<span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
  <span style="color: #008000;">&#125;</span>
&#160;
  <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> RaiseCallbackEvent<span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> eventArguments<span style="color: #008000;">&#41;</span> 
  <span style="color: #008000;">&#123;</span>
    <span style="color: #6666cc; font-weight: bold;">char</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> sep <span style="color: #008000;">=</span> <span style="color: #008000;">&#123;</span><span style="color: #666666;">':'</span><span style="color: #008000;">&#125;</span><span style="color: #008000;">;</span>
    <span style="color: #6666cc; font-weight: bold;">string</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> values <span style="color: #008000;">=</span> eventArguments<span style="color: #008000;">.</span><span style="color: #0000FF;">Split</span><span style="color: #008000;">&#40;</span>sep<span style="color: #008000;">&#91;</span><span style="color: #FF0000;">0</span><span style="color: #008000;">&#93;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #6666cc; font-weight: bold;">double</span> sum <span style="color: #008000;">=</span> <span style="color: #6666cc; font-weight: bold;">double</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Parse</span><span style="color: #008000;">&#40;</span>values<span style="color: #008000;">&#91;</span><span style="color: #FF0000;">0</span><span style="color: #008000;">&#93;</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">+</span> <span style="color: #6666cc; font-weight: bold;">double</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Parse</span><span style="color: #008000;">&#40;</span>values<span style="color: #008000;">&#91;</span><span style="color: #FF0000;">1</span><span style="color: #008000;">&#93;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    returnValue <span style="color: #008000;">=</span> sum<span style="color: #008000;">.</span><span style="color: #0000FF;">ToString</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>	
  <span style="color: #008000;">&#125;</span>
&#160;
  <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">string</span> GetCallbackResult<span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span> 
  <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> returnValue<span style="color: #008000;">;</span>
  <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p>Now only run xsp2 command on a directory where you are editing this sample source files and later open your firefox web browser and pick this url:
</p><p><a href="http://0.0.0.0:8080/Default.aspx" class="external free" rel="nofollow">http://0.0.0.0:8080/Default.aspx</a>
</p>
