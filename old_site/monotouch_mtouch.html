---
layout: obsolete
title: "MonoTouch mtouch"
permalink: /old_site/MonoTouch_mtouch/
redirect_from:
  - /MonoTouch_mtouch/
---

<h1>MonoTouch mtouch</h1>

<p>iPhone applications are shipped as application bundles.   These are directories with the extension <code>.app</code> that contain your code, data, configuration files and a manifest that the iPhone uses to learn about your application.   
</p><p>The process of turning a .NET executable into an application is mostly driven by the <code>mtouch</code> command, a tool that integrates many of the steps required to turn the application into a bundle.   This tool is also used to launch your application in the simulator and to deploy the software to an actual iPhone or iPod Touch device.
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Building"><span class="tocnumber">1</span> <span class="toctext">Building</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Building_for_the_Simulator"><span class="tocnumber">1.1</span> <span class="toctext">Building for the Simulator</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Building_for_the_Device"><span class="tocnumber">1.2</span> <span class="toctext">Building for the Device</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#Running_your_Application"><span class="tocnumber">2</span> <span class="toctext">Running your Application</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Launching_on_the_Simulator"><span class="tocnumber">2.1</span> <span class="toctext">Launching on the Simulator</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Debugging_on_the_Simulator"><span class="tocnumber">2.2</span> <span class="toctext">Debugging on the Simulator</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Debugging_on_the_Device"><span class="tocnumber">2.3</span> <span class="toctext">Debugging on the Device</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Deploying_to_a_Device"><span class="tocnumber">2.4</span> <span class="toctext">Deploying to a Device</span></a>
<ul>
<li class="toclevel-3 tocsection-9"><a href="#Troubleshooting"><span class="tocnumber">2.4.1</span> <span class="toctext">Troubleshooting</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</td></tr></table>
<h1> <span class="mw-headline" id="Building"> Building </span></h1>
<p>The <code>mtouch</code> command can compile your code in three different ways:
</p>
<ul><li> Compile for simulator testing.
</li><li> Compile for device deployment.
</li><li> Compile to source code, for integration with X-Code.
</li></ul>
<h2> <span class="mw-headline" id="Building_for_the_Simulator"> Building for the Simulator </span></h2>
<p>When you get started, the most common used scenario will be for you to try out the application in the Simulator, so you will be using the <code>mtouch -sim</code> to compile the code into a simulator package.    This is done like this:
</p>
<pre class="bash" style="font-family:monospace;"> $ mtouch <span style="color: #660033;">-sim</span> Hello.app hello.exe</pre>
<h2> <span class="mw-headline" id="Building_for_the_Device"> Building for the Device </span></h2>
<p>To build software for the device you will build your application using the <code>mtouch -dev</code> option, additionally you need to provide the name of the certificate used to sign your application.   The following shows how the application is built for the device:
</p>
<pre class="bash" style="font-family:monospace;"><span style="color: #666666;">$ </span>mtouch <span style="color: #660033;">-dev</span> <span style="color: #660033;">-c</span> <span style="color: #ff0000;">&quot;iPhone Developer: Miguel de Icaza&quot;</span> foo.exe</pre>
<p>In this particular case, we are using the "iPhone Developer: Miguel de Icaza" certificate to sign the application.   This step is very important, or the physical device will refuse to load the application.
</p>
<h1> <span class="mw-headline" id="Running_your_Application"> Running your Application </span></h1>
<h2> <span class="mw-headline" id="Launching_on_the_Simulator"> Launching on the Simulator </span></h2>
<p>Launching on the simulator is very simple once you have an application bundle:
</p>
<pre class="bash" style="font-family:monospace;"> $ mtouch <span style="color: #660033;">-launchsim</span> Hello.app</pre>
<p>You will see some output like this:
</p>
<pre class="bash" style="font-family:monospace;">Launching application
Application launched
PID: <span style="color: #000000;">98460</span>
Press enter to terminate the application</pre>
<p>It is strongly recommended that you also keep a log of the standard output and standard error files to assist in your debugging.   The output of Console.WriteLine goes to stdout, and the output from Console.Error.WriteLine and any other runtime error messages goes to stderr. 
</p><p>To do this, use the --stdout and --stderr flags:
</p>
<pre class="bash" style="font-family:monospace;">..<span style="color: #000000; font-weight: bold;">/</span>..<span style="color: #000000; font-weight: bold;">/</span>tools<span style="color: #000000; font-weight: bold;">/</span>mtouch<span style="color: #000000; font-weight: bold;">/</span>mtouch <span style="color: #660033;">--launchsim</span>=Hello.app <span style="color: #660033;">--stdout</span>=output <span style="color: #660033;">--stderr</span>=error</pre>
<p>If your application fails, you can see the fiels output and error to diagnose the problem.
</p>
<h2> <span class="mw-headline" id="Debugging_on_the_Simulator"> Debugging on the Simulator </span></h2>
<p>Debugging on the simulator is currently limited to debugging at the GDB level.    This debugging is described in <a href="{{site.baseurl}}/Debugging#Debugging_with_GDB" title="Debugging">Debugging with GDB</a>.   This means that it is mostly useful if you are debugging low-level operations or if you are familiar with Mono internals, it is not a complete managed debugger.
</p>
<pre class="bash" style="font-family:monospace;"> $ mtouch <span style="color: #660033;">-debugsim</span> Hello.app</pre>
<p>You will see some output like:
</p>
<pre class="bash" style="font-family:monospace;">Launching application
Application launched
PID: <span style="color: #000000;">29558</span>
Press enter to terminate the application</pre>
<p>Open another terminal and launch gdb and type:
</p>
<pre class="bash" style="font-family:monospace;"><span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #c20cb9; font-weight: bold;">gdb</span><span style="color: #7a0874; font-weight: bold;">&#41;</span> attach <span style="color: #000000;">29558</span> <span style="color: #000000; font-weight: bold;">&lt;</span>-- PID from above
Attaching to process <span style="color: #000000;">29558</span>.
Reading symbols <span style="color: #000000; font-weight: bold;">for</span> shared libraries . <span style="color: #000000; font-weight: bold;">done</span>
0x8fe01010 <span style="color: #000000; font-weight: bold;">in</span> __dyld__dyld_start <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>
<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #c20cb9; font-weight: bold;">gdb</span><span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #7a0874; font-weight: bold;">continue</span></pre>
<h2> <span class="mw-headline" id="Debugging_on_the_Device"> Debugging on the Device </span></h2>
<p>Debugging on the device is currently provided thru the Xcode debugging mechanism and uses GDB.   This debugging is described in <a href="{{site.baseurl}}/Debugging#Debugging_with_GDB" title="Debugging">Debugging with GDB</a>.   This means that it is mostly useful if you are debugging low-level operations or if you are familiar with Mono internals, it is not a complete managed debugger.
</p>
<pre class="bash" style="font-family:monospace;"> $ mtouch <span style="color: #660033;">-xcode</span> Hello <span style="color: #660033;">-res</span> MainWindow.xib <span style="color: #660033;">-res</span> Icon.png hello.exe</pre>
<p>This command will generate a xcodeproject in the folder "Hello" containing the resources Icon.png and MainWindow.xib from your hello.exe, and open the project in xcode, you can then debug on the device via Xcode.
</p>
<h2> <span class="mw-headline" id="Deploying_to_a_Device"> Deploying to a Device </span></h2>
<p>Overview
</p>
<h3> <span class="mw-headline" id="Troubleshooting"> Troubleshooting </span></h3>

