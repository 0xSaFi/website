---
layout: obsolete
title: "Gendarme.Rules.Correctness"
permalink: /old_site/Gendarme.Rules.Correctness/
redirect_from:
  - /Gendarme.Rules.Correctness/
---

<h1>Gendarme.Rules.Correctness</h1>

<p><a href="{{site.github.url}}/old_site/Gendarme" title="Gendarme">Gendarme</a>'s correctness rules are located in the <b>Gendarme.Rules.Correctness.dll</b> assembly. Latest sources are available from 
<a href="http://anonsvn.mono-project.com/viewcvs/trunk/mono-tools/gendarme/rules/Gendarme.Rules.Correctness/" class="external text" rel="nofollow">anonymous SVN</a>.
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Rules"><span class="tocnumber">1</span> <span class="toctext">Rules</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#AttributeStringLiteralsShouldParseCorrectlyRule"><span class="tocnumber">1.1</span> <span class="toctext">AttributeStringLiteralsShouldParseCorrectlyRule</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#AvoidConstructorsInStaticTypesRule"><span class="tocnumber">1.2</span> <span class="toctext">AvoidConstructorsInStaticTypesRule</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#AvoidFloatingPointEqualityRule"><span class="tocnumber">1.3</span> <span class="toctext">AvoidFloatingPointEqualityRule</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#BadRecursiveInvocationRule"><span class="tocnumber">1.4</span> <span class="toctext">BadRecursiveInvocationRule</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#CallingEqualsWithNullArgRule"><span class="tocnumber">1.5</span> <span class="toctext">CallingEqualsWithNullArgRule</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#CheckParametersNullityInVisibleMethodsRule"><span class="tocnumber">1.6</span> <span class="toctext">CheckParametersNullityInVisibleMethodsRule</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#DisposableFieldsShouldBeDisposedRule"><span class="tocnumber">1.7</span> <span class="toctext">DisposableFieldsShouldBeDisposedRule</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#DoNotCompareWithNaNRule"><span class="tocnumber">1.8</span> <span class="toctext">DoNotCompareWithNaNRule</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#DoNotRecurseInEqualityRule"><span class="tocnumber">1.9</span> <span class="toctext">DoNotRecurseInEqualityRule</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#DoNotRoundIntegersRule"><span class="tocnumber">1.10</span> <span class="toctext">DoNotRoundIntegersRule</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#EnsureLocalDisposalRule"><span class="tocnumber">1.11</span> <span class="toctext">EnsureLocalDisposalRule</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#FinalizersShouldCallBaseClassFinalizerRule"><span class="tocnumber">1.12</span> <span class="toctext">FinalizersShouldCallBaseClassFinalizerRule</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#MethodCanBeMadeStaticRule"><span class="tocnumber">1.13</span> <span class="toctext">MethodCanBeMadeStaticRule</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#ProvideCorrectArgumentsToFormattingMethodsRule"><span class="tocnumber">1.14</span> <span class="toctext">ProvideCorrectArgumentsToFormattingMethodsRule</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#ProvideCorrectRegexPatternRule"><span class="tocnumber">1.15</span> <span class="toctext">ProvideCorrectRegexPatternRule</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#ProvideValidXmlStringRule"><span class="tocnumber">1.16</span> <span class="toctext">ProvideValidXmlStringRule</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#ProvideValidXPathExpressionRule"><span class="tocnumber">1.17</span> <span class="toctext">ProvideValidXPathExpressionRule</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#ReviewCastOnIntegerDivisionRule"><span class="tocnumber">1.18</span> <span class="toctext">ReviewCastOnIntegerDivisionRule</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#ReviewCastOnIntegerMultiplicationRule"><span class="tocnumber">1.19</span> <span class="toctext">ReviewCastOnIntegerMultiplicationRule</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#ReviewDoubleAssignmentRule"><span class="tocnumber">1.20</span> <span class="toctext">ReviewDoubleAssignmentRule</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#ReviewInconsistentIdentityRule"><span class="tocnumber">1.21</span> <span class="toctext">ReviewInconsistentIdentityRule</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#ReviewSelfAssignmentRule"><span class="tocnumber">1.22</span> <span class="toctext">ReviewSelfAssignmentRule</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#ReviewUselessControlFlowRule"><span class="tocnumber">1.23</span> <span class="toctext">ReviewUselessControlFlowRule</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#ReviewUseOfInt64BitsToDoubleRule"><span class="tocnumber">1.24</span> <span class="toctext">ReviewUseOfInt64BitsToDoubleRule</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#ReviewUseOfModuloOneOnIntegersRule"><span class="tocnumber">1.25</span> <span class="toctext">ReviewUseOfModuloOneOnIntegersRule</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#UseValueInPropertySetterRule"><span class="tocnumber">1.26</span> <span class="toctext">UseValueInPropertySetterRule</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-28"><a href="#Feedback"><span class="tocnumber">2</span> <span class="toctext">Feedback</span></a></li>
</ul>
</td></tr></table>
<h1> <span class="mw-headline" id="Rules"> Rules </span></h1>
<h3> <span class="mw-headline" id="AttributeStringLiteralsShouldParseCorrectlyRule"> AttributeStringLiteralsShouldParseCorrectlyRule </span></h3>
<p>As attributes are used at compile time, only constants can be passed to constructors. This can lead to runtime errors for things like malformed URI strings. This rule checks attributes with the following types, represented as a string, and validates the string value: 
</p>
<ul><li> Version
</li><li> Guid
</li><li> Uri
</li></ul>
<p><br />
<b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #008000;">&#91;</span>assembly<span style="color: #008000;">:</span> AssemblyFileVersion <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;fooo&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #008000;">&#91;</span>assembly<span style="color: #008000;">:</span> AssemblyFileVersion <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;0.0.1.*&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.2
</li></ul>
<h3> <span class="mw-headline" id="AvoidConstructorsInStaticTypesRule"> AvoidConstructorsInStaticTypesRule </span></h3>
<p>This rule checks for types that contain only static members and fires if the type contains a visible instance constructor. This was a common mistake in the 1.x framework because C# adds a default, public, constructor if no other constructors are provided. Code using the framework 2.0 (and later) should change this type, if possible, into a static type. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #008080; font-style: italic;">// it is possible to instantiate this class since the</span>
<span style="color: #008080; font-style: italic;">// C# compiler adds a default, public, constructor</span>
<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> <span style="color: #6666cc; font-weight: bold;">Class</span> <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">void</span> Method <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> <span style="color: #6666cc; font-weight: bold;">Class</span> <span style="color: #008000;">&#123;</span>
    <span style="color: #008080; font-style: italic;">// this class cannot be instantiated</span>
    <span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #6666cc; font-weight: bold;">Class</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
    <span style="color: #008000;">&#125;</span>
&#160;
    <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">void</span> Method <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><br />
</p>
<h3> <span class="mw-headline" id="AvoidFloatingPointEqualityRule"> AvoidFloatingPointEqualityRule </span></h3>
<p>In general floating point numbers cannot be usefully compared using the equality and inequality operators. This is because floating point numbers are inexact and most floating point operations introduce errors which can accumulate if multiple operations are performed. This rule will fire if [in]equality comparisons are used with <b>Single</b> or <b>Double</b> types. In general such comparisons should be done with some sort of epsilon test instead of a simple compare (see the code below). For more information: 
</p>
<ul><li> <a href="http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm" class="external text" rel="nofollow">Floating Point Comparison (General Problem)</a>
</li><li> <a href="http://www.yoda.arachsys.com/csharp/floatingpoint.html" class="external text" rel="nofollow">Another article about floating point comparison (more .NET adapted)</a>
</li></ul>
<p><br />
<b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #008080; font-style: italic;">// This may or may not work as expected. In particular, if the values are from</span>
<span style="color: #008080; font-style: italic;">// high precision real world measurements or different algorithmic sources then</span>
<span style="color: #008080; font-style: italic;">// it's likely that they will have small errors and an exact inequality test will not</span>
<span style="color: #008080; font-style: italic;">// work as expected.</span>
<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">bool</span> NearlyEqual <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">double</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> lhs, <span style="color: #6666cc; font-weight: bold;">double</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> rhs<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>ReferenceEquals <span style="color: #008000;">&#40;</span>lhs, rhs<span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
    <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>lhs<span style="color: #008000;">.</span><span style="color: #0000FF;">Length</span> <span style="color: #008000;">!=</span> rhs<span style="color: #008000;">.</span><span style="color: #0000FF;">Length</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">false</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
    <span style="color: #0600FF; font-weight: bold;">for</span> <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> i <span style="color: #008000;">=</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">;</span> i <span style="color: #008000;">&lt;</span> lhs<span style="color: #008000;">.</span><span style="color: #0000FF;">Length</span><span style="color: #008000;">;</span> <span style="color: #008000;">++</span>i<span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>lhs <span style="color: #008000;">&#91;</span>i<span style="color: #008000;">&#93;</span> <span style="color: #008000;">!=</span> rhs <span style="color: #008000;">&#91;</span>i<span style="color: #008000;">&#93;</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
            <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">false</span><span style="color: #008000;">;</span>
        <span style="color: #008000;">&#125;</span>
    <span style="color: #008000;">&#125;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #008080; font-style: italic;">// This will normally work fine. However it will not work with infinity (because</span>
<span style="color: #008080; font-style: italic;">// infinity - infinity is a NAN). It's also difficult to use if the values may</span>
<span style="color: #008080; font-style: italic;">// have very large or very small magnitudes (because the epsilon value must</span>
<span style="color: #008080; font-style: italic;">// be scaled accordingly).</span>
<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">bool</span> NearlyEqual <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">double</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> lhs, <span style="color: #6666cc; font-weight: bold;">double</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> rhs, <span style="color: #6666cc; font-weight: bold;">double</span> epsilon<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>ReferenceEquals <span style="color: #008000;">&#40;</span>lhs, rhs<span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
    <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>lhs<span style="color: #008000;">.</span><span style="color: #0000FF;">Length</span> <span style="color: #008000;">!=</span> rhs<span style="color: #008000;">.</span><span style="color: #0000FF;">Length</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">false</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
    <span style="color: #0600FF; font-weight: bold;">for</span> <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> i <span style="color: #008000;">=</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">;</span> i <span style="color: #008000;">&lt;</span> lhs<span style="color: #008000;">.</span><span style="color: #0000FF;">Length</span><span style="color: #008000;">;</span> <span style="color: #008000;">++</span>i<span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>Math<span style="color: #008000;">.</span><span style="color: #0000FF;">Abs</span> <span style="color: #008000;">&#40;</span>lhs <span style="color: #008000;">&#91;</span>i<span style="color: #008000;">&#93;</span> <span style="color: #008000;">-</span> rhs <span style="color: #008000;">&#91;</span>i<span style="color: #008000;">&#93;</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&gt;</span> epsilon<span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
            <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">false</span><span style="color: #008000;">;</span>
        <span style="color: #008000;">&#125;</span>
    <span style="color: #008000;">&#125;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> Prior to Gendarme 2.2 this rule was named FloatComparisonRule.
</li></ul>
<h3> <span class="mw-headline" id="BadRecursiveInvocationRule"> BadRecursiveInvocationRule </span></h3>
<p>This rule checks for a few common scenarios where a method may be infinitely recursive. For example, getter properties which call themselves or methods with no conditional code which call themselves (instead of the base method). 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #6666cc; font-weight: bold;">string</span> CurrentDirectory <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">get</span> <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> CurrentDirectory<span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #6666cc; font-weight: bold;">string</span> CurrentDirectory <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">get</span> <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">base</span><span style="color: #008000;">.</span><span style="color: #0000FF;">CurrentDirectory</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><br />
</p>
<h3> <span class="mw-headline" id="CallingEqualsWithNullArgRule"> CallingEqualsWithNullArgRule </span></h3>
<p>This rule checks for methods that call <b>Equals</b> with a <b>null</b> actual parameter. Such calls should always return <b>false</b>. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> MakeStuff <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    MyClass myClassInstance <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> MyClass <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    MyClass otherClassInstance <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">null</span><span style="color: #008000;">;</span>
    Console<span style="color: #008000;">.</span><span style="color: #0000FF;">WriteLine</span> <span style="color: #008000;">&#40;</span>myClassInstance<span style="color: #008000;">.</span><span style="color: #0000FF;">Equals</span> <span style="color: #008000;">&#40;</span>otherClassInstance<span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> MakeStuff <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    MyClass myClassInstance <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> MyClass <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    MyClass otherClassInstance <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> MyClass <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    Console<span style="color: #008000;">.</span><span style="color: #0000FF;">WriteLine</span> <span style="color: #008000;">&#40;</span>myClassInstance<span style="color: #008000;">.</span><span style="color: #0000FF;">Equals</span> <span style="color: #008000;">&#40;</span>otherClassInstance<span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><br />
</p>
<h3> <span class="mw-headline" id="CheckParametersNullityInVisibleMethodsRule"> CheckParametersNullityInVisibleMethodsRule </span></h3>
<p>This rule checks if all nullable parameters of visible methods are compared with <b>null</b> before they get used. This reduce the likelyhood of the runtime throwing a <b>NullReferenceException</b>. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #008000;">&#91;</span>DllImport <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;message&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span>
<span style="color: #0600FF; font-weight: bold;">internal</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #0600FF; font-weight: bold;">extern</span> <span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> Parse <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> s, <span style="color: #6666cc; font-weight: bold;">int</span> length<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&#160;
<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">bool</span> TryParse <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> s, <span style="color: #0600FF; font-weight: bold;">out</span> Message m<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #008080; font-style: italic;">// is 's' is null then 's.Length' will throw a NullReferenceException</span>
    <span style="color: #008080; font-style: italic;">// which a TryParse method should never do</span>
    <span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data <span style="color: #008000;">=</span> Parse <span style="color: #008000;">&#40;</span>s, s<span style="color: #008000;">.</span><span style="color: #0000FF;">Length</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>data <span style="color: #008000;">==</span> <span style="color: #0600FF; font-weight: bold;">null</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
        m <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">null</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">false</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
    m <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> Message <span style="color: #008000;">&#40;</span>data<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #008000;">&#91;</span>DllImport <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;message&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span>
<span style="color: #0600FF; font-weight: bold;">internal</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #0600FF; font-weight: bold;">extern</span> <span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> Parse <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> s, <span style="color: #6666cc; font-weight: bold;">int</span> length<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&#160;
<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">bool</span> TryParse <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> s, <span style="color: #0600FF; font-weight: bold;">out</span> Message m<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>s <span style="color: #008000;">==</span> <span style="color: #0600FF; font-weight: bold;">null</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
        m <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">null</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">false</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
    <span style="color: #6666cc; font-weight: bold;">byte</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> data <span style="color: #008000;">=</span> Parse <span style="color: #008000;">&#40;</span>s, s<span style="color: #008000;">.</span><span style="color: #0000FF;">Length</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>data <span style="color: #008000;">==</span> <span style="color: #0600FF; font-weight: bold;">null</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
        m <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">null</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">false</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
    m <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> Message <span style="color: #008000;">&#40;</span>data<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.2
</li></ul>
<h3> <span class="mw-headline" id="DisposableFieldsShouldBeDisposedRule"> DisposableFieldsShouldBeDisposedRule </span></h3>
<p>The rule inspects all fields for disposable types and, if <b>System.IDisposable</b> is implemented, checks that the type's <b>Dispose</b> method does indeed call <b>Dispose</b> on all disposable fields. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #6666cc; font-weight: bold;">class</span> DoesNotDisposeMember <span style="color: #008000;">:</span> IDisposable <span style="color: #008000;">&#123;</span>
    <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> buffer<span style="color: #008000;">;</span>
    IDisposable field<span style="color: #008000;">;</span>
&#160;
    <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> Dispose <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        buffer <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">null</span><span style="color: #008000;">;</span>
        <span style="color: #008080; font-style: italic;">// field is not disposed</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #6666cc; font-weight: bold;">class</span> DisposePattern <span style="color: #008000;">:</span> IDisposable <span style="color: #008000;">&#123;</span>
    <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> buffer<span style="color: #008000;">;</span>
    IDisposable field<span style="color: #008000;">;</span>
    <span style="color: #6666cc; font-weight: bold;">bool</span> disposed<span style="color: #008000;">;</span>
&#160;
    <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> Dispose <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        Dispose <span style="color: #008000;">&#40;</span><span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
&#160;
    <span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #6666cc; font-weight: bold;">void</span> Dispose <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">bool</span> disposing<span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">!</span>disposed<span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
            <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>disposing<span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
                field<span style="color: #008000;">.</span><span style="color: #0000FF;">Dispose</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
            <span style="color: #008000;">&#125;</span>
            buffer <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">null</span><span style="color: #008000;">;</span>
            disposed <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">;</span>
        <span style="color: #008000;">&#125;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><br />
</p>
<h3> <span class="mw-headline" id="DoNotCompareWithNaNRule"> DoNotCompareWithNaNRule </span></h3>
<p>As defined in IEEE 754 it's impossible to compare any floating-point value, even another <b>NaN</b>, with <b>NaN</b>. Such comparison will always return <b>false</b>(more information on <a href="http://en.wikipedia.org/wiki/NaN" class="external text" rel="nofollow">wikipedia</a>). The framework provides methods, <b>Single.IsNaN</b> and <b>Double.IsNaN</b>, to check for <b>NaN</b> values. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #6666cc; font-weight: bold;">double</span> d <span style="color: #008000;">=</span> ComplexCalculation <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>d <span style="color: #008000;">==</span> <span style="color: #6666cc; font-weight: bold;">Double</span><span style="color: #008000;">.</span><span style="color: #0000FF;">NaN</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
    <span style="color: #008080; font-style: italic;">// this will never be reached, even if d is NaN</span>
    Console<span style="color: #008000;">.</span><span style="color: #0000FF;">WriteLine</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;No solution exists!&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #6666cc; font-weight: bold;">double</span> d <span style="color: #008000;">=</span> ComplexCalculation <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">Double</span><span style="color: #008000;">.</span><span style="color: #0000FF;">IsNaN</span> <span style="color: #008000;">&#40;</span>d<span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
    Console<span style="color: #008000;">.</span><span style="color: #0000FF;">WriteLine</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;No solution exists!&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><br />
</p>
<h3> <span class="mw-headline" id="DoNotRecurseInEqualityRule"> DoNotRecurseInEqualityRule </span></h3>
<p>An operator== or operator!= method is calling itself recursively. This is usually caused by neglecting to cast an argument to System.Object before comparing it to null. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">bool</span> <span style="color: #0600FF; font-weight: bold;">operator</span><span style="color: #008000;">==</span> <span style="color: #008000;">&#40;</span>Customer lhs, Customer rhs<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">object</span><span style="color: #008000;">.</span><span style="color: #0000FF;">ReferenceEquals</span> <span style="color: #008000;">&#40;</span>lhs, rhs<span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
    <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>lhs <span style="color: #008000;">==</span> <span style="color: #0600FF; font-weight: bold;">null</span> <span style="color: #008000;">||</span> rhs <span style="color: #008000;">==</span> <span style="color: #0600FF; font-weight: bold;">null</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">false</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> lhs<span style="color: #008000;">.</span><span style="color: #0000FF;">name</span> <span style="color: #008000;">==</span> rhs<span style="color: #008000;">.</span><span style="color: #0000FF;">name</span> <span style="color: #008000;">&amp;&amp;</span> lhs<span style="color: #008000;">.</span><span style="color: #0000FF;">address</span> <span style="color: #008000;">==</span> rhs<span style="color: #008000;">.</span><span style="color: #0000FF;">address</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">bool</span> <span style="color: #0600FF; font-weight: bold;">operator</span><span style="color: #008000;">==</span> <span style="color: #008000;">&#40;</span>Customer lhs, Customer rhs<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">object</span><span style="color: #008000;">.</span><span style="color: #0000FF;">ReferenceEquals</span> <span style="color: #008000;">&#40;</span>lhs, rhs<span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
    <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">object</span><span style="color: #008000;">&#41;</span> lhs <span style="color: #008000;">==</span> <span style="color: #0600FF; font-weight: bold;">null</span> <span style="color: #008000;">||</span> <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">object</span><span style="color: #008000;">&#41;</span> rhs <span style="color: #008000;">==</span> <span style="color: #0600FF; font-weight: bold;">null</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">false</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> lhs<span style="color: #008000;">.</span><span style="color: #0000FF;">name</span> <span style="color: #008000;">==</span> rhs<span style="color: #008000;">.</span><span style="color: #0000FF;">name</span> <span style="color: #008000;">&amp;&amp;</span> lhs<span style="color: #008000;">.</span><span style="color: #0000FF;">address</span> <span style="color: #008000;">==</span> rhs<span style="color: #008000;">.</span><span style="color: #0000FF;">address</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.4
</li></ul>
<h3> <span class="mw-headline" id="DoNotRoundIntegersRule"> DoNotRoundIntegersRule </span></h3>
<p>This rule check for attempts to call <b>Round</b>, <b>Ceiling</b>, <b>Floor</b> or <b>Truncate</b> on an integral type. This often indicate a typo in the source code (e.g. wrong variable) or an unnecessary operation. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">decimal</span> Compute <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> x<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> Math<span style="color: #008000;">.</span><span style="color: #0000FF;">Truncate</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">decimal</span><span style="color: #008000;">&#41;</span> x<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">decimal</span> Compute <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> x<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">decimal</span><span style="color: #008000;">&#41;</span> x<span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.0
</li></ul>
<h3> <span class="mw-headline" id="EnsureLocalDisposalRule"> EnsureLocalDisposalRule </span></h3>
<p>This rule checks that disposable locals are always disposed of before the method returns. Use a 'using' statement (or a try/finally block) to guarantee local disposal even in the event an unhandled exception occurs. 
</p><p><b>Bad</b> example (non-guaranteed disposal):
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #6666cc; font-weight: bold;">void</span> DecodeFile <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> file<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">var</span> stream <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> StreamReader <span style="color: #008000;">&#40;</span>file<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    DecodeHeader <span style="color: #008000;">&#40;</span>stream<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">!</span>DecodedHeader<span style="color: #008000;">.</span><span style="color: #0000FF;">HasContent</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
    DecodeContent <span style="color: #008000;">&#40;</span>stream<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    stream<span style="color: #008000;">.</span><span style="color: #0000FF;">Dispose</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example (non-guaranteed disposal):
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #6666cc; font-weight: bold;">void</span> DecodeFile <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> file<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">using</span> <span style="color: #008000;">&#40;</span><span style="color: #0600FF; font-weight: bold;">var</span> stream <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> StreamReader <span style="color: #008000;">&#40;</span>file<span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
        DecodeHeader <span style="color: #008000;">&#40;</span>stream<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">!</span>DecodedHeader<span style="color: #008000;">.</span><span style="color: #0000FF;">HasContent</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
            <span style="color: #0600FF; font-weight: bold;">return</span><span style="color: #008000;">;</span>
        <span style="color: #008000;">&#125;</span>
        DecodeContent <span style="color: #008000;">&#40;</span>stream<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Bad</b> example (not disposed of / not locally disposed of):
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #6666cc; font-weight: bold;">void</span> DecodeFile <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> file<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">var</span> stream <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> StreamReader <span style="color: #008000;">&#40;</span>file<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    Decode <span style="color: #008000;">&#40;</span>stream<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span>
&#160;
<span style="color: #6666cc; font-weight: bold;">void</span> Decode <span style="color: #008000;">&#40;</span>Stream stream<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #008080; font-style: italic;">/*code to decode the stream*/</span>
    stream<span style="color: #008000;">.</span><span style="color: #0000FF;">Dispose</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example (not disposed of / not locally disposed of):
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #6666cc; font-weight: bold;">void</span> DecodeFile <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> file<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">using</span> <span style="color: #008000;">&#40;</span><span style="color: #0600FF; font-weight: bold;">var</span> stream <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> StreamReader <span style="color: #008000;">&#40;</span>file<span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
        Decode <span style="color: #008000;">&#40;</span>stream<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span>
&#160;
<span style="color: #6666cc; font-weight: bold;">void</span> Decode <span style="color: #008000;">&#40;</span>Stream stream<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #008080; font-style: italic;">/*code to decode the stream*/</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.4
</li></ul>
<h3> <span class="mw-headline" id="FinalizersShouldCallBaseClassFinalizerRule"> FinalizersShouldCallBaseClassFinalizerRule </span></h3>
<p>This rule is used to warn the developer that a finalizer does not call the base class finalizer. In C#, this is enforced by compiler but some .NET languages (like IL) may allow such behavior. 
</p><p><b>Bad</b> example (IL):
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #008000;">.</span><span style="color: #0000FF;">assembly</span> <span style="color: #0600FF; font-weight: bold;">extern</span> mscorlib
<span style="color: #008000;">&#123;</span>
    <span style="color: #008000;">.</span><span style="color: #0000FF;">ver</span> <span style="color: #FF0000;">1</span><span style="color: #008000;">:</span><span style="color: #FF0000;">0</span><span style="color: #008000;">:</span><span style="color: #FF0000;">5000</span><span style="color: #008000;">:</span><span style="color: #FF0000;">0</span>
    <span style="color: #008000;">.</span><span style="color: #0000FF;">publickeytoken</span> <span style="color: #008000;">=</span> <span style="color: #008000;">&#40;</span>B7 7A 5C <span style="color: #FF0000;">56</span> <span style="color: #FF0000;">19</span> <span style="color: #FF0000;">34</span> E0 <span style="color: #FF0000;">89</span> <span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#125;</span>
<span style="color: #008000;">.</span><span style="color: #6666cc; font-weight: bold;">class</span> <span style="color: #0600FF; font-weight: bold;">public</span> auto ansi beforefieldinit BadFinalizer extends <span style="color: #008000;">&#91;</span>mscorlib<span style="color: #008000;">&#93;</span><span style="color: #000000;">System</span><span style="color: #008000;">.</span><span style="color: #6666cc; font-weight: bold;">Object</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #008000;">.</span><span style="color: #0000FF;">method</span> family <span style="color: #0600FF; font-weight: bold;">virtual</span> hidebysig instance <span style="color: #6666cc; font-weight: bold;">void</span> Finalize<span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span> cil managed
    <span style="color: #008000;">&#123;</span>
        <span style="color: #008080; font-style: italic;">// no base call so rule will fire here</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example (C#):
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> GoodFinalizer <span style="color: #008000;">&#123;</span>
    ~GoodFinalizer <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        <span style="color: #008080; font-style: italic;">// C# compiler will insert base.Finalize () call here</span>
        <span style="color: #008080; font-style: italic;">// so any compiler-generated code will be valid</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><br />
</p>
<h3> <span class="mw-headline" id="MethodCanBeMadeStaticRule"> MethodCanBeMadeStaticRule </span></h3>
<p>This rule checks for methods that do not require anything from the current instance. Those methods can be converted into static methods, which helps a bit with performance (the hidden <b>this</b> parameter can be omitted), and clarifies the API. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> Bad <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #6666cc; font-weight: bold;">int</span> x, y, z<span style="color: #008000;">;</span>
&#160;
    <span style="color: #6666cc; font-weight: bold;">bool</span> Valid <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        <span style="color: #008080; font-style: italic;">// no instance members are used</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #008000;">&#40;</span><span style="color: #0600FF; font-weight: bold;">value</span> <span style="color: #008000;">&gt;</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
&#160;
    <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">int</span> X <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">get</span> <span style="color: #008000;">&#123;</span>
            <span style="color: #0600FF; font-weight: bold;">return</span> x<span style="color: #008000;">;</span>
        <span style="color: #008000;">&#125;</span>
        <span style="color: #0600FF; font-weight: bold;">set</span> <span style="color: #008000;">&#123;</span>
            <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">!</span>Valid <span style="color: #008000;">&#40;</span><span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
                <span style="color: #0600FF; font-weight: bold;">throw</span> ArgumentException <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;X&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
            <span style="color: #008000;">&#125;</span>
            x <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">;</span>
        <span style="color: #008000;">&#125;</span>
    <span style="color: #008000;">&#125;</span>
&#160;
    <span style="color: #008080; font-style: italic;">// same for Y and Z</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> Good <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #6666cc; font-weight: bold;">int</span> x, y, z<span style="color: #008000;">;</span>
&#160;
    <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">bool</span> Valid <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #008000;">&#40;</span><span style="color: #0600FF; font-weight: bold;">value</span> <span style="color: #008000;">&gt;</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
&#160;
    <span style="color: #008080; font-style: italic;">// same X (and Y and Z) as before</span>
<span style="color: #008000;">&#125;</span></pre>
<p><br />
</p>
<h3> <span class="mw-headline" id="ProvideCorrectArgumentsToFormattingMethodsRule"> ProvideCorrectArgumentsToFormattingMethodsRule </span></h3>
<p>This rule checks that the format string used with <b>String.Format</b> matches the other parameters used with the method. 
</p><p><b>Bad</b> examples:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #6666cc; font-weight: bold;">string</span> s1 <span style="color: #008000;">=</span> <span style="color: #6666cc; font-weight: bold;">String</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Format</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;There is nothing to format here!&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008080; font-style: italic;">// no argument to back {0}</span>
<span style="color: #6666cc; font-weight: bold;">string</span> s2 <span style="color: #008000;">=</span> <span style="color: #6666cc; font-weight: bold;">String</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Format</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;Hello {0}!&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p><b>Good</b> examples:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #6666cc; font-weight: bold;">string</span> s1 <span style="color: #008000;">=</span> <span style="color: #666666;">&quot;There is nothing to format here!&quot;</span><span style="color: #008000;">;</span>
<span style="color: #6666cc; font-weight: bold;">string</span> s2 <span style="color: #008000;">=</span> <span style="color: #6666cc; font-weight: bold;">String</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Format</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;Hello {0}!&quot;</span>, name<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.2
</li></ul>
<h3> <span class="mw-headline" id="ProvideCorrectRegexPatternRule"> ProvideCorrectRegexPatternRule </span></h3>
<p>This rule verifies that valid regular expression strings are used as arguments. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #008080; font-style: italic;">//Invalid end of pattern</span>
Regex re <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> Regex <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;^<span style="color: #008080; font-weight: bold;">\\</span>&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;">Regex re <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> Regex <span style="color: #008000;">&#40;</span><span style="color: #666666;">@&quot;^<span style="color: #008080; font-weight: bold;">\\</span>&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #008080; font-style: italic;">//Unterminated [] set</span>
Regex re <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> Regex <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;([a-z)*&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;">Regex re <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> Regex <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;([a-z])*&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #008080; font-style: italic;">//Reference to undefined group number 2</span>
<span style="color: #0600FF; font-weight: bold;">return</span> Regex<span style="color: #008000;">.</span><span style="color: #0000FF;">IsMatch</span> <span style="color: #008000;">&#40;</span>code, <span style="color: #666666;">@&quot;(\w)-\2&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">return</span> Regex<span style="color: #008000;">.</span><span style="color: #0000FF;">IsMatch</span> <span style="color: #008000;">&#40;</span>code, <span style="color: #666666;">@&quot;(\w)-\1&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.4
</li></ul>
<h3> <span class="mw-headline" id="ProvideValidXmlStringRule"> ProvideValidXmlStringRule </span></h3>
<p>This rule verifies that valid XML string arguments are passed as arguments. 
</p><p><b>Bad</b> example (using LoadXml):
</p>
<pre class="csharp" style="font-family:monospace;">XmlDocument doc <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> XmlDocument <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
doc<span style="color: #008000;">.</span><span style="color: #0000FF;">LoadXml</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;&lt;book&gt;&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p><b>Good</b> example (using LoadXml):
</p>
<pre class="csharp" style="font-family:monospace;">XmlDocument doc <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> XmlDocument <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
doc<span style="color: #008000;">.</span><span style="color: #0000FF;">LoadXml</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;&lt;book /&gt;&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p><b>Bad</b> example (using InnerXml):
</p>
<pre class="csharp" style="font-family:monospace;">bookElement<span style="color: #008000;">.</span><span style="color: #0000FF;">InnerXml</span> <span style="color: #008000;">=</span> <span style="color: #666666;">&quot;&lt;author&gt;Robert J. Sawyer&lt;/authr&gt;&quot;</span><span style="color: #008000;">;</span></pre>
<p><b>Good</b> example (using InnerXml):
</p>
<pre class="csharp" style="font-family:monospace;">bookElement<span style="color: #008000;">.</span><span style="color: #0000FF;">InnerXml</span> <span style="color: #008000;">=</span> <span style="color: #666666;">&quot;&lt;author&gt;Robert J. Sawyer&lt;/author&gt;&quot;</span><span style="color: #008000;">;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.6
</li></ul>
<h3> <span class="mw-headline" id="ProvideValidXPathExpressionRule"> ProvideValidXPathExpressionRule </span></h3>
<p>This rule verifies that valid XPath expression strings are passed as arguments. 
</p><p><b>Bad</b> example (node selection):
</p>
<pre class="csharp" style="font-family:monospace;">XmlNodeList nodes <span style="color: #008000;">=</span> document<span style="color: #008000;">.</span><span style="color: #0000FF;">SelectNodes</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;/book[@npages == 100]/@title&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p><b>Good</b> example (node selection):
</p>
<pre class="csharp" style="font-family:monospace;">XmlNodeList nodes <span style="color: #008000;">=</span> document<span style="color: #008000;">.</span><span style="color: #0000FF;">SelectNodes</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;/book[@npages = 100]/@title&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p><b>Bad</b> example (expression compilation):
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">var</span> xpath <span style="color: #008000;">=</span> XPathExpression<span style="color: #008000;">.</span><span style="color: #0000FF;">Compile</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;/book[@npages == 100]/@title&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p><b>Good</b> example (expression compilation):
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">var</span> xpath <span style="color: #008000;">=</span> XPathExpression<span style="color: #008000;">.</span><span style="color: #0000FF;">Compile</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;/book[@npages = 100]/@title&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.6
</li></ul>
<h3> <span class="mw-headline" id="ReviewCastOnIntegerDivisionRule"> ReviewCastOnIntegerDivisionRule </span></h3>
<p>This rule checks for integral divisions where the result is cast to a floating point type. It's usually best to instead cast an operand to the floating point type so that the result is not truncated. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">double</span> Bad <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> a, <span style="color: #6666cc; font-weight: bold;">int</span> b<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #008080; font-style: italic;">// integers are divided, then the result is casted into a double</span>
    <span style="color: #008080; font-style: italic;">// i.e. Bad (5, 2) == 2.0d</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> a <span style="color: #008000;">/</span> b<span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">double</span> Good <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> a, <span style="color: #6666cc; font-weight: bold;">int</span> b<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #008080; font-style: italic;">// a double is divided by an integer, which result in a double result</span>
    <span style="color: #008080; font-style: italic;">// i.e. Good (5, 2) == 2.5d</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">double</span><span style="color: #008000;">&#41;</span> a <span style="color: #008000;">/</span> b<span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.2
</li></ul>
<h3> <span class="mw-headline" id="ReviewCastOnIntegerMultiplicationRule"> ReviewCastOnIntegerMultiplicationRule </span></h3>
<p>This rule checks for integral multiply operations where the result is cast to a larger integral type. It's safer instead to cast an operand to the larger type to minimize the chance of overflow. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">long</span> Bad <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> a, <span style="color: #6666cc; font-weight: bold;">int</span> b<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #008080; font-style: italic;">// e.g. Bad (Int32.MaxInt, Int32.MaxInt) == 1</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> a <span style="color: #008000;">*</span> b<span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">long</span> Good <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> a, <span style="color: #6666cc; font-weight: bold;">int</span> b<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #008080; font-style: italic;">// e.g. Good (Int32.MaxInt, Int32.MaxInt) == 4611686014132420609</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">long</span><span style="color: #008000;">&#41;</span> a <span style="color: #008000;">*</span> b<span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.2
</li></ul>
<h3> <span class="mw-headline" id="ReviewDoubleAssignmentRule"> ReviewDoubleAssignmentRule </span></h3>
<p>This rule checks for variables or fields that are assigned multiple times using the same value. This won't change the value of the variable (or fields) but should be reviewed since it could be a typo that hides a real issue in the code. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> Bad <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #6666cc; font-weight: bold;">int</span> x, y<span style="color: #008000;">;</span>
&#160;
    <span style="color: #0600FF; font-weight: bold;">public</span> Bad <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        <span style="color: #008080; font-style: italic;">// x is assigned twice, but y is not assigned</span>
        x <span style="color: #008000;">=</span> x <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> Good <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #6666cc; font-weight: bold;">int</span> x, y<span style="color: #008000;">;</span>
&#160;
    <span style="color: #0600FF; font-weight: bold;">public</span> Good <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        <span style="color: #008080; font-style: italic;">// x = y = value; was the original meaning but since it's confusing...</span>
        x <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">;</span>
        y <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.0
</li></ul>
<h3> <span class="mw-headline" id="ReviewInconsistentIdentityRule"> ReviewInconsistentIdentityRule </span></h3>
<p>This rule checks to see if a type manages its identity in a consistent way. It checks: 
</p>
<ul><li> Equals methods, relational operators and <b>CompareTo</b> must either use the same set of fields and properties or call a helper method.
</li><li> <b>GetHashCode</b> must use the same or a subset of the fields used by the equality methods or call a helper method.
</li><li> <b>Clone</b> must use the same or a superset of the fields used by the equality methods or call a helper method.
</li></ul>
<p><br />
<b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.4
</li></ul>
<h3> <span class="mw-headline" id="ReviewSelfAssignmentRule"> ReviewSelfAssignmentRule </span></h3>
<p>This rule checks for variables or fields that are assigned to themselves. This won't change the value of the variable (or fields) but should be reviewed since it could be a typo that hides a real issue in the code. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> Bad <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #6666cc; font-weight: bold;">int</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">;</span>
&#160;
    <span style="color: #0600FF; font-weight: bold;">public</span> Bad <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        <span style="color: #008080; font-style: italic;">// argument is assigned to itself, this.value is unchanged</span>
        <span style="color: #0600FF; font-weight: bold;">value</span> <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> Good <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #6666cc; font-weight: bold;">int</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">;</span>
&#160;
    <span style="color: #0600FF; font-weight: bold;">public</span> Good <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">this</span><span style="color: #008000;">.</span><span style="color: #0600FF; font-weight: bold;">value</span> <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.0
</li></ul>
<h3> <span class="mw-headline" id="ReviewUselessControlFlowRule"> ReviewUselessControlFlowRule </span></h3>
<p>This rule checks for empty blocks that produce useless control flow inside IL. This usually occurs when a block is left incomplete or when a typo is made. 
</p><p><b>Bad</b> example (empty):
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>x <span style="color: #008000;">==</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
    <span style="color: #008080; font-style: italic;">// TODO - ever seen such a thing&#160;?&#160;;-)</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Bad</b> example (typo):
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>x <span style="color: #008000;">==</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span> <span style="color: #008000;">&#123;</span>
    Console<span style="color: #008000;">.</span><span style="color: #0000FF;">WriteLine</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;always printed&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>x <span style="color: #008000;">==</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
    Console<span style="color: #008000;">.</span><span style="color: #0000FF;">WriteLine</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;printed only if x == 0&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.0
</li></ul>
<h3> <span class="mw-headline" id="ReviewUseOfInt64BitsToDoubleRule"> ReviewUseOfInt64BitsToDoubleRule </span></h3>
<p>This rule checks for invalid integer to double conversion using the, confusingly named, <b>BitConverter.Int64BitsToDouble</b> method. This method converts the actual bits, i.e. not the value, into a <b>Double</b>. The rule will warn when anything other than an <b>Int64</b> is being used as a parameter to this method. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">double</span> GetRadians <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> degrees<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> BitConverter<span style="color: #008000;">.</span><span style="color: #0000FF;">Int64BitsToDouble</span> <span style="color: #008000;">&#40;</span>degrees<span style="color: #008000;">&#41;</span> <span style="color: #008000;">*</span> Math<span style="color: #008000;">.</span><span style="color: #0000FF;">PI</span> <span style="color: #008000;">/</span> 180<span style="color: #008000;">.</span>0d<span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">double</span> GetRadians <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> degree<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> degrees <span style="color: #008000;">*</span> Math<span style="color: #008000;">.</span><span style="color: #0000FF;">PI</span> <span style="color: #008000;">/</span> 180<span style="color: #008000;">.</span>0d<span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.0
</li></ul>
<h3> <span class="mw-headline" id="ReviewUseOfModuloOneOnIntegersRule"> ReviewUseOfModuloOneOnIntegersRule </span></h3>
<p>This rule checks for a modulo one (1) operation on an integral type. This is most likely a typo since the result is always 0. This usually happen when someone confuses a bitwise operation with a remainder. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">bool</span> IsOdd <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> i<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#40;</span>i <span style="color: #008000;">%</span> <span style="color: #FF0000;">1</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">==</span> <span style="color: #FF0000;">1</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">bool</span> IsOdd <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> i<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#40;</span>i <span style="color: #008000;">%</span> <span style="color: #FF0000;">2</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">!=</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span> <span style="color: #008080; font-style: italic;">// or ((x &amp; 1) == 1)</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.0
</li></ul>
<h3> <span class="mw-headline" id="UseValueInPropertySetterRule"> UseValueInPropertySetterRule </span></h3>
<p>This rule ensures all setter properties uses the value argument passed to the property. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">bool</span> Active <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">get</span> <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> active<span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
    <span style="color: #008080; font-style: italic;">// this can take a long time to figure out if the default value for active</span>
    <span style="color: #008080; font-style: italic;">// is false (since most people will use the property to set it to true)</span>
    <span style="color: #0600FF; font-weight: bold;">set</span> <span style="color: #008000;">&#123;</span>
        active <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">bool</span> Active <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">get</span> <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> active<span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
    <span style="color: #0600FF; font-weight: bold;">set</span> <span style="color: #008000;">&#123;</span>
        active <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><br />
</p>
<h1> <span class="mw-headline" id="Feedback"> Feedback </span></h1>
<p>Please report any documentation errors, typos or suggestions to the 
<a href="http://groups.google.com/group/gendarme" class="external text" rel="nofollow">Gendarme Google Group</a>. Thanks!
</p>
