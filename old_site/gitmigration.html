---
layout: obsolete
title: "GitMigration"
permalink: /old_site/GitMigration/
redirect_from:
  - /GitMigration/
---

<h1>GitMigration</h1>

<p>A page to keep track of the requirements to do the SVN to GIT migration:
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Table of contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Timeline"><span class="tocnumber">1</span> <span class="toctext">Timeline</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Discussion_Topics"><span class="tocnumber">2</span> <span class="toctext">Discussion Topics</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Modules"><span class="tocnumber">2.1</span> <span class="toctext">Modules</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#Proposal_1_.5Bjonp.5D"><span class="tocnumber">2.1.1</span> <span class="toctext">Proposal 1 [jonp]</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-5"><a href="#Action:_Moving_mcs_into_mono"><span class="tocnumber">2.2</span> <span class="toctext">Action: Moving mcs into mono</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Branches"><span class="tocnumber">2.3</span> <span class="toctext">Branches</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Policies"><span class="tocnumber">2.4</span> <span class="toctext">Policies</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#History"><span class="tocnumber">2.5</span> <span class="toctext">History</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#GitHub"><span class="tocnumber">2.6</span> <span class="toctext">GitHub</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#MonoDevelop"><span class="tocnumber">2.7</span> <span class="toctext">MonoDevelop</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#Testing"><span class="tocnumber">3</span> <span class="toctext">Testing</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="#Other_Dependencies"><span class="tocnumber">4</span> <span class="toctext">Other Dependencies</span></a></li>
</ul>
</td></tr></table>
<h1> <span class="mw-headline" id="Timeline"> Timeline </span></h1>
<p>To do the migration, we need to come up with a migration plan and address the points in the "Discussion Topics" and "Testing" parts of this document.
</p><p>We could start the migration after the 2.6 release goes out.
</p>
<h1> <span class="mw-headline" id="Discussion_Topics"> Discussion Topics </span></h1>
<h2> <span class="mw-headline" id="Modules"> Modules </span></h2>
<p>Should we split the jumbo SVN repository into separate GIT, self-contained modules?
</p><p>There are certain components that probably need to be kept in sync for the sake of the branches (like mono-2-6/{mono,mcs,libgdiplus,mod_mono,xsp}).
</p><p>Detail what the toplevel modules will be here.
</p><p>git becomes slow with huge repositories, like the current mcs module.
</p>
<h3> <span class="mw-headline" id="Proposal_1_.5Bjonp.5D"> Proposal 1 [jonp] </span></h3>
<p>Since we're moving mcs into mono, perhaps we should restrict the directories in mcs/class (now mono/class?  or mono/mcs/class?) to those that:
</p>
<ol><li> Are tied to mono via internal calls and P/Invoke (which would thus require mscorlib.dll, System.dll, System.Net, System.Configuration, Mono.Security, Mono.WebBrowser, Mono.Posix.dll, CustomMarshalers, etc.)
</li><li> Are dependencies of the above (which would pull in System.Xml for System.dll, etc.)
</li><li> Are required by mcs/tools (assuming we want to keep all of the mcs/tools in the combined repo).  I know that for "circular dependency" reasons I would want to keep mdoc, monodoc, and xbuild in the combined tree (so that Documentation can continue to be kept in-tree, as is currently the case, and xbuild because, in an ideal/mythical world, the modules depending on the combined mono module would use xbuild for building).
</li><li> Otherwise desired (System.Core?, System.Xml.Linq?)
</li></ol>
<p>Outside of this list (i.e. mcs/class/* directories not referenced by the above) would include System.Data and related DB provider code, Mono.C5, Mono.Cairo, Mono.GetOptions (unless it's a dep for some tool), System.Design, System.DirectoryServices*, System.Drawing, etc., etc.
</p><p>Does this actually make sense?  Maybe.  Problem is, I don't know the entire dependency graph -- where should System.Dynamic, System.Numerics, or System.ServiceModel go?  System.Web?
</p><p>[grendel] How would it work regarding history splitting? Is there a way to copy e.g. System.Web's history only to a separate git module?
</p><p>[alan] What exactly do you mean? I think we have two options:
</p>
<ul><li> Before migrating to git we do all our reorganising in SVN using "svn mv". This will keep history intact as we shuffle everything.
</li><li> After migrating to git we use some "git mv"s (or equivalent) and shuffle everything around there.
</li><li> I don't think it's possible to move module source/trunk/x/y in svn to source/trunk/x_y in git directly. We might be able to do it that way by importing modules one by one from SVN, but that might be overly complex. 
</li></ul>
<p>Regardless, the above might suggest the minimum modules:
</p>
<ul><li> mono
</li><li> mono-data (System.Data, ADO.NET providers, etc.)
</li><li> mono-web (System.Web, etc.)
</li><li> mono-core (System.* &amp; related assemblies not in mono?)
</li><li> mono-obsolete (Mono.GetOptions, anything else we'd like to jettison)
</li></ul>
<h2> <span class="mw-headline" id="Action:_Moving_mcs_into_mono"> Action: Moving mcs into mono </span></h2>
<p>We have had this discussion already, and other than "it is going to cost someone a new checkout" there have been no good reasons to not move "mcs" into the "mono" directory.   Let us just do that in preparation for the move.
</p><p>It would be nice to split mcs into core stuff + extra stuff, and only move the
core stuff to mono.
</p>
<h2> <span class="mw-headline" id="Branches"> Branches </span></h2>
<p>How do we keep track of all the branches that we need?
</p><p>Does Gonzalo script actually pull all the branches, and is that enough?
-&gt; Need feedback from QA/Release Engineering.
</p><p>Check out the <a href="http://repo.or.cz/w/mcs.git" class="external text" rel="nofollow">mcs git-svn repo </a>. There's also mono, xsp, monodevelop and mod_mono.
</p>
<h2> <span class="mw-headline" id="Policies"> Policies </span></h2>
<p>QA/Release Engineering team:
</p><p>We need to describe what our policies will become for branching and tagging releases when using GIT.
</p><p>We need to come up with an updated document or rules for how we will use branches in GIT. 
</p>
<h2> <span class="mw-headline" id="History"> History </span></h2>
<p>Is there any mapping between the rXXXXX that we have been using over the years to what GIT uses?
</p><p>git-svn stores it in the git commit messages:
</p><p>git-svn-id: svn+ssh://mono-cvs.ximian.com/source/trunk/mono@147662 e3ebcda4-bce8-0310-ba0a-eca2169e7518
</p>
<h2> <span class="mw-headline" id="GitHub"> GitHub </span></h2>
<p>It would be nice to have a presence on github/gitorius, so people could fork 
our repo, post merge requests, use the extensive functionality like version trees, view source etc.
</p>
<h2> <span class="mw-headline" id="MonoDevelop"> MonoDevelop </span></h2>
<p>We'll need a MonoDevelop add-in for Git. Several team members are using the current SVN add-in as a regular basis so we need to provide a Git add-in to avoid workflow disruptions.
</p>
<h1> <span class="mw-headline" id="Testing"> Testing </span></h1>
<p>Currently Gonzalo publishes SVN to GIT and publishes it at XXXX, we need to test this out for more than trunk development, we need release engineering/QA to give the go ahead that using the export as provided is all that we need.
</p><p>We need to determine a timeline for testing.
</p>
<h1> <span class="mw-headline" id="Other_Dependencies"> Other Dependencies </span></h1>
<ul><li> Keep <a href="http://lists.ximian.com/pipermail/mono-patches" class="external free" rel="nofollow">http://lists.ximian.com/pipermail/mono-patches</a> working
</li><li> Keep <a href="http://groups.google.com/group/mono-svn-patches" class="external free" rel="nofollow">http://groups.google.com/group/mono-svn-patches</a> working
</li><li> Keep <a href="http://cia.vc/stats/project/mono" class="external free" rel="nofollow">http://cia.vc/stats/project/mono</a> working
</li><li> Keep <a href="http://www.ohloh.net/p/mono" class="external free" rel="nofollow">http://www.ohloh.net/p/mono</a> working
</li><li> Keep <a href="http://build.mono-project.com/" class="external free" rel="nofollow">http://build.mono-project.com/</a> working
</li></ul>

