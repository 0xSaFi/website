---
layout: obsolete
title: "Gendarme.Rules.Design.Generic"
permalink: /old_site/Gendarme.Rules.Design.Generic/
---

<h1>Gendarme.Rules.Design.Generic</h1>

<p><a href="{{site.baseurl}}/Gendarme" title="Gendarme">Gendarme</a>'s rules about generic-related design issues are located in the <b>Gendarme.Rules.Design.Generic.dll</b> assembly.
Latest sources are available from 
<a href="http://anonsvn.mono-project.com/viewcvs/trunk/mono-tools/gendarme/rules/Gendarme.Rules.Design.Generic/" class="external text" rel="nofollow">anonymous SVN</a>.
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Rules"><span class="tocnumber">1</span> <span class="toctext">Rules</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#AvoidMethodWithUnusedGenericTypeRule"><span class="tocnumber">1.1</span> <span class="toctext">AvoidMethodWithUnusedGenericTypeRule</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#DoNotExposeNestedGenericSignaturesRule"><span class="tocnumber">1.2</span> <span class="toctext">DoNotExposeNestedGenericSignaturesRule</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#ImplementGenericCollectionInterfacesRule"><span class="tocnumber">1.3</span> <span class="toctext">ImplementGenericCollectionInterfacesRule</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#PreferGenericsOverRefObjectRule"><span class="tocnumber">1.4</span> <span class="toctext">PreferGenericsOverRefObjectRule</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#UseGenericEventHandlerRule"><span class="tocnumber">1.5</span> <span class="toctext">UseGenericEventHandlerRule</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Feedback"><span class="tocnumber">2</span> <span class="toctext">Feedback</span></a></li>
</ul>
</td></tr></table>
<h1> <span class="mw-headline" id="Rules"> Rules </span></h1>
<h3> <span class="mw-headline" id="AvoidMethodWithUnusedGenericTypeRule"> AvoidMethodWithUnusedGenericTypeRule </span></h3>
<p>This method will fire if a generic method does not use all of its generic type parameters in the formal parameter list. This usually means that either the type parameter is not used at all in which case it should be removed or that it's used only for the return type which is problematic because that prevents the compiler from inferring the generic type when the method is called which is confusing to many developers. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> Bad <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">string</span> ToString<span style="color: #008000;">&lt;</span>T<span style="color: #008000;">&gt;</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> <a href="http://www.google.com/search?q=typeof+msdn.microsoft.com"><span style="color: #008000;">typeof</span></a> <span style="color: #008000;">&#40;</span>T<span style="color: #008000;">&#41;</span><span style="color: #008000;">.</span><span style="color: #0000FF;">ToString</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
&#160;
    <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">void</span> Main <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        <span style="color: #008080; font-style: italic;">// the compiler can't infer int so we need to supply it ourselves</span>
        Console<span style="color: #008000;">.</span><span style="color: #0000FF;">WriteLine</span> <span style="color: #008000;">&#40;</span>ToString<span style="color: #008000;">&lt;</span><span style="color: #6666cc; font-weight: bold;">int</span><span style="color: #008000;">&gt;</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> Good <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">string</span> ToString<span style="color: #008000;">&lt;</span>T<span style="color: #008000;">&gt;</span> <span style="color: #008000;">&#40;</span>T obj<span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> obj<span style="color: #008000;">.</span><span style="color: #0000FF;">GetType</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">.</span><span style="color: #0000FF;">ToString</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
&#160;
    <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">void</span> Main <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        Console<span style="color: #008000;">.</span><span style="color: #0000FF;">WriteLine</span> <span style="color: #008000;">&#40;</span>ToString <span style="color: #008000;">&#40;</span><span style="color: #FF0000;">2</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.2
</li></ul>
<h3> <span class="mw-headline" id="DoNotExposeNestedGenericSignaturesRule"> DoNotExposeNestedGenericSignaturesRule </span></h3>
<p>This rule will fire if an externally visible method has a parameter or return type whose type is a generic type which contains a generic type. For example, <b>List&lt;List&lt;int&gt;&gt;</b>. Such types are hard to construct and should be avoided because simpler alternatives generally exist. Since some language, like C#, have direct support for nullable types, i.e. <b>Nullable&lt;T&gt;</b> this specific case is ignored by the rule. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> Generic<span style="color: #008000;">&lt;</span>T<span style="color: #008000;">&gt;</span> <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> Process <span style="color: #008000;">&#40;</span>KeyValuePair<span style="color: #008000;">&lt;</span>T, ICollection<span style="color: #008000;">&lt;</span><span style="color: #6666cc; font-weight: bold;">int</span><span style="color: #008000;">&gt;&gt;</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> Generic<span style="color: #008000;">&lt;</span>T<span style="color: #008000;">&gt;</span> <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> Process <span style="color: #008000;">&#40;</span>KeyValuePair<span style="color: #008000;">&lt;</span>T, <span style="color: #6666cc; font-weight: bold;">int</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span><span style="color: #008000;">&gt;</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.4
</li></ul>
<h3> <span class="mw-headline" id="ImplementGenericCollectionInterfacesRule"> ImplementGenericCollectionInterfacesRule </span></h3>
<p>This rule checks for types which implement the non-generic IEnumerable interface but not the IEnumerable&lt;T&gt; interface. Implementing the generic version of IEnumerable avoids casts, and possibly boxing, when iterating the collection. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> IntEnumerable <span style="color: #008000;">:</span> IEnumerable <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">public</span> IEnumerator GetEnumerator <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> IntEnumerable <span style="color: #008000;">:</span> IEnumerable<span style="color: #008000;">&lt;</span><span style="color: #6666cc; font-weight: bold;">int</span><span style="color: #008000;">&gt;</span> <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">public</span> IEnumerator<span style="color: #008000;">&lt;</span><span style="color: #6666cc; font-weight: bold;">int</span><span style="color: #008000;">&gt;</span> GetEnumerator <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
    <span style="color: #008000;">&#125;</span>
&#160;
    IEnumerator IEnumerable<span style="color: #008000;">.</span><span style="color: #0000FF;">GetEnumerator</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> Before Gendarme 2.2 this rule was part of Gendarme.Rules.Design assembly.
</li></ul>
<h3> <span class="mw-headline" id="PreferGenericsOverRefObjectRule"> PreferGenericsOverRefObjectRule </span></h3>
<p>This rule fires if a method has a reference argument (<b>ref</b> or <b>out</b> in C#) to System.Object. These methods can generally be rewritten in .NET 2.0 using generics which provides type safety, eliminates casts, and makes the API easier to consume. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #008080; font-style: italic;">// common before 2.0 but we can do better now</span>
<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">bool</span> TryGetValue <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> key, <span style="color: #0600FF; font-weight: bold;">ref</span> <span style="color: #6666cc; font-weight: bold;">object</span> <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #008080; font-style: italic;">// ...</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">bool</span> TryGetValue<span style="color: #008000;">&lt;</span>T<span style="color: #008000;">&gt;</span> <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> key, <span style="color: #0600FF; font-weight: bold;">ref</span> T <span style="color: #0600FF; font-weight: bold;">value</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #008080; font-style: italic;">// ...</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.2
</li></ul>
<h3> <span class="mw-headline" id="UseGenericEventHandlerRule"> UseGenericEventHandlerRule </span></h3>
<p>This rule fires if an assembly targets .NET 2.0 or later and defines a delegate which can be replaced by <b>System.EventHandler&lt;TEventArgs&gt;</b>. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">delegate</span> <span style="color: #6666cc; font-weight: bold;">void</span> AuthenticityHandler <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">object</span> sender, AuthenticityEventArgs e<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&#160;
<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">event</span> AuthenticityHandler CheckingAuthenticity<span style="color: #008000;">;</span>
<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">event</span> AuthenticityHandler CheckedAuthenticity<span style="color: #008000;">;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">event</span> EventHandler<span style="color: #008000;">&lt;</span>AuthenticityEventArgs<span style="color: #008000;">&gt;</span> CheckingAuthenticity<span style="color: #008000;">;</span>
<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">event</span> EventHandler<span style="color: #008000;">&lt;</span>AuthenticityEventArgs<span style="color: #008000;">&gt;</span> CheckedAuthenticity<span style="color: #008000;">;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.2
</li></ul>
<h1> <span class="mw-headline" id="Feedback"> Feedback </span></h1>
<p>Please report any documentation errors, typos or suggestions to the 
<a href="http://groups.google.com/group/gendarme" class="external text" rel="nofollow">Gendarme Google Group</a>. Thanks!
</p>
