---
layout: obsolete
title: "Gendarme.Rules.BadPractice"
permalink: /old_site/Gendarme.Rules.BadPractice/
redirect_from:
  - /Gendarme.Rules.BadPractice/
---

<h1>Gendarme.Rules.BadPractice</h1>

<p><a href="{{site.github.url}}/old_site/Gendarme" title="Gendarme">Gendarme</a>'s rules that check for bad practices are located in the <b>Gendarme.Rules.BadPractice.dll</b> assembly.
Latest sources are available from 
<a href="http://anonsvn.mono-project.com/viewcvs/trunk/mono-tools/gendarme/rules/Gendarme.Rules.BadPractice/" class="external text" rel="nofollow">anonymous SVN</a>.
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Rules"><span class="tocnumber">1</span> <span class="toctext">Rules</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#AvoidAssemblyVersionMismatchRule"><span class="tocnumber">1.1</span> <span class="toctext">AvoidAssemblyVersionMismatchRule</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#AvoidCallingProblematicMethodsRule"><span class="tocnumber">1.2</span> <span class="toctext">AvoidCallingProblematicMethodsRule</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#AvoidVisibleConstantFieldRule"><span class="tocnumber">1.3</span> <span class="toctext">AvoidVisibleConstantFieldRule</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#CheckNewExceptionWithoutThrowingRule"><span class="tocnumber">1.4</span> <span class="toctext">CheckNewExceptionWithoutThrowingRule</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#CheckNewThreadWithoutStartRule"><span class="tocnumber">1.5</span> <span class="toctext">CheckNewThreadWithoutStartRule</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#CloneMethodShouldNotReturnNullRule"><span class="tocnumber">1.6</span> <span class="toctext">CloneMethodShouldNotReturnNullRule</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#ConstructorShouldNotCallVirtualMethodsRule"><span class="tocnumber">1.7</span> <span class="toctext">ConstructorShouldNotCallVirtualMethodsRule</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#DisableDebuggingCodeRule"><span class="tocnumber">1.8</span> <span class="toctext">DisableDebuggingCodeRule</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#DoNotForgetNotImplementedMethodsRule"><span class="tocnumber">1.9</span> <span class="toctext">DoNotForgetNotImplementedMethodsRule</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#DoNotUseEnumIsAssignableFromRule"><span class="tocnumber">1.10</span> <span class="toctext">DoNotUseEnumIsAssignableFromRule</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#DoNotUseGetInterfaceToCheckAssignabilityRule"><span class="tocnumber">1.11</span> <span class="toctext">DoNotUseGetInterfaceToCheckAssignabilityRule</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#EqualsShouldHandleNullArgRule"><span class="tocnumber">1.12</span> <span class="toctext">EqualsShouldHandleNullArgRule</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#GetEntryAssemblyMayReturnNullRule"><span class="tocnumber">1.13</span> <span class="toctext">GetEntryAssemblyMayReturnNullRule</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#ObsoleteMessagesShouldNotBeEmptyRule"><span class="tocnumber">1.14</span> <span class="toctext">ObsoleteMessagesShouldNotBeEmptyRule</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#OnlyUseDisposeForIDisposableTypesRule"><span class="tocnumber">1.15</span> <span class="toctext">OnlyUseDisposeForIDisposableTypesRule</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#PreferEmptyInstanceOverNullRule"><span class="tocnumber">1.16</span> <span class="toctext">PreferEmptyInstanceOverNullRule</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#PreferSafeHandleRule"><span class="tocnumber">1.17</span> <span class="toctext">PreferSafeHandleRule</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#ReplaceIncompleteOddnessCheckRule"><span class="tocnumber">1.18</span> <span class="toctext">ReplaceIncompleteOddnessCheckRule</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#ToStringShouldNotReturnNullRule"><span class="tocnumber">1.19</span> <span class="toctext">ToStringShouldNotReturnNullRule</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-21"><a href="#Feedback"><span class="tocnumber">2</span> <span class="toctext">Feedback</span></a></li>
</ul>
</td></tr></table>
<h1> <span class="mw-headline" id="Rules"> Rules </span></h1>
<h3> <span class="mw-headline" id="AvoidAssemblyVersionMismatchRule"> AvoidAssemblyVersionMismatchRule </span></h3>
<p>This rule checks that the <b>[AssemblyVersion]</b> matches the <b>[AssemblyFileVersion]</b> when both are present inside an assembly. Having different version numbers in both attributes can be confusing once the application is deployed. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #008000;">&#91;</span>assembly<span style="color: #008000;">:</span> AssemblyVersion <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;2.2.0.0&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span>
<span style="color: #008000;">&#91;</span>assembly<span style="color: #008000;">:</span> AssemblyFileVersion <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;1.0.0.0&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #008000;">&#91;</span>assembly<span style="color: #008000;">:</span> AssemblyVersion <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;2.2.0.0&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span>
<span style="color: #008000;">&#91;</span>assembly<span style="color: #008000;">:</span> AssemblyFileVersion <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;2.2.0.0&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.2
</li></ul>
<h3> <span class="mw-headline" id="AvoidCallingProblematicMethodsRule"> AvoidCallingProblematicMethodsRule </span></h3>
<p>This rule warns about methods that calls into potentially dangerous API of the .NET framework. If possible try to avoid the API (there are generally safer ways to do the same) or at least make sure your code can be safely called from others. 
</p>
<ul><li> <b>System.GC::Collect()</b>
</li><li> <b>System.Threading.Thread::Suspend()</b> and <b>Resume()</b>
</li><li> <b>System.Runtime.InteropServices.SafeHandle::DangerousGetHandle()</b>
</li><li> <b>System.Reflection.Assembly::LoadFrom()</b>, <b>LoadFile()</b> and <b>LoadWithPartialName()</b>
</li><li> <b>System.Type::InvokeMember()</b> when used with <b>BindingFlags.NonPublic</b>
</li></ul>
<p><br />
<b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> Load <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> filename<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    Assembly a <span style="color: #008000;">=</span> Assembly<span style="color: #008000;">.</span><span style="color: #0000FF;">LoadFile</span> <span style="color: #008000;">&#40;</span>filename<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008080; font-style: italic;">// ...</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> Load <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> filename<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    AssemblyName aname <span style="color: #008000;">=</span> AssemblyName<span style="color: #008000;">.</span><span style="color: #0000FF;">GetAssemblyName</span> <span style="color: #008000;">&#40;</span>filename<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008080; font-style: italic;">// ensure it's the assembly you expect (e.g. public key, version...)</span>
    Assembly a <span style="color: #008000;">=</span> Assembly<span style="color: #008000;">.</span><span style="color: #0000FF;">Load</span> <span style="color: #008000;">&#40;</span>aname<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008080; font-style: italic;">// ...</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.0
</li></ul>
<h3> <span class="mw-headline" id="AvoidVisibleConstantFieldRule"> AvoidVisibleConstantFieldRule </span></h3>
<p>This rule looks for constant fields which are visible outside the current assembly. Such fields, if used outside the assemblies, will have their value (not the field reference) copied into the other assembly. Changing the field's value requires that all assemblies which use the field to be recompiled. Declaring the field as <b>static readonly</b>, on the other hand, allows the value to be changed without requiring that client assemblies be recompiled. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #008080; font-style: italic;">// if this fields is used inside another assembly then</span>
<span style="color: #008080; font-style: italic;">// the integer 42, not the field, will be baked into it</span>
<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">const</span> <span style="color: #6666cc; font-weight: bold;">int</span> MagicNumber <span style="color: #008000;">=</span> <span style="color: #FF0000;">42</span><span style="color: #008000;">;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #008080; font-style: italic;">// if this field is used inside another assembly then</span>
<span style="color: #008080; font-style: italic;">// that assembly will reference the field instead of</span>
<span style="color: #008080; font-style: italic;">// embedding the value</span>
<span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">readonly</span> <span style="color: #6666cc; font-weight: bold;">int</span> MagicNumber <span style="color: #008000;">=</span> <span style="color: #FF0000;">42</span><span style="color: #008000;">;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.0
</li></ul>
<h3> <span class="mw-headline" id="CheckNewExceptionWithoutThrowingRule"> CheckNewExceptionWithoutThrowingRule </span></h3>
<p>This rule checks for exception objects which are created but not thrown, not returned, and not passed to another method as an argument. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #6666cc; font-weight: bold;">void</span> MissingThrow <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">object</span> arg<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>arg <span style="color: #008000;">==</span> <span style="color: #0600FF; font-weight: bold;">null</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
        <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> ArgumentNullException <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;arg&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
    DoWork <span style="color: #008000;">&#40;</span>arg<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> examples:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #6666cc; font-weight: bold;">void</span> <span style="color: #0600FF; font-weight: bold;">Throw</span> <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">object</span> arg<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>arg <span style="color: #008000;">==</span> <span style="color: #0600FF; font-weight: bold;">null</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">throw</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> ArgumentNullException <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;arg&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
    DoWork <span style="color: #008000;">&#40;</span>arg<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span>
&#160;
Exception CreateException <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> Exception <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><br />
</p>
<h3> <span class="mw-headline" id="CheckNewThreadWithoutStartRule"> CheckNewThreadWithoutStartRule </span></h3>
<p>This rule checks for threads which are created but not started, or returned or passed to another method as an argument. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #6666cc; font-weight: bold;">void</span> UnusedThread <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    Thread thread <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> Thread <span style="color: #008000;">&#40;</span>threadStart<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    thread<span style="color: #008000;">.</span><span style="color: #0000FF;">Name</span> <span style="color: #008000;">=</span> <span style="color: #666666;">&quot;Thread 1&quot;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> examples:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #6666cc; font-weight: bold;">void</span> Start <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    Thread thread <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> Thread <span style="color: #008000;">&#40;</span>threadStart<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    thread<span style="color: #008000;">.</span><span style="color: #0000FF;">Name</span> <span style="color: #008000;">=</span> <span style="color: #666666;">&quot;Thread 1&quot;</span><span style="color: #008000;">;</span>
    thread<span style="color: #008000;">.</span><span style="color: #0000FF;">Start</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span>
&#160;
Thread InitializeThread <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    Thread thread <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> Thread <span style="color: #008000;">&#40;</span>threadStart<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    thread<span style="color: #008000;">.</span><span style="color: #0000FF;">Name</span> <span style="color: #008000;">=</span> <span style="color: #666666;">&quot;Thread 1&quot;</span><span style="color: #008000;">;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> thread<span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><br />
</p>
<h3> <span class="mw-headline" id="CloneMethodShouldNotReturnNullRule"> CloneMethodShouldNotReturnNullRule </span></h3>
<p>This rule checks for <b>Clone()</b> methods which return <b>null</b>. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> MyClass <span style="color: #008000;">:</span> ICloneable <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">object</span> Clone <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        MyClass myClass <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> MyClass <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #008080; font-style: italic;">// set some internals</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">null</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> MyClass <span style="color: #008000;">:</span> ICloneable <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">object</span> Clone <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        MyClass myClass <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> MyClass <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #008080; font-style: italic;">// set some internals</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> myClass<span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><br />
</p>
<h3> <span class="mw-headline" id="ConstructorShouldNotCallVirtualMethodsRule"> ConstructorShouldNotCallVirtualMethodsRule </span></h3>
<p>This rule warns the developer if any virtual methods are called in the constructor of a non-sealed type. The problem is that if a derived class overrides the method then that method will be called before the derived constructor has had a chance to run. This makes the code quite fragile. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #6666cc; font-weight: bold;">class</span> A <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">public</span> A <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">this</span><span style="color: #008000;">.</span><span style="color: #0000FF;">DoSomething</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
&#160;
    <span style="color: #0600FF; font-weight: bold;">protected</span> <span style="color: #0600FF; font-weight: bold;">virtual</span> <span style="color: #6666cc; font-weight: bold;">void</span> DoSomething <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span>
&#160;
<span style="color: #6666cc; font-weight: bold;">class</span> B <span style="color: #008000;">:</span> A <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #6666cc; font-weight: bold;">int</span> x<span style="color: #008000;">;</span>
&#160;
    <span style="color: #0600FF; font-weight: bold;">public</span> B <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        x <span style="color: #008000;">=</span> <span style="color: #FF0000;">10</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
&#160;
    <span style="color: #0600FF; font-weight: bold;">protected</span> <span style="color: #0600FF; font-weight: bold;">override</span> <span style="color: #6666cc; font-weight: bold;">void</span> DoSomething <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        Console<span style="color: #008000;">.</span><span style="color: #0000FF;">WriteLine</span> <span style="color: #008000;">&#40;</span>x<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span>
&#160;
B b <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> B <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span> <span style="color: #008080; font-style: italic;">// outputs 0 because B's constructor hasn't been called yet</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #6666cc; font-weight: bold;">class</span> A <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> Run <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">this</span><span style="color: #008000;">.</span><span style="color: #0000FF;">DoSomething</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
&#160;
    <span style="color: #0600FF; font-weight: bold;">protected</span> <span style="color: #0600FF; font-weight: bold;">virtual</span> <span style="color: #6666cc; font-weight: bold;">void</span> DoSomething <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span>
&#160;
<span style="color: #6666cc; font-weight: bold;">class</span> B <span style="color: #008000;">:</span> A <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #6666cc; font-weight: bold;">int</span> x<span style="color: #008000;">;</span>
&#160;
    <span style="color: #0600FF; font-weight: bold;">public</span> B <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        x <span style="color: #008000;">=</span> <span style="color: #FF0000;">10</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
&#160;
    <span style="color: #0600FF; font-weight: bold;">protected</span> <span style="color: #0600FF; font-weight: bold;">override</span> <span style="color: #6666cc; font-weight: bold;">void</span> DoSomething <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        Console<span style="color: #008000;">.</span><span style="color: #0000FF;">WriteLine</span> <span style="color: #008000;">&#40;</span>x<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span>
&#160;
B b <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> B <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
b<span style="color: #008000;">.</span><span style="color: #0000FF;">Run</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span> <span style="color: #008080; font-style: italic;">// outputs 10 as intended</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.0
</li></ul>
<h3> <span class="mw-headline" id="DisableDebuggingCodeRule"> DisableDebuggingCodeRule </span></h3>
<p>This rule checks for non-console applications which contain calls to <b>Console.WriteLine</b>. These are often used as debugging aids but such code should be removed or disabled in the released version. If you don't want to remove it altogether you can place it inside a method decorated with <b>[Conditional ("DEBUG")]</b>, use <b>Debug.WriteLine</b>, use <b>Trace.WriteLine</b>, or use the preprocessor. But note that TRACE is often enabled in release builds so if you do use that you'll probably want to use a config file to remove the default trace listener. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GenerateKey <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> key <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #FF0000;">16</span><span style="color: #008000;">&#93;</span><span style="color: #008000;">;</span>
    rng<span style="color: #008000;">.</span><span style="color: #0000FF;">GetBytes</span> <span style="color: #008000;">&#40;</span>key<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    Console<span style="color: #008000;">.</span><span style="color: #0000FF;">WriteLine</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;debug key = {0}&quot;</span>, BitConverter<span style="color: #008000;">.</span><span style="color: #0000FF;">ToString</span> <span style="color: #008000;">&#40;</span>key<span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> key<span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example (removed):
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GenerateKey <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> key <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #FF0000;">16</span><span style="color: #008000;">&#93;</span><span style="color: #008000;">;</span>
    rng<span style="color: #008000;">.</span><span style="color: #0000FF;">GetBytes</span> <span style="color: #008000;">&#40;</span>key<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> key<span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example (changed):
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GenerateKey <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> key <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #FF0000;">16</span><span style="color: #008000;">&#93;</span><span style="color: #008000;">;</span>
    rng<span style="color: #008000;">.</span><span style="color: #0000FF;">GetBytes</span> <span style="color: #008000;">&#40;</span>key<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    Debug<span style="color: #008000;">.</span><span style="color: #0000FF;">WriteLine</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;debug key = {0}&quot;</span>, BitConverter<span style="color: #008000;">.</span><span style="color: #0000FF;">ToString</span> <span style="color: #008000;">&#40;</span>key<span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> key<span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.0
</li></ul>
<h3> <span class="mw-headline" id="DoNotForgetNotImplementedMethodsRule"> DoNotForgetNotImplementedMethodsRule </span></h3>
<p>This rule checks for short methods that throw a <b>System.NotImplementedException</b> exception. It's likely a method that has not yet been implemented and should not be forgotten by the developer before a release. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #6666cc; font-weight: bold;">void</span> Save <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">throw</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> NotImplementedException <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;pending final format&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.0
</li></ul>
<h3> <span class="mw-headline" id="DoNotUseEnumIsAssignableFromRule"> DoNotUseEnumIsAssignableFromRule </span></h3>
<p>This rule checks for calls to <b>typeof (Enum).IsAssignableFrom (type)</b> that can be simplified to <b>type.IsEnum</b>. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span><a href="http://www.google.com/search?q=typeof+msdn.microsoft.com"><span style="color: #008000;">typeof</span></a> <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">Enum</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">.</span><span style="color: #0000FF;">IsAssignableFrom</span> <span style="color: #008000;">&#40;</span>type<span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span>  <span style="color: #008000;">&#123;</span>
    <span style="color: #008080; font-style: italic;">// then the type is an enum</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>type<span style="color: #008000;">.</span><span style="color: #0000FF;">IsEnum</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
    <span style="color: #008080; font-style: italic;">// then the type is an enum.</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.6
</li></ul>
<h3> <span class="mw-headline" id="DoNotUseGetInterfaceToCheckAssignabilityRule"> DoNotUseGetInterfaceToCheckAssignabilityRule </span></h3>
<p>This rule checks for calls to <b>Type.GetInterface</b> that look like they query if a type is supported, i.e. the result is only used to compare against <b>null</b>. The problem is that only assembly qualified names uniquely identify a type so if you just use the interface name or even just the name and namespace you may get unexpected results. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>type<span style="color: #008000;">.</span><span style="color: #0000FF;">GetInterface</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;IConvertible&quot;</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">!=</span> <span style="color: #0600FF; font-weight: bold;">null</span><span style="color: #008000;">&#41;</span>  <span style="color: #008000;">&#123;</span>
    <span style="color: #008080; font-style: italic;">// then the type can be assigned to IConvertible</span>
    <span style="color: #008080; font-style: italic;">// but what if there is another IConvertible in there&#160;?!?</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span><a href="http://www.google.com/search?q=typeof+msdn.microsoft.com"><span style="color: #008000;">typeof</span></a> <span style="color: #008000;">&#40;</span>IConvertible<span style="color: #008000;">&#41;</span><span style="color: #008000;">.</span><span style="color: #0000FF;">IsAssignableFrom</span> <span style="color: #008000;">&#40;</span>type<span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span>  <span style="color: #008000;">&#123;</span>
    <span style="color: #008080; font-style: italic;">// then the type can be assigned to IConvertible</span>
    <span style="color: #008080; font-style: italic;">// without a doubt!</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.2
</li></ul>
<h3> <span class="mw-headline" id="EqualsShouldHandleNullArgRule"> EqualsShouldHandleNullArgRule </span></h3>
<p>This rule ensures that <b>Equals(object)</b> methods return <b>false</b> when the object parameter is <b>null</b>. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">bool</span> Equals <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">object</span> obj<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #008080; font-style: italic;">// this would throw a NullReferenceException instead of returning false</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> ToString <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Equals</span> <span style="color: #008000;">&#40;</span>obj<span style="color: #008000;">.</span><span style="color: #0000FF;">ToString</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">override</span> <span style="color: #6666cc; font-weight: bold;">bool</span> Equals <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">object</span> obj<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>obj <span style="color: #008000;">==</span> <span style="color: #0600FF; font-weight: bold;">null</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">false</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> ToString <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Equals</span> <span style="color: #008000;">&#40;</span>obj<span style="color: #008000;">.</span><span style="color: #0000FF;">ToString</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><br />
</p>
<h3> <span class="mw-headline" id="GetEntryAssemblyMayReturnNullRule"> GetEntryAssemblyMayReturnNullRule </span></h3>
<p>This rule warns when an assembly without an entry point (i.e. a dll or library) calls <b>Assembly.GetEntryAssembly ()</b>. This call is problematic since it will always return <b>null</b> when called from outside the root (main) application domain. This may become a problem inside libraries that can be used, for example, inside ASP.NET applications. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #008080; font-style: italic;">// this will throw a NullReferenceException from an ASP.NET page</span>
Response<span style="color: #008000;">.</span><span style="color: #0000FF;">WriteLine</span> <span style="color: #008000;">&#40;</span>Assembly<span style="color: #008000;">.</span><span style="color: #0000FF;">GetEntryAssembly</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">.</span><span style="color: #0000FF;">CodeBase</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">class</span> MainClass <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">void</span> Main <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        Console<span style="color: #008000;">.</span><span style="color: #0000FF;">WriteLine</span> <span style="color: #008000;">&#40;</span>Assembly<span style="color: #008000;">.</span><span style="color: #0000FF;">GetEntryAssembly</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">.</span><span style="color: #0000FF;">CodeBase</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><br />
</p>
<h3> <span class="mw-headline" id="ObsoleteMessagesShouldNotBeEmptyRule"> ObsoleteMessagesShouldNotBeEmptyRule </span></h3>
<p>This rule warns if any type (including classes, structs, enums, interfaces and delegates), field, property, events, method and constructor are decorated with an empty <b>[Obsolete]</b> attribute because the attribute is much more helpful if it includes advice on how to deal with the situation (e.g. the new recommended API to use). 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #008000;">&#91;</span>Obsolete<span style="color: #008000;">&#93;</span>
<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> Key <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">get</span> <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span><span style="color: #008000;">&#41;</span> key<span style="color: #008000;">.</span><span style="color: #0000FF;">Clone</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #008000;">&#91;</span>Obsolete <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;Use the new GetKey() method since properties should not return arrays.&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span>
<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> Key <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">get</span> <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">byte</span><span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span><span style="color: #008000;">&#41;</span> key<span style="color: #008000;">.</span><span style="color: #0000FF;">Clone</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><br />
</p>
<h3> <span class="mw-headline" id="OnlyUseDisposeForIDisposableTypesRule"> OnlyUseDisposeForIDisposableTypesRule </span></h3>
<p>To avoid confusing developers methods named Dispose should be reserved for types that implement IDisposable. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">internal</span> <span style="color: #0600FF; font-weight: bold;">sealed</span> <span style="color: #6666cc; font-weight: bold;">class</span> Worker
<span style="color: #008000;">&#123;</span>
    <span style="color: #008080; font-style: italic;">// This class uses one or more temporary files to do its work.</span>
    <span style="color: #0600FF; font-weight: bold;">private</span> List<span style="color: #008000;">&lt;</span><span style="color: #6666cc; font-weight: bold;">string</span><span style="color: #008000;">&gt;</span> files <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> List<span style="color: #008000;">&lt;</span><span style="color: #6666cc; font-weight: bold;">string</span><span style="color: #008000;">&gt;</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&#160;
    <span style="color: #008080; font-style: italic;">// This is confusing: developers will think they can do things</span>
    <span style="color: #008080; font-style: italic;">// like use the instance with a using statement.</span>
    <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> Dispose <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">foreach</span> <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> path <span style="color: #0600FF; font-weight: bold;">in</span> files<span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
            File<span style="color: #008000;">.</span><span style="color: #0000FF;">Delete</span> <span style="color: #008000;">&#40;</span>path<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #008000;">&#125;</span>
&#160;
        files<span style="color: #008000;">.</span><span style="color: #0000FF;">Clear</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">internal</span> <span style="color: #0600FF; font-weight: bold;">sealed</span> <span style="color: #6666cc; font-weight: bold;">class</span> Worker
<span style="color: #008000;">&#123;</span>
    <span style="color: #008080; font-style: italic;">// This class uses one or more temporary files to do its work.</span>
    <span style="color: #0600FF; font-weight: bold;">private</span> List<span style="color: #008000;">&lt;</span><span style="color: #6666cc; font-weight: bold;">string</span><span style="color: #008000;">&gt;</span> files <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> List<span style="color: #008000;">&lt;</span><span style="color: #6666cc; font-weight: bold;">string</span><span style="color: #008000;">&gt;</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&#160;
    <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> Reset <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">foreach</span> <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> path <span style="color: #0600FF; font-weight: bold;">in</span> files<span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
            File<span style="color: #008000;">.</span><span style="color: #0000FF;">Delete</span> <span style="color: #008000;">&#40;</span>path<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #008000;">&#125;</span>
&#160;
        files<span style="color: #008000;">.</span><span style="color: #0000FF;">Clear</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.6
</li></ul>
<h3> <span class="mw-headline" id="PreferEmptyInstanceOverNullRule"> PreferEmptyInstanceOverNullRule </span></h3>
<p>This rule checks that all methods and properties which return a string, an array, a collection, or an enumerable do not return <b>null</b>. It is usually better to return an empty instance, as this allows the caller to use the result without having to perform a null-check first. 
</p><p><b>Bad</b> example (string):
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">string</span> DisplayName <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">get</span> <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>IsAnonymous<span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
            <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">null</span><span style="color: #008000;">;</span>
        <span style="color: #008000;">&#125;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> name<span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example (string):
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">string</span> DisplayName <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">get</span> <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>IsAnonymous<span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
            <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #6666cc; font-weight: bold;">string</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Empty</span><span style="color: #008000;">;</span>
        <span style="color: #008000;">&#125;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> name<span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Bad</b> example (array):
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">int</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetOffsets <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">!</span>store<span style="color: #008000;">.</span><span style="color: #0000FF;">HasOffsets</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">null</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
    store<span style="color: #008000;">.</span><span style="color: #0000FF;">LoadOffsets</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> store<span style="color: #008000;">.</span><span style="color: #0000FF;">Offsets</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example (array):
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #0600FF; font-weight: bold;">const</span> <span style="color: #6666cc; font-weight: bold;">int</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> Empty <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> <span style="color: #6666cc; font-weight: bold;">int</span> <span style="color: #008000;">&#91;</span><span style="color: #FF0000;">0</span><span style="color: #008000;">&#93;</span><span style="color: #008000;">;</span>
<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">int</span> <span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span> GetOffsets <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">!</span>store<span style="color: #008000;">.</span><span style="color: #0000FF;">HasOffsets</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> Empty<span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
    store<span style="color: #008000;">.</span><span style="color: #0000FF;">LoadOffsets</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> store<span style="color: #008000;">.</span><span style="color: #0000FF;">Offsets</span><span style="color: #008000;">.</span><span style="color: #0000FF;">ToArray</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Bad</b> example (enumerable):
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> IEnumerable<span style="color: #008000;">&lt;</span><span style="color: #6666cc; font-weight: bold;">int</span><span style="color: #008000;">&gt;</span> GetOffsets <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">!</span>store<span style="color: #008000;">.</span><span style="color: #0000FF;">HasOffsets</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">null</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
    store<span style="color: #008000;">.</span><span style="color: #0000FF;">LoadOffsets</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> store<span style="color: #008000;">.</span><span style="color: #0000FF;">Offsets</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example (enumerable):
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> IEnumerable<span style="color: #008000;">&lt;</span><span style="color: #6666cc; font-weight: bold;">int</span><span style="color: #008000;">&gt;</span> GetOffsets <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">!</span>store<span style="color: #008000;">.</span><span style="color: #0000FF;">HasOffsets</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">yield</span> <span style="color: #0600FF; font-weight: bold;">break</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
    store<span style="color: #008000;">.</span><span style="color: #0000FF;">LoadOffsets</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #0600FF; font-weight: bold;">foreach</span> <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> offset <span style="color: #0600FF; font-weight: bold;">in</span> store<span style="color: #008000;">.</span><span style="color: #0000FF;">Offsets</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">yield</span> <span style="color: #0600FF; font-weight: bold;">return</span> offset<span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.4
</li></ul>
<h3> <span class="mw-headline" id="PreferSafeHandleRule"> PreferSafeHandleRule </span></h3>
<p>In general it is best to interop with native code using <b>System.Runtime.InteropServices.SafeHandle</b> instead of <b>System.IntPtr</b> or <b>System.UIntPtr</b> because: 
</p>
<ul><li> SafeHandles are type safe.
</li><li> SafeHandles are guaranteed to be disposed of during exceptional conditions like a thread aborting unexpectedly or a stack overflow.
</li><li> SafeHandles are not vulnerable to reycle attacks.
</li><li> You don't need to write a finalizer which can be tricky to do because they execute within their own thread, may execute on partially constructed objects, and normally tear down the application if you allow an exception to escape from them.
</li></ul>
<p><br />
<b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">using</span> <span style="color: #008080;">System.Runtime.InteropServices</span><span style="color: #008000;">;</span>
<span style="color: #0600FF; font-weight: bold;">using</span> <span style="color: #008080;">System.Security</span><span style="color: #008000;">;</span>
<span style="color: #0600FF; font-weight: bold;">using</span> <span style="color: #008080;">System.Security.Permissions</span><span style="color: #008000;">;</span>
&#160;
<span style="color: #008080; font-style: italic;">// If cleaning up the native resource in a timely manner is important you can</span>
<span style="color: #008080; font-style: italic;">// implement IDisposable.</span>
<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">sealed</span> <span style="color: #6666cc; font-weight: bold;">class</span> Database <span style="color: #008000;">&#123;</span>
    ~Database <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        <span style="color: #008080; font-style: italic;">// This will execute even if the ctor throws so it is important to check</span>
        <span style="color: #008080; font-style: italic;">// to see if the fields are initialized.</span>
        <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>m_database <span style="color: #008000;">!=</span> IntPtr<span style="color: #008000;">.</span><span style="color: #0000FF;">Zero</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
            NativeMethods<span style="color: #008000;">.</span><span style="color: #0000FF;">sqlite3_close</span> <span style="color: #008000;">&#40;</span>m_database<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #008000;">&#125;</span>
    <span style="color: #008000;">&#125;</span>
&#160;
    <span style="color: #0600FF; font-weight: bold;">public</span> Database <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> path<span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        NativeMethods<span style="color: #008000;">.</span><span style="color: #0000FF;">OpenFlags</span> flags <span style="color: #008000;">=</span> NativeMethods<span style="color: #008000;">.</span><span style="color: #0000FF;">OpenFlags</span><span style="color: #008000;">.</span><span style="color: #0000FF;">READWRITE</span> <span style="color: #008000;">|</span> NativeMethods<span style="color: #008000;">.</span><span style="color: #0000FF;">OpenFlags</span><span style="color: #008000;">.</span><span style="color: #0000FF;">CREATE</span><span style="color: #008000;">;</span>
        <span style="color: #6666cc; font-weight: bold;">int</span> err <span style="color: #008000;">=</span> NativeMethods<span style="color: #008000;">.</span><span style="color: #0000FF;">sqlite3_open_v2</span> <span style="color: #008000;">&#40;</span>path, <span style="color: #0600FF; font-weight: bold;">out</span> m_database, flags, IntPtr<span style="color: #008000;">.</span><span style="color: #0000FF;">Zero</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
        <span style="color: #008080; font-style: italic;">// handle errors</span>
    <span style="color: #008000;">&#125;</span>
&#160;
    <span style="color: #008080; font-style: italic;">// exec and query methods would go here</span>
&#160;
    <span style="color: #008000;">&#91;</span>SuppressUnmanagedCodeSecurity<span style="color: #008000;">&#93;</span>
    <span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">class</span> NativeMethods <span style="color: #008000;">&#123;</span>
        <span style="color: #008000;">&#91;</span>Flags<span style="color: #008000;">&#93;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">enum</span> OpenFlags <span style="color: #008000;">:</span> <span style="color: #6666cc; font-weight: bold;">int</span> <span style="color: #008000;">&#123;</span>
            <span style="color: #0600FF; font-weight: bold;">READONLY</span> <span style="color: #008000;">=</span> 0x00000001,
            READWRITE <span style="color: #008000;">=</span> 0x00000002,
            CREATE <span style="color: #008000;">=</span> 0x00000004,
            <span style="color: #008080; font-style: italic;">// ...</span>
        <span style="color: #008000;">&#125;</span>
&#160;
        <span style="color: #008000;">&#91;</span>DllImport <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;sqlite3&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #0600FF; font-weight: bold;">extern</span> <span style="color: #6666cc; font-weight: bold;">int</span> sqlite3_close <span style="color: #008000;">&#40;</span>IntPtr db<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&#160;
        <span style="color: #008000;">&#91;</span>DllImport <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;sqlite3&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #0600FF; font-weight: bold;">extern</span> <span style="color: #6666cc; font-weight: bold;">int</span> sqlite3_open_v2 <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> fileName, <span style="color: #0600FF; font-weight: bold;">out</span> IntPtr db, OpenFlags flags, IntPtr module<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
&#160;
    <span style="color: #0600FF; font-weight: bold;">private</span> IntPtr m_database<span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">using</span> <span style="color: #008080;">System.Runtime.ConstrainedExecution</span><span style="color: #008000;">;</span>
<span style="color: #0600FF; font-weight: bold;">using</span> <span style="color: #008080;">System.Runtime.InteropServices</span><span style="color: #008000;">;</span>
<span style="color: #0600FF; font-weight: bold;">using</span> <span style="color: #008080;">System.Security</span><span style="color: #008000;">;</span>
<span style="color: #0600FF; font-weight: bold;">using</span> <span style="color: #008080;">System.Security.Permissions</span><span style="color: #008000;">;</span>
&#160;
<span style="color: #008080; font-style: italic;">// If cleaning up the native resource in a timely manner is important you can</span>
<span style="color: #008080; font-style: italic;">// implement IDisposable, but you do not need to implement a finalizer because</span>
<span style="color: #008080; font-style: italic;">// SafeHandle will take care of the cleanup.</span>
<span style="color: #0600FF; font-weight: bold;">internal</span> <span style="color: #0600FF; font-weight: bold;">sealed</span> <span style="color: #6666cc; font-weight: bold;">class</span> Database <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">public</span> Database <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> path<span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        NativeMethods<span style="color: #008000;">.</span><span style="color: #0000FF;">OpenFlags</span> flags <span style="color: #008000;">=</span> NativeMethods<span style="color: #008000;">.</span><span style="color: #0000FF;">OpenFlags</span><span style="color: #008000;">.</span><span style="color: #0000FF;">READWRITE</span> <span style="color: #008000;">|</span> NativeMethods<span style="color: #008000;">.</span><span style="color: #0000FF;">OpenFlags</span><span style="color: #008000;">.</span><span style="color: #0000FF;">CREATE</span><span style="color: #008000;">;</span>
        m_database <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> SqlitePtr <span style="color: #008000;">&#40;</span>path, flags<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
&#160;
    <span style="color: #008080; font-style: italic;">// exec and query methods would go here</span>
&#160;
    <span style="color: #008080; font-style: italic;">// This corresponds to a native sqlite3*.</span>
    <span style="color: #008000;">&#91;</span>SecurityPermission <span style="color: #008000;">&#40;</span>SecurityAction<span style="color: #008000;">.</span><span style="color: #0000FF;">InheritanceDemand</span>, UnmanagedCode <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span>
    <span style="color: #008000;">&#91;</span>SecurityPermission <span style="color: #008000;">&#40;</span>SecurityAction<span style="color: #008000;">.</span><span style="color: #0000FF;">Demand</span>, UnmanagedCode <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span>
    <span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #0600FF; font-weight: bold;">sealed</span> <span style="color: #6666cc; font-weight: bold;">class</span> SqlitePtr <span style="color: #008000;">:</span> SafeHandle <span style="color: #008000;">&#123;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> SqlitePtr <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> path, NativeMethods<span style="color: #008000;">.</span><span style="color: #0000FF;">OpenFlags</span> flags<span style="color: #008000;">&#41;</span> <span style="color: #008000;">:</span> <span style="color: #0600FF; font-weight: bold;">base</span> <span style="color: #008000;">&#40;</span>IntPtr<span style="color: #008000;">.</span><span style="color: #0000FF;">Zero</span>, <span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">&#41;</span>
        <span style="color: #008000;">&#123;</span>
            <span style="color: #6666cc; font-weight: bold;">int</span> err <span style="color: #008000;">=</span> NativeMethods<span style="color: #008000;">.</span><span style="color: #0000FF;">sqlite3_open_v2</span> <span style="color: #008000;">&#40;</span>path, <span style="color: #0600FF; font-weight: bold;">out</span> handle, flags, IntPtr<span style="color: #008000;">.</span><span style="color: #0000FF;">Zero</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
            <span style="color: #008080; font-style: italic;">// handle errors</span>
        <span style="color: #008000;">&#125;</span>
&#160;
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">override</span> <span style="color: #6666cc; font-weight: bold;">bool</span> IsInvalid <span style="color: #008000;">&#123;</span>
            <span style="color: #0600FF; font-weight: bold;">get</span> <span style="color: #008000;">&#123;</span>
                <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #008000;">&#40;</span>handle <span style="color: #008000;">==</span> IntPtr<span style="color: #008000;">.</span><span style="color: #0000FF;">Zero</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
            <span style="color: #008000;">&#125;</span>
        <span style="color: #008000;">&#125;</span>
&#160;
        <span style="color: #008080; font-style: italic;">// This will not be called if the handle is invalid. Note that this method should not throw.</span>
        <span style="color: #008000;">&#91;</span>ReliabilityContract <span style="color: #008000;">&#40;</span>Consistency<span style="color: #008000;">.</span><span style="color: #0000FF;">WillNotCorruptState</span>, Cer<span style="color: #008000;">.</span><span style="color: #0000FF;">MayFail</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span>
        <span style="color: #0600FF; font-weight: bold;">protected</span> <span style="color: #0600FF; font-weight: bold;">override</span> <span style="color: #6666cc; font-weight: bold;">bool</span> ReleaseHandle <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
        <span style="color: #008000;">&#123;</span>
            NativeMethods<span style="color: #008000;">.</span><span style="color: #0000FF;">sqlite3_close</span> <span style="color: #008000;">&#40;</span><span style="color: #0600FF; font-weight: bold;">this</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
            <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">;</span>
        <span style="color: #008000;">&#125;</span>
    <span style="color: #008000;">&#125;</span>
&#160;
    <span style="color: #008000;">&#91;</span>SuppressUnmanagedCodeSecurity<span style="color: #008000;">&#93;</span>
    <span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">class</span> NativeMethods <span style="color: #008000;">&#123;</span>
        <span style="color: #008000;">&#91;</span>Flags<span style="color: #008000;">&#93;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">enum</span> OpenFlags <span style="color: #008000;">:</span> <span style="color: #6666cc; font-weight: bold;">int</span> <span style="color: #008000;">&#123;</span>
            <span style="color: #0600FF; font-weight: bold;">READONLY</span> <span style="color: #008000;">=</span> 0x00000001,
            READWRITE <span style="color: #008000;">=</span> 0x00000002,
            CREATE <span style="color: #008000;">=</span> 0x00000004,
            <span style="color: #008080; font-style: italic;">// ...</span>
        <span style="color: #008000;">&#125;</span>
&#160;
        <span style="color: #008000;">&#91;</span>DllImport <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;sqlite3&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #0600FF; font-weight: bold;">extern</span> <span style="color: #6666cc; font-weight: bold;">int</span> sqlite3_close <span style="color: #008000;">&#40;</span>SqlitePtr db<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&#160;
        <span style="color: #008080; font-style: italic;">// Open must take an IntPtr but all other methods take a type safe SqlitePtr.</span>
        <span style="color: #008000;">&#91;</span>DllImport <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;sqlite3&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span>
        <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #0600FF; font-weight: bold;">extern</span> <span style="color: #6666cc; font-weight: bold;">int</span> sqlite3_open_v2 <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> fileName, <span style="color: #0600FF; font-weight: bold;">out</span> IntPtr db, OpenFlags flags, IntPtr module<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
&#160;
    <span style="color: #0600FF; font-weight: bold;">private</span> SqlitePtr m_database<span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.6
</li></ul>
<h3> <span class="mw-headline" id="ReplaceIncompleteOddnessCheckRule"> ReplaceIncompleteOddnessCheckRule </span></h3>
<p>This rule checks for problematic oddness checks. Often this is done by comparing a value modulo two (% 2) with one (1). However this will not work if the value is negative because negative one will be returned. A better (and faster) approach is to check the least significant bit of the integer. 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">bool</span> IsOdd <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> x<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #008080; font-style: italic;">// (x&#160;% 2) won't work for negative numbers (it returns -1)</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#40;</span>x <span style="color: #008000;">%</span> <span style="color: #FF0000;">2</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">==</span> <span style="color: #FF0000;">1</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">bool</span> IsOdd <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> x<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#40;</span>x <span style="color: #008000;">%</span> <span style="color: #FF0000;">2</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">!=</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example (faster):
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">bool</span> IsOdd <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">int</span> x<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#40;</span>x <span style="color: #008000;">&amp;</span> <span style="color: #FF0000;">1</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">==</span> <span style="color: #FF0000;">1</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> This rule is available since Gendarme 2.0
</li></ul>
<h3> <span class="mw-headline" id="ToStringShouldNotReturnNullRule"> ToStringShouldNotReturnNullRule </span></h3>
<p>This rule checks for overridden <b>ToString()</b> methods which return <b>null</b>. An appropriately descriptive string, or <b>string.Empty</b>, should be returned instead in order to make the value more useful (especially in debugging). 
</p><p><b>Bad</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">override</span> <span style="color: #6666cc; font-weight: bold;">string</span> ToString <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> <span style="color: #008000;">&#40;</span>count <span style="color: #008000;">==</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">?</span> <span style="color: #0600FF; font-weight: bold;">null</span> <span style="color: #008000;">:</span> count<span style="color: #008000;">.</span><span style="color: #0000FF;">ToString</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Good</b> example:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">override</span> <span style="color: #6666cc; font-weight: bold;">string</span> ToString <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> count<span style="color: #008000;">.</span><span style="color: #0000FF;">ToString</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p><b>Notes</b>
</p>
<ul><li> Before Gendarme 2.4 this rule was named ToStringReturnsNull.
</li></ul>
<h1> <span class="mw-headline" id="Feedback"> Feedback </span></h1>
<p>Please report any documentation errors, typos or suggestions to the 
<a href="http://groups.google.com/group/gendarme" class="external text" rel="nofollow">Gendarme Google Group</a>. Thanks!
</p>
