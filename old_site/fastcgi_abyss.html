---
layout: obsolete
title: "FastCGI Abyss"
permalink: /old_site/FastCGI_Abyss/
---

<h1>FastCGI Abyss</h1>

<p>by Brian Nickel &lt;<a href="http://kerrick.wordpress.com" class="external free" rel="nofollow">http://kerrick.wordpress.com</a>&gt;
</p><p>Information on how to configure the <a href="{{site.baseurl}}/FastCGI" title="FastCGI">FastCGI</a> support for the Abyss server.
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Configuration_Tested_On..."><span class="tocnumber">1.1</span> <span class="toctext">Configuration Tested On...</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3"><a href="#General_Warnings"><span class="tocnumber">2</span> <span class="toctext">General Warnings</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Step_1:_Setting_Up_the_Interpreter"><span class="tocnumber">2.1</span> <span class="toctext">Step 1: Setting Up the Interpreter</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Step_2:_Extending_the_Server_Lifetime"><span class="tocnumber">2.2</span> <span class="toctext">Step 2: Extending the Server Lifetime</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Step_3:_Disabling_Directory_Listing"><span class="tocnumber">2.3</span> <span class="toctext">Step 3: Disabling Directory Listing</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Using_Extensions"><span class="tocnumber">3</span> <span class="toctext">Using Extensions</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Warnings"><span class="tocnumber">3.1</span> <span class="toctext">Warnings</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Step_1:_Setting_Up_the_Interpreter_2"><span class="tocnumber">3.2</span> <span class="toctext">Step 1: Setting Up the Interpreter</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Step_2:_Extending_the_Server_Lifetime_2"><span class="tocnumber">3.3</span> <span class="toctext">Step 2: Extending the Server Lifetime</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Step_3:_Adding_Index_Pages"><span class="tocnumber">3.4</span> <span class="toctext">Step 3: Adding Index Pages</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#Bada_Bing.21"><span class="tocnumber">4</span> <span class="toctext">Bada Bing!</span></a></li>
</ul>
</td></tr></table>
<h2> <span class="mw-headline" id="Introduction"> Introduction </span></h2>
<p><a href="http://www.aprelium.com/" class="external text" rel="nofollow">Abyss Web Server</a> is a easy to use and feature rich Web Server. Although closed source,
the X1 server is <i>"a free and fully functional software: no nag screens, no time limitations, no spyware, and no advertisements."</i> (<a href="http://www.aprelium.com/abyssws/download.php" class="external text" rel="nofollow">Download</a>)
</p><p><br />
True to its claims of "ease of use", Abyss was the easiest server to set up thus far. This is largely due to its simple and straightforward control center.
</p>
<h3> <span class="mw-headline" id="Configuration_Tested_On..."> Configuration Tested On... </span></h3>
<ul><li> <a href="http://en.opensuse.org/OpenSUSE_News/10.2-Release" class="external text" rel="nofollow">OpenSuSE 10.2</a> (Abyss X1)&lt;/li&gt;
</li><li> <i>If you have tested an additional configuration, please email me at <a href="mailto:brian.nickel@gmail.com" class="external text" rel="nofollow">brian.nickel@gmail.com</a>.</i>
</li></ul>
<h2> <span class="mw-headline" id="General_Warnings"> General Warnings </span></h2>
<p>Before doing anthing else, you should read <a href="{{site.baseurl}}/FastCGI#Important_Information" title="FastCGI">FastCGI#Important_Information</a> section on the main FastCGI page. 
</p>
<h3> <span class="mw-headline" id="Step_1:_Setting_Up_the_Interpreter"> Step 1: Setting Up the Interpreter </span></h3>
<p>Upon starting the Abyss Web Server, a control center web server starts up as well, by default at <a href="http://localhost:9999" class="external free" rel="nofollow">http://localhost:9999</a>. Simply open it up in your web browser to that address and follow the steps outlined below:
</p>
<ol><li>Click "Configure" on the host you wish to add ASP.NET support to.
</li><li>Click on "Scripting Parameters".
</li><li>Click on "Add" in the "Interpreters" box.
</li><li>You are now on the page to add the ASP.NET interpretter. The two options I would recommend are "FastCGI (Local - Pipes)" and "FastCGI (Remote - TCP/IP sockets)":
<ul><li><b>FastCGI (Local - Pipes)</b> - Abyss will start the Mono server by itself using a piped socket. Pipes are the fastest way to communicate and having the Abyss spawn its own server means you don't have to do it manually. This is possibly the simplest option. <br />If using this option, simply set "Interpreter" to "/usr/bin/fastcgi-mono-server" or "/usr/bin/fastcgi-mono-server2".<br />
</li><li><b>FastCGI (Remote - TCP/IP sockets)</b> - Abyss will look for the Mono server at a specified IP address and port. You can use this to run the server on another machine and redistribute the processor load. The only caveat is that you will need to start the Mono server on the other computer manually, using a command like "<tt>fastcgi-mono-server2 /socket=tcp:8002</tt>"<br />If using this option, simply set "Remote server IP Address" to the IP address of the machine running the Mono server, and "Port" to the port you used in the command line. For the command line shown above, this would be 8002.<br />
</li></ul>
</li><li>Uncheck "Check for file existence before execution". This option improves performance but can cripple ASP.NET 2.0 as it sometimes uses paths that don't necessarily exist like WebResource.axd.
</li><li>Uncheck "Use the associated extensions to automatically update the Script Paths".
</li><li>Add "*" to "Extensions". It is not a real, but it'll be used to make sure all requests are directed at the FastCGI Mono Server.
</li><li>Click "OK".
</li><li>You should have automatically returned to "Scripting Parameters". Click on "Add" in the "Script Paths" box.
</li><li>Enter "/*" in "Virtual Path".
</li><li>Click "OK".
</li></ol>
<h3> <span class="mw-headline" id="Step_2:_Extending_the_Server_Lifetime"> Step 2: Extending the Server Lifetime </span></h3>
<p>Upon completion of the previous step, you should have automatically returned to "Scripting Parameters". Click on "Edit..." next to "FastCGI Parameters". The option "FastCGI Processes Timeout" specifies the number of seconds after the last request you're going to want to wait before shutting down the Mono (or any) FastCGI server. Because ASP.NET pages need to recompiled and AppDomains need to be recreated every time the server starts up, you want to set this value to some arbitrarily high value. 604800 is the number of seconds in a week and the value I chose for my server. Once you've chosen your value, click "OK".
</p>
<h3> <span class="mw-headline" id="Step_3:_Disabling_Directory_Listing"> Step 3: Disabling Directory Listing </span></h3>
<p>Upon completion of the previous step, you should have automatically returned to "Scripting Parameters". Click "OK" at the bottom of the page to get back to the host configuration page. Once there, click "Directory Listing" and proceed to set "Type" to "Disabled". If directory listing is enabled, paths aren't automatically sent to the FastCGI Mono Server.
</p>
<h2> <span class="mw-headline" id="Using_Extensions"> Using Extensions </span></h2>
<h3> <span class="mw-headline" id="Warnings"> Warnings </span></h3>
<p><b>Using Extensions in place place of paths is NOT recommended.</b> Please consult <a href="{{site.baseurl}}/FastCGI#Paths_vs._Extensions" title="FastCGI">FastCGI#Paths_vs._Extensions</a> on the main page for an in depth explanation.  If you decide to use this configuration, please bear in mind that it is less secure suffers additional disadvantages when compared to using paths.
</p>
<h3> <span class="mw-headline" id="Step_1:_Setting_Up_the_Interpreter_2"> Step 1: Setting Up the Interpreter </span></h3>
<p>Upon starting the Abyss Web Server, a control center web server starts up as well, by default at <a href="http://localhost:9999" class="external free" rel="nofollow">http://localhost:9999</a>. Simply open it up in your web browser to that address and follow the steps outlined below:
</p>
<ol><li>Click "Configure" on the host you wish to add ASP.NET support to.
</li><li>Click on "Scripting Parameters".
</li><li>Click on "Add" in the "Interpreters" box.
</li><li>You are now on the page to add the ASP.NET interpretter. The two options I would recommend are "FastCGI (Local - Pipes)" and "FastCGI (Remote - TCP/IP sockets)":
<ul><li><b>FastCGI (Local - Pipes)</b> - Abyss will start the Mono server by itself using a piped socket. Pipes are the fastest way to communicate and having the Abyss spawn its own server means you don't have to do it manually. This is possibly the simplest option.<br />If using this option, simply set "Interpreter" to "/usr/bin/fastcgi-mono-server" or "/usr/bin/fastcgi-mono-server2".<br />
</li><li><b>FastCGI (Remote - TCP/IP sockets)</b> - Abyss will look for the Mono server at a specified IP address and port. You can use this to run the server on another machine and redistribute the processor load. The only caveat is that you will need to start the Mono server on the other computer manually, using a command like "<tt>fastcgi-mono-server2 /socket=tcp:8002</tt>"<br /> If using this option, simply set "Remote server IP Address" to the IP address of the machine running the Mono server, and "Port" to the port you used in the command line. For the command line shown above, this would be 8002.
</li></ul>
</li><li>Uncheck "Check for file existence before execution". This option improves performance but can cripple ASP.NET 2.0 as it sometimes uses paths that don't necessarily exist like WebResource.axd.
</li><li>Add the following extensions:
<ul><li>aspx
</li><li>asmx
</li><li>ashx
</li><li>asax
</li><li>ascx
</li><li>soap
</li><li>rem
</li><li>axd
</li><li>cs
</li><li>config
</li><li>dll
</li></ul>
</li><li>Click "OK".
</li></ol>
<h3> <span class="mw-headline" id="Step_2:_Extending_the_Server_Lifetime_2"> Step 2: Extending the Server Lifetime </span></h3>
<p>Upon completion of the previous step, you should have automatically returned to "Scripting Parameters". Click on "Edit..." next to "FastCGI Parameters". The option "FastCGI Processes Timeout" specifies the number of seconds after the last request you're going to want to wait before shutting down the Mono (or any) FastCGI server. Because ASP.NET pages need to recompiled and AppDomains need to be recreated every time the server starts up, you want to set this value to some arbitrarily high value. 604800 is the number of seconds in a week and the value I chose for my server. Once you've chosen your value, click "OK".
</p>
<h3> <span class="mw-headline" id="Step_3:_Adding_Index_Pages"> Step 3: Adding Index Pages </span></h3>
<p>Upon completion of the previous step, you should have automatically returned to "Scripting Parameters". Click "OK" at the bottom of the page to get back to the host configuration page. Once there, click "Index Files" and proceed to add <tt>index.aspx</tt>, <tt>default.aspx</tt>, and <tt>Default.aspx</tt>. Click "OK" and then "Reset" to restart the web server.
</p>
<h2> <span class="mw-headline" id="Bada_Bing.21"> Bada Bing! </span></h2>
<p>You should now have ASP.NET working with Abyss Web Server. Enjoy!
</p>
