---
layout: obsolete
title: "Accessibility: GitSVN"
permalink: /old_site/Accessibility:_GitSVN/
redirect_from:
  - /Accessibility:_GitSVN/
---

<h1>Accessibility: GitSVN</h1>

<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Using_git_with_the_uia2atk_SVN_module"><span class="tocnumber">1</span> <span class="toctext">Using git with the uia2atk SVN module</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Why_use_git-svn.3F"><span class="tocnumber">1.1</span> <span class="toctext">Why use git-svn?</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Getting_Started"><span class="tocnumber">1.2</span> <span class="toctext">Getting Started</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#Starting_from_a_bootstrap_repo_.28recommended.29"><span class="tocnumber">1.2.1</span> <span class="toctext">Starting from a bootstrap repo (recommended)</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-5"><a href="#Daily_use"><span class="tocnumber">1.3</span> <span class="toctext">Daily use</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Maintaining_the_gitorious_repository"><span class="tocnumber">1.4</span> <span class="toctext">Maintaining the gitorious repository</span></a>
<ul>
<li class="toclevel-3 tocsection-7"><a href="#Create_the_git_repostory_from_scratch_.28takes_hours.29"><span class="tocnumber">1.4.1</span> <span class="toctext">Create the git repostory from scratch (takes hours)</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#Pushing_to_gitorious"><span class="tocnumber">1.4.2</span> <span class="toctext">Pushing to gitorious</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</td></tr></table>
<h1> <span class="mw-headline" id="Using_git_with_the_uia2atk_SVN_module">Using git with the uia2atk SVN module</span></h1>
<h2> <span class="mw-headline" id="Why_use_git-svn.3F">Why use git-svn?</span></h2>
<p>Use of git-svn is not a requirement at all, but it can help with a lot of common development tasks that are time-consuming with SVN and ViewVC.
</p>
<ul><li> Complete repository history locally, works offline, can check history <b>instantly</b>.
</li><li> Use git-bisect to rapidly track down the commit that caused a bug you are investigating.
</li><li> Local branching and git-stash are much easier to use when working on separate tasks simultaneously (especially if merging is involved) while waiting for review, compared to generating/applying SVN patches.
</li><li> You can choose to stage and commit only a few of several changes made to one file.
</li></ul>
<h2> <span class="mw-headline" id="Getting_Started">Getting Started</span></h2>
<h3> <span class="mw-headline" id="Starting_from_a_bootstrap_repo_.28recommended.29">Starting from a bootstrap repo (recommended)</span></h3>
<p>There is now a bootstrap git repository at <a href="http://gitorious.org/projects/uia2atk" class="external text" rel="nofollow">gitorious.org</a>.  The quickest way to get started is to clone that repository, and then get any recent svn updates.  First you'll create a new git repository and configure it to work with Mono SVN:
</p>
<pre>mkdir uia2atk-git
cd uia2atk-git
git svn init svn+ssh://&lt;user&gt;@mono-cvs.ximian.com/source
#The "git config" commands below are really just another way of editing your .git/config file
git config svn-remote.svn.fetch trunk/uia2atk:refs/remotes/git-svn/trunk
git config svn-remote.svn.branches branches/uia2atk/*:refs/remotes/git-svn/branches/*
git config svn-remote.svn.tags tags/uia2atk/*:refs/remotes/git-svn/tags/*
git config reviewboard.url <a href="http://reviews.mono-a11y.org" class="external free" rel="nofollow">http://reviews.mono-a11y.org</a>
</pre>
<p>Now that you have a repository set up, you can "fetch" the bootstrap repository, and configure it to match up git-svn "remotes" (branches and tags) correctly:
</p>
<pre>git fetch <a href="git://gitorious.org/uia2atk/mainline.git" class="external free" rel="nofollow">git://gitorious.org/uia2atk/mainline.git</a> refs/heads/master:refs/remotes/git-svn/trunk refs/heads/branches/*:refs/remotes/git-svn/branches/* refs/tags/*:refs/remotes/git-svn/tags/*
git reset --hard git-svn/trunk
</pre>
<p>Finally, you'll want to take in any changes since the bootstrap repository was created:
</p>
<pre>git checkout master
git svn rebase
git checkout git-svn/branches/1.0
git svn rebase
git checkout git-svn/branches/post-1.0-research
git svn rebase
</pre>
<p>(You can actually update everything with one command with `<b>git svn rebase --all</b>`, but in my testing this takes <b>90 minutes</b> on the first run.  I believe git-svn is verifying that every single commit in SVN has a mapping in git.  The benefit of "--all" is that it also finds new SVN branches and tags.  Also, it only takes a few seconds to run after that first long run.)
</p><p>You are now all set to use your new git-svn repository!
</p>
<h2> <span class="mw-headline" id="Daily_use">Daily use</span></h2>
<p>For each remote SVN branch you are working on, you will need a corresponding local branch to actually do your SVN commits in.  For trunk, the local branch is "master", and is already set up for you.  To set up a local branch (1.0) of SVN's 1.0 branch (git-svn/branches/1.0), you can do this:
</p>
<pre>git branch 1.0 git-svn/branches/1.0
git checkout 1.0 #If you want to start working in it
</pre>
<p>In these local branches ("master" and "1.0" in this case), every commit you make will eventually be mirrored in SVN when you run `git svn dcommit`.  For that reason and others, you will actually do all of your work in feature branches, and merge them back when it is time to commit to SVN.
</p><p>This is all documented in our <a href="{{site.github.url}}/old_site/Accessibility:_GitSVN:_Workflow" title="Accessibility: GitSVN: Workflow">git-svn daily workflow</a>.  Please read it very carefully, as it explains how to update, edit, handle reviews, and commit.
</p>
<h2> <span class="mw-headline" id="Maintaining_the_gitorious_repository">Maintaining the gitorious repository</span></h2>
<p>Only one person on the team needs to care about this stuff, as everybody else can just fetch from gitorious and follow the above instructions.
</p>
<h3> <span class="mw-headline" id="Create_the_git_repostory_from_scratch_.28takes_hours.29">Create the git repostory from scratch (takes hours)</span></h3>
<p>If for some reason you need to create a git-svn repository from scratch, this is what I did:
</p>
<pre>git svn clone svn+ssh://&lt;user&gt;@mono-cvs.ximian.com/source -T trunk/uia2atk -b branches/uia2atk -t tags/uia2atk
mv source uia2atk-git
cd uia2atk-git
git reset --hard remotes/trunk
</pre>
<h3> <span class="mw-headline" id="Pushing_to_gitorious">Pushing to gitorious</span></h3>
<p>You cannot push remote branches directly; you must push only local branches.  Assuming you have local branches for each SVN remote (for example, "1.0" and "post-1.0-research", "tags/1.1"):
</p>
<pre>git push origin master 1.0:branches/1.0 post-1.0-research:branches/post-1.0-research tags/1.1
</pre>
<p>If you need to delete a branch from gitorious:
</p>
<pre>git push origin&#160;:myobsoletebranch
</pre>
<p>Please remember that this gitorious repository is intended as a bootstrap repo for mirroring uia2atk from SVN.  Do not push personal git branches to this repository.
</p>
