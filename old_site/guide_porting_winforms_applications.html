---
layout: obsolete
title: "Guide: Porting Winforms Applications"
permalink: /old_site/Guide:_Porting_Winforms_Applications/
redirect_from:
  - /Guide:_Porting_Winforms_Applications/
---

<h1>Guide: Porting Winforms Applications</h1>

<p>by <a href="" class="new" title="User:Jpobst (page does not exist)">Jonathan Pobst</a>
</p><p>The amount of effort required to get an existing Winforms app running on Mono can vary greatly.  Although many small apps will run on Mono unmodified, many apps will require some work on the developer's part to run smoothly on Mono.  This guide will attempt to port a non-trivial open source application to document several of the issues a developer may run into while porting their app to Mono.
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#The_Project"><span class="tocnumber">1</span> <span class="toctext">The Project</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Getting_Started"><span class="tocnumber">2</span> <span class="toctext">Getting Started</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#MoMA_Summary"><span class="tocnumber">2.1</span> <span class="toctext">MoMA Summary</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#Trying_It_Out"><span class="tocnumber">3</span> <span class="toctext">Trying It Out</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Porting_Strategies"><span class="tocnumber">4</span> <span class="toctext">Porting Strategies</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Remove_.2F_Comment_Code"><span class="tocnumber">4.1</span> <span class="toctext">Remove / Comment Code</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Compiler_Conditionals"><span class="tocnumber">4.2</span> <span class="toctext">Compiler Conditionals</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Runtime_Conditionals"><span class="tocnumber">4.3</span> <span class="toctext">Runtime Conditionals</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Rewriting_Code"><span class="tocnumber">4.4</span> <span class="toctext">Rewriting Code</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="#Porting_NClass"><span class="tocnumber">5</span> <span class="toctext">Porting NClass</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#Continuing_the_Port"><span class="tocnumber">6</span> <span class="toctext">Continuing the Port</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="#Running_on_Linux"><span class="tocnumber">7</span> <span class="toctext">Running on Linux</span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="#Linux_Platform_Differences"><span class="tocnumber">7.1</span> <span class="toctext">Linux Platform Differences</span></a>
<ul>
<li class="toclevel-3 tocsection-14"><a href="#Win32_P.2FInvokes"><span class="tocnumber">7.1.1</span> <span class="toctext">Win32 P/Invokes</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#Case_Sensitivity"><span class="tocnumber">7.1.2</span> <span class="toctext">Case Sensitivity</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#The_Path_Separator"><span class="tocnumber">7.1.3</span> <span class="toctext">The Path Separator</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-17"><a href="#Conclusion"><span class="tocnumber">8</span> <span class="toctext">Conclusion</span></a></li>
<li class="toclevel-1 tocsection-18"><a href="#Advanced_Guides"><span class="tocnumber">9</span> <span class="toctext">Advanced Guides</span></a></li>
</ul>
</td></tr></table>
<h2> <span class="mw-headline" id="The_Project"> The Project </span></h2>
<p>For this guide, the open source application NClass has been chosen.  It is a UML compliant class designer that looks very much like the one that ships in Visual Studio 2005.  It is licensed under the GPL and LGPL, and has not been written with Mono in mind.  We will be using Mono 1.2.4 to port NClass to run on Linux.
</p>
<ul><li> NClass homepage - <a href="http://nclass.sourceforge.net/index.html" class="external free" rel="nofollow">http://nclass.sourceforge.net/index.html</a>
</li><li> NClass download - <a href="http://nclass.sourceforge.net/downloads.html" class="external free" rel="nofollow">http://nclass.sourceforge.net/downloads.html</a>  (this guide uses the "source" version)
</li><li> <a href="{{site.github.url}}/old_site/Downloads" title="Downloads">Mono 1.2.4</a>
</li><li> <a href="{{site.github.url}}/old_site/MoMA" title="MoMA">Mono Migration Analyzer (MoMA)</a>
</li></ul>
<p>NClass running on .Net with included example file:
<a href="{{site.github.url}}/images/old_site/1/1c/Msnclass.png" class="image"><img alt="Msnclass.png" src="{{site.github.url}}/images/old_site/1/1c/Msnclass.png" width="700" height="500" /></a>
</p>
<h2> <span class="mw-headline" id="Getting_Started"> Getting Started </span></h2>
<p>For the purpose of this guide, we will make the assumption that the developer is more familiar with Windows and Visual Studio than the Linux counterparts, given that the app is originally a Windows app.
</p><p>Because we grabbed the source version, first we need to load up NClass.sln in Visual Studio and compile the solution.
</p><p><a href="{{site.github.url}}/images/old_site/1/18/Build.png" class="image"><img alt="Build.png" src="{{site.github.url}}/images/old_site/1/18/Build.png" width="713" height="519" /></a>
</p><p>Once we have a compiled executable, we can run MoMA on it to give us an idea of what kinds of issues we may run into.
</p><p><a href="{{site.github.url}}/images/old_site/3/35/Moma1.png" class="image"><img alt="Moma1.png" src="{{site.github.url}}/images/old_site/3/35/Moma1.png" width="735" height="507" /></a>
</p><p><a href="{{site.github.url}}/images/old_site/c/c4/Moma2.png" class="image"><img alt="Moma2.png" src="{{site.github.url}}/images/old_site/c/c4/Moma2.png" width="735" height="507" /></a>
</p><p>The results from the MoMA scan can be seen <a href="http://jpobst.com/moma/nclassmoma.html" class="external text" rel="nofollow">here</a>.
</p>
<h3> <span class="mw-headline" id="MoMA_Summary"> MoMA Summary </span></h3>
<p>Methods we are using that are not in Mono 1.2.4:
</p>
<ul><li> void ListView.add_ItemSelectionChanged (ListViewItemSelectionChangedEventHandler)
</li><li> void TreeView.set_ShowNodeToolTips (bool)
</li><li> void TreeNode.set_ToolTipText (string)
</li><li> void PrintDialog.set_UseEXDialog (bool)
</li></ul>
<p>Methods that are marked with a [MonoTODO] attribute in Mono.1.2.4:
</p>
<ul><li> void Control.set_AutoSize (bool)  -  This method currently does nothing
</li><li> void ContainerControl.set_AutoScaleMode (AutoScaleMode)  -  Call scaling method
</li><li> void ComboBox.set_AutoCompleteMode (AutoCompleteMode)  -  AutoCompletion algorithm is currently not implemented.
</li><li> void ComboBox.set_AutoCompleteSource (AutoCompleteSource)  -  AutoCompletion algorithm is currently not implemented.
</li></ul>
<p>Looking at the report, we can immediately see several places we will most likely need to make adjustments for our program to work.
</p><p>The TODOs look pretty harmless, we can infer that if we rely on AutoSize, it's probably not going to work, and we are not going to have auto completion for our ComboBox.  Most of these missing methods won't be too big of a problem either once we work around them.  We can expect that we will not have ToolTips in our TreeView, and we can't set our PrintDialog to use the Windows XP dialog.  The missing event ListView.ItemSelectionChanged however will likely be a problem.  Because that event does not exist, it will not get fired, so whatever code we are doing in the event handler will not get called.
</p>
<h2> <span class="mw-headline" id="Trying_It_Out"> Trying It Out </span></h2>
<p>Even though MoMA shows there could be problems running the application, sometimes those problems aren't hit until certain features of the program are executed.  So let's try to run the application.
</p><p>Open "Mono-1.2.4 Command Prompt" that was created in the start menu by the Mono installer.  Go to the directory that contains the executable "NClass.NClass.exe", and try running it with Mono using:
</p>
<pre>
mono NClass.NClass.exe
</pre>
<p>Unfortunately, nothing seemed to happen.
</p><p><a href="{{site.github.url}}/images/old_site/8/8f/Cmd1.png" class="image"><img alt="Cmd1.png" src="{{site.github.url}}/images/old_site/8/8f/Cmd1.png" width="677" height="340" /></a>
</p><p>What actually happened is that the application ran, but hit an error and quit.  To see the error, we need to redirect the error output to a file, so we run:
</p>
<pre>
mono NClass.NClass.exe 2&gt; error.log
</pre>
<p>Looking at the log that was created, we see this error:
</p>
<pre>
** (NClass.NClass.exe:38272): WARNING **: Missing method System.Windows.Forms.PrintDialog::set_UseEXDialog(bool) in assembly C:\PROGRA~1\MONO-1~1.4\lib\mono\gac\System.Windows.Forms\2.0.0.0__b77a5c561934e089\System.Windows.Forms.dll, referenced in assembly C:\NClass\src\GUI\bin\Release\NClass.NClass.exe

Unhandled Exception: System.MissingMethodException: Method not found: 'System.Windows.Forms.PrintDialog.set_UseEXDialog'.
at &lt;0x00000&gt; &lt;unknown method&gt;
at NClass.GUI.MainForm.Init () [0x00000]
at NClass.GUI.MainForm..ctor () [0x00000]
at (wrapper remoting-invoke-with-check) NClass.GUI.MainForm:.ctor ()
at NClass.GUI.Program.Main (System.String[] args) [0x00000] 
</pre>
<p>This isn't really unexpected.  It is telling us that we tried to set the property PrintDialog.UseEXDialog, which MoMA already told us didn't exist in Mono.  So it time to start porting our source code to work around these issues.
</p>
<h2> <span class="mw-headline" id="Porting_Strategies"> Porting Strategies </span></h2>
<p>There are several approaches to porting code, depending on your goals.
</p>
<ul><li> The unsupported code can simply be removed or commented out if it is not needed.
</li><li> Compiler conditional directives (#if) can be used to create separate executables for .Net and Mono.
</li><li> The runtime (.Net or Mono) can be detected and use different code.
</li><li> The code can be rewritten to use supported methods in Mono.
</li></ul>
<p>Here is the section of code that is setting PrintDialog.UseEXDialog in MainForm.Designer.cs:
</p>
<pre class="csharp" style="font-family:monospace;">  <span style="color: #008080; font-style: italic;">// </span>
  <span style="color: #008080; font-style: italic;">// printDialog</span>
  <span style="color: #008080; font-style: italic;">// </span>
  <span style="color: #0600FF; font-weight: bold;">this</span><span style="color: #008000;">.</span><span style="color: #0000FF;">printDialog</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Document</span> <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">this</span><span style="color: #008000;">.</span><span style="color: #0000FF;">printDocument</span><span style="color: #008000;">;</span>
  <span style="color: #0600FF; font-weight: bold;">this</span><span style="color: #008000;">.</span><span style="color: #0000FF;">printDialog</span><span style="color: #008000;">.</span><span style="color: #0000FF;">UseEXDialog</span> <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">;</span></pre>
<h3> <span class="mw-headline" id="Remove_.2F_Comment_Code"> Remove / Comment Code </span></h3>
<p>If the code isn't really needed, the easiest thing to do is to remove it:
</p>
<pre class="csharp" style="font-family:monospace;">  <span style="color: #008080; font-style: italic;">// </span>
  <span style="color: #008080; font-style: italic;">// printDialog</span>
  <span style="color: #008080; font-style: italic;">// </span>
  <span style="color: #0600FF; font-weight: bold;">this</span><span style="color: #008000;">.</span><span style="color: #0000FF;">printDialog</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Document</span> <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">this</span><span style="color: #008000;">.</span><span style="color: #0000FF;">printDocument</span><span style="color: #008000;">;</span></pre>
<p>or comment it out:
</p>
<pre class="csharp" style="font-family:monospace;">  <span style="color: #008080; font-style: italic;">// </span>
  <span style="color: #008080; font-style: italic;">// printDialog</span>
  <span style="color: #008080; font-style: italic;">// </span>
  <span style="color: #0600FF; font-weight: bold;">this</span><span style="color: #008000;">.</span><span style="color: #0000FF;">printDialog</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Document</span> <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">this</span><span style="color: #008000;">.</span><span style="color: #0000FF;">printDocument</span><span style="color: #008000;">;</span>
  <span style="color: #008080; font-style: italic;">// this.printDialog.UseEXDialog = true;</span></pre>
<p>However, there will be plenty of cases when this is not feasible.
</p>
<h3> <span class="mw-headline" id="Compiler_Conditionals"> Compiler Conditionals </span></h3>
<p>Another strategy is to create different assemblies for .Net and Mono.  This can be done by wrapping all code that is not supported by Mono in conditional directives and compiling with and without the directive.
</p>
<pre class="csharp" style="font-family:monospace;">  <span style="color: #008080; font-style: italic;">// </span>
  <span style="color: #008080; font-style: italic;">// printDialog</span>
  <span style="color: #008080; font-style: italic;">// </span>
  <span style="color: #0600FF; font-weight: bold;">this</span><span style="color: #008000;">.</span><span style="color: #0000FF;">printDialog</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Document</span> <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">this</span><span style="color: #008000;">.</span><span style="color: #0000FF;">printDocument</span><span style="color: #008000;">;</span>
<span style="color: #008080;">#if&#160;!MONO</span>
  <span style="color: #0600FF; font-weight: bold;">this</span><span style="color: #008000;">.</span><span style="color: #0000FF;">printDialog</span><span style="color: #008000;">.</span><span style="color: #0000FF;">UseEXDialog</span> <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">;</span>
<span style="color: #008080;">#endif</span></pre>
<p>When compiling the version for Mono, we would specify the flag MONO in the Build tab of the GUI project properties.
</p><p><a href="{{site.github.url}}/images/old_site/3/39/Conditional.png" class="image"><img alt="Conditional.png" src="{{site.github.url}}/images/old_site/3/39/Conditional.png" width="697" height="424" /></a>
</p><p>The downside of this approach is that we must ship separate assemblies for different platforms.
</p>
<h3> <span class="mw-headline" id="Runtime_Conditionals"> Runtime Conditionals </span></h3>
<p>In order to have only one assembly for all platforms, but run different code on different platforms, we can detect at runtime whether we are using Mono or .Net.  First, create a function to detect if the assembly is running on Mono (from the <a href="{{site.github.url}}/FAQ:_Technical#How_can_I_detect_if_am_running_in_Mono.3F" class="external text" rel="nofollow">Technical FAQ</a>):
</p>
<pre class="csharp" style="font-family:monospace;">  <span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">bool</span> IsRunningOnMono <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
  <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span> Type<span style="color: #008000;">.</span><span style="color: #0000FF;">GetType</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;Mono.Runtime&quot;</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">!=</span> <span style="color: #0600FF; font-weight: bold;">null</span><span style="color: #008000;">;</span>
  <span style="color: #008000;">&#125;</span></pre>
<p>Then use the function to determine which code to run:
</p>
<pre class="csharp" style="font-family:monospace;">  <span style="color: #008080; font-style: italic;">// </span>
  <span style="color: #008080; font-style: italic;">// printDialog</span>
  <span style="color: #008080; font-style: italic;">// </span>
  <span style="color: #0600FF; font-weight: bold;">this</span><span style="color: #008000;">.</span><span style="color: #0000FF;">printDialog</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Document</span> <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">this</span><span style="color: #008000;">.</span><span style="color: #0000FF;">printDocument</span><span style="color: #008000;">;</span>
  <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">!</span>IsRunningOnMono <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#123;</span>
    SetupPrintDialog <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
  <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">...</span>
&#160;
<span style="color: #6666cc; font-weight: bold;">void</span> SetupPrintDialog <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
   <span style="color: #0600FF; font-weight: bold;">this</span><span style="color: #008000;">.</span><span style="color: #0000FF;">printDialog</span><span style="color: #008000;">.</span><span style="color: #0000FF;">UseEXDialog</span> <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p>Notice that we moved the code into a separate function, as this will prevent the JIT engine from throwing an exception as it JITs the code and determines that the method did not exist.   By moving the code into a different method we prevent the JIT engine from hitting it.
</p>
<h3> <span class="mw-headline" id="Rewriting_Code"> Rewriting Code </span></h3>
<p>Sometimes the best option is to simply rewrite the problem code in a way that is supported by Mono.  For example, MoMA told us that this application uses the ListView.ItemSelectionChanged event, which is not implemented in Mono.  However, the event ListView.SelectedIndexChanged event is implemented, and could be used for the same purpose.
</p><p>Here is the problem code:
</p>
<pre class="csharp" style="font-family:monospace;">  <span style="color: #0600FF; font-weight: bold;">this</span><span style="color: #008000;">.</span><span style="color: #0000FF;">lstItems</span><span style="color: #008000;">.</span><span style="color: #0000FF;">ItemSelectionChanged</span> <span style="color: #008000;">+=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> <span style="color: #000000;">System</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Windows</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Forms</span><span style="color: #008000;">.</span><span style="color: #0000FF;">ListViewItemSelectionChangedEventHandler</span><span style="color: #008000;">&#40;</span><span style="color: #0600FF; font-weight: bold;">this</span><span style="color: #008000;">.</span><span style="color: #0000FF;">lstItems_ItemSelectionChanged</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p>Which can be modified to:
</p>
<pre class="csharp" style="font-family:monospace;">  <span style="color: #0600FF; font-weight: bold;">this</span><span style="color: #008000;">.</span><span style="color: #0000FF;">lstItems</span><span style="color: #008000;">.</span><span style="color: #0000FF;">SelectedIndexChanged</span> <span style="color: #008000;">+=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> <span style="color: #000000;">System</span><span style="color: #008000;">.</span><span style="color: #0000FF;">EventHandler</span> <span style="color: #008000;">&#40;</span><span style="color: #0600FF; font-weight: bold;">this</span><span style="color: #008000;">.</span><span style="color: #0000FF;">lstItems_ItemSelectionChanged</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p>We then modify lstItems_ItemSelectionChanged from:
</p>
<pre class="csharp" style="font-family:monospace;">  <span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #6666cc; font-weight: bold;">void</span> lstItems_ItemSelectionChanged<span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">object</span> sender, ListViewItemSelectionChangedEventArgs e<span style="color: #008000;">&#41;</span>
  <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>lstItems<span style="color: #008000;">.</span><span style="color: #0000FF;">SelectedItems</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Count</span> <span style="color: #008000;">==</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span>
      ClearInput<span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #0600FF; font-weight: bold;">else</span>
      ItemSelected<span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
  <span style="color: #008000;">&#125;</span></pre>
<p>To:
</p>
<pre class="csharp" style="font-family:monospace;">  <span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #6666cc; font-weight: bold;">void</span> lstItems_ItemSelectionChanged<span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">object</span> sender, EventArgs e<span style="color: #008000;">&#41;</span>
  <span style="color: #008000;">&#123;</span>
    <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>lstItems<span style="color: #008000;">.</span><span style="color: #0000FF;">SelectedItems</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Count</span> <span style="color: #008000;">==</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span>
      ClearInput<span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #0600FF; font-weight: bold;">else</span>
      ItemSelected<span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
  <span style="color: #008000;">&#125;</span></pre>
<p>When possible (which isn't always the case), this method is the cleanest, as it uses the same code and provides the same functionality on both the Mono and .Net runtime.
</p>
<h2> <span class="mw-headline" id="Porting_NClass"> Porting NClass </span></h2>
<p>For our NClass application, we will comment out PrintDialog.UseEXDialog, TreeView.ShowNodeToolTips, and TreeNode.ToolTipText.  We will rewrite both occurrences of ListView.ItemSelectionChanged.
</p><p>MainForm.Designer.cs - Line 1196
</p>
<pre class="csharp" style="font-family:monospace;">  <span style="color: #008080; font-style: italic;">// this.printDialog.UseEXDialog = true;</span></pre>
<p>TreeDialog.Designer.cs - Line 66
</p>
<pre class="csharp" style="font-family:monospace;">  <span style="color: #008080; font-style: italic;">// this.treOperations.ShowNodeToolTips = true;</span></pre>
<p>TreeDialog.cs - Line 74
</p>
<pre class="csharp" style="font-family:monospace;">  <span style="color: #008080; font-style: italic;">// child.ToolTipText = operation.ToString();</span></pre>
<p>MembersDialog.designer.cs - Line 238
</p>
<pre class="csharp" style="font-family:monospace;">  <span style="color: #008080; font-style: italic;">// this.lstMembers.ItemSelectionChanged += new System.Windows.Forms.ListViewItemSelectionChangedEventHandler (this.lstMembers_ItemSelectionChanged);</span>
  <span style="color: #0600FF; font-weight: bold;">this</span><span style="color: #008000;">.</span><span style="color: #0000FF;">lstMembers</span><span style="color: #008000;">.</span><span style="color: #0000FF;">SelectedIndexChanged</span> <span style="color: #008000;">+=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> <span style="color: #000000;">System</span><span style="color: #008000;">.</span><span style="color: #0000FF;">EventHandler</span> <span style="color: #008000;">&#40;</span><span style="color: #0600FF; font-weight: bold;">this</span><span style="color: #008000;">.</span><span style="color: #0000FF;">lstMembers_ItemSelectionChanged</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p>Rewriting the listMembers_ItemSelectionChanged method takes a little bit more effort.  One way is to change it from:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #6666cc; font-weight: bold;">void</span> lstMembers_ItemSelectionChanged<span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">object</span> sender, ListViewItemSelectionChangedEventArgs e<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
  <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>e<span style="color: #008000;">.</span><span style="color: #0000FF;">IsSelected</span> <span style="color: #008000;">&amp;&amp;</span> e<span style="color: #008000;">.</span><span style="color: #0000FF;">Item</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Tag</span> <a href="http://www.google.com/search?q=is+msdn.microsoft.com"><span style="color: #008000;">is</span></a> Member<span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
    ShowNewMember<span style="color: #008000;">&#40;</span><span style="color: #008000;">&#40;</span>Member<span style="color: #008000;">&#41;</span> e<span style="color: #008000;">.</span><span style="color: #0000FF;">Item</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Tag</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&#160;
    toolDelete<span style="color: #008000;">.</span><span style="color: #0000FF;">Enabled</span> <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">;</span>
    <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>e<span style="color: #008000;">.</span><span style="color: #0000FF;">ItemIndex</span> <span style="color: #008000;">&lt;</span> attributeCount<span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
      toolMoveUp<span style="color: #008000;">.</span><span style="color: #0000FF;">Enabled</span> <span style="color: #008000;">=</span> <span style="color: #008000;">&#40;</span>e<span style="color: #008000;">.</span><span style="color: #0000FF;">ItemIndex</span> <span style="color: #008000;">&gt;</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
      toolMoveDown<span style="color: #008000;">.</span><span style="color: #0000FF;">Enabled</span> <span style="color: #008000;">=</span> <span style="color: #008000;">&#40;</span>e<span style="color: #008000;">.</span><span style="color: #0000FF;">ItemIndex</span> <span style="color: #008000;">&lt;</span> attributeCount <span style="color: #008000;">-</span> <span style="color: #FF0000;">1</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
    <span style="color: #0600FF; font-weight: bold;">else</span> <span style="color: #008000;">&#123;</span>
      toolMoveUp<span style="color: #008000;">.</span><span style="color: #0000FF;">Enabled</span> <span style="color: #008000;">=</span> <span style="color: #008000;">&#40;</span>e<span style="color: #008000;">.</span><span style="color: #0000FF;">ItemIndex</span> <span style="color: #008000;">&gt;</span> attributeCount<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
      toolMoveDown<span style="color: #008000;">.</span><span style="color: #0000FF;">Enabled</span> <span style="color: #008000;">=</span> <span style="color: #008000;">&#40;</span>e<span style="color: #008000;">.</span><span style="color: #0000FF;">ItemIndex</span> <span style="color: #008000;">&lt;</span> lstMembers<span style="color: #008000;">.</span><span style="color: #0000FF;">Items</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Count</span> <span style="color: #008000;">-</span> <span style="color: #FF0000;">1</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
  <span style="color: #008000;">&#125;</span>
  <span style="color: #0600FF; font-weight: bold;">else</span> <span style="color: #008000;">&#123;</span>
    toolMoveUp<span style="color: #008000;">.</span><span style="color: #0000FF;">Enabled</span> <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">false</span><span style="color: #008000;">;</span>
    toolMoveDown<span style="color: #008000;">.</span><span style="color: #0000FF;">Enabled</span> <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">false</span><span style="color: #008000;">;</span>
    toolDelete<span style="color: #008000;">.</span><span style="color: #0000FF;">Enabled</span> <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">false</span><span style="color: #008000;">;</span>
  <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p>To:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">private</span> <span style="color: #6666cc; font-weight: bold;">void</span> lstMembers_ItemSelectionChanged<span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">object</span> sender, EventArgs e<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
  <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>lstMembers<span style="color: #008000;">.</span><span style="color: #0000FF;">SelectedItems</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Count</span> <span style="color: #008000;">==</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
    toolMoveUp<span style="color: #008000;">.</span><span style="color: #0000FF;">Enabled</span> <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">false</span><span style="color: #008000;">;</span>
    toolMoveDown<span style="color: #008000;">.</span><span style="color: #0000FF;">Enabled</span> <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">false</span><span style="color: #008000;">;</span>
    toolDelete<span style="color: #008000;">.</span><span style="color: #0000FF;">Enabled</span> <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">false</span><span style="color: #008000;">;</span>
    <span style="color: #0600FF; font-weight: bold;">return</span><span style="color: #008000;">;</span>			
  <span style="color: #008000;">&#125;</span>
&#160;
  ListViewItem lvi <span style="color: #008000;">=</span> lstMembers<span style="color: #008000;">.</span><span style="color: #0000FF;">SelectedItems</span><span style="color: #008000;">&#91;</span><span style="color: #FF0000;">0</span><span style="color: #008000;">&#93;</span><span style="color: #008000;">;</span>
&#160;
  <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>lvi<span style="color: #008000;">.</span><span style="color: #0000FF;">Tag</span> <a href="http://www.google.com/search?q=is+msdn.microsoft.com"><span style="color: #008000;">is</span></a> Member<span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
    ShowNewMember <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#40;</span>Member<span style="color: #008000;">&#41;</span>lvi<span style="color: #008000;">.</span><span style="color: #0000FF;">Tag</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&#160;
    toolDelete<span style="color: #008000;">.</span><span style="color: #0000FF;">Enabled</span> <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">;</span>
    <span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span>lvi<span style="color: #008000;">.</span><span style="color: #0000FF;">Index</span> <span style="color: #008000;">&lt;</span> attributeCount<span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
      toolMoveUp<span style="color: #008000;">.</span><span style="color: #0000FF;">Enabled</span> <span style="color: #008000;">=</span> <span style="color: #008000;">&#40;</span>lvi<span style="color: #008000;">.</span><span style="color: #0000FF;">Index</span> <span style="color: #008000;">&gt;</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
      toolMoveDown<span style="color: #008000;">.</span><span style="color: #0000FF;">Enabled</span> <span style="color: #008000;">=</span> <span style="color: #008000;">&#40;</span>lvi<span style="color: #008000;">.</span><span style="color: #0000FF;">Index</span> <span style="color: #008000;">&lt;</span> attributeCount <span style="color: #008000;">-</span> <span style="color: #FF0000;">1</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
    <span style="color: #0600FF; font-weight: bold;">else</span> <span style="color: #008000;">&#123;</span>
      toolMoveUp<span style="color: #008000;">.</span><span style="color: #0000FF;">Enabled</span> <span style="color: #008000;">=</span> <span style="color: #008000;">&#40;</span>lvi<span style="color: #008000;">.</span><span style="color: #0000FF;">Index</span> <span style="color: #008000;">&gt;</span> attributeCount<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
      toolMoveDown<span style="color: #008000;">.</span><span style="color: #0000FF;">Enabled</span> <span style="color: #008000;">=</span> <span style="color: #008000;">&#40;</span>lvi<span style="color: #008000;">.</span><span style="color: #0000FF;">Index</span> <span style="color: #008000;">&lt;</span> lstMembers<span style="color: #008000;">.</span><span style="color: #0000FF;">Items</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Count</span> <span style="color: #008000;">-</span> <span style="color: #FF0000;">1</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
    <span style="color: #008000;">&#125;</span>
  <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<p>Also, make the changes to lstItems.ItemSelectionChanged and lstItems_ItemSelectionChanged outlined in the "Rewriting Code" section above.
</p><p>With these changes made, rebuild the solution in Visual Studio.  Then run the NClass.NClass.exe executable again.  This time we get much better results:
</p><p><a href="{{site.github.url}}/images/old_site/3/3f/Nclass1.png" class="image"><img alt="Nclass1.png" src="{{site.github.url}}/images/old_site/3/3f/Nclass1.png" width="700" height="500" /></a>
</p><p>Loading up the example file:
</p><p><a href="{{site.github.url}}/images/old_site/1/10/Nclass2.png" class="image"><img alt="Nclass2.png" src="{{site.github.url}}/images/old_site/1/10/Nclass2.png" width="700" height="500" /></a>
</p><p>Class members dialog:
</p><p><a href="{{site.github.url}}/images/old_site/8/86/Dialog1.png" class="image"><img alt="Dialog1.png" src="{{site.github.url}}/images/old_site/8/86/Dialog1.png" width="703" height="540" /></a>
</p>
<h2> <span class="mw-headline" id="Continuing_the_Port"> Continuing the Port </span></h2>
<p>Now that the application runs, you have a good starting point to work from.  However, it needs to be thoroughly tested for issues that MoMA can't find.  When exercising the application's code, it is possible that you will run into things that do not function as expected or the application may crash unexpectedly.  If these issues are bugs in Mono, please file the bug with a small test case (not your entire application) to Mono's bugzilla so we can fix them.  See <a href="{{site.github.url}}/old_site/Bugs" title="Bugs">Bugs</a> for details.  Other issues may just be poorly written code that can be fixed by rewriting it to be more robust and error-proof.
</p><p>There are still many issues with the NClass port, but for the sake of brevity, we will not attempt to fix them in this guide.
</p>
<h2> <span class="mw-headline" id="Running_on_Linux"> Running on Linux </span></h2>
<p>Ultimately, the goal is to run the application on Linux, so let's look at running NClass on Linux.  If you already have a Linux installation, you can look for Mono packages in your distro's package repositories.  
</p><p>If they are not there or are out of date, there are packages for many popular distros on Mono's <a href="{{site.github.url}}/old_site/Downloads" title="Downloads">Downloads</a> page.  If you cannot find pre-made packages, you can also compile from the source code.  Instructions are available <a href="{{site.github.url}}/old_site/Compiling_Mono" title="Compiling Mono">here</a>.
</p><p>If you do not have a Linux installation, another option is to run the openSUSE/Mono VMWare image.  This is the method we will use, which requires the following:
</p>
<ul><li> Free VMWare Player - <a href="http://www.vmware.com/products/player/" class="external free" rel="nofollow">http://www.vmware.com/products/player/</a>
</li><li> Mono 1.2.4 on openSUSE 10.2 VMWare image - <a href="{{site.github.url}}/old_site/Downloads" title="Downloads">Downloads</a>
</li></ul>
<p>After installing the VMWare player and unzipping the VMWare image, start the Mono image.  It should bring you to the openSUSE desktop:
</p><p><a href="{{site.github.url}}/images/old_site/b/bc/Linux1.jpg" class="image"><img alt="Linux1.jpg" src="{{site.github.url}}/images/old_site/b/bc/Linux1.jpg" width="700" height="559" /></a>
</p>
<div class="thumb tright"><div class="thumbinner" style="width:302px;"><a href="{{site.github.url}}/images/old_site/d/db/Linux3.jpg" class="image"><img alt="" src="{{site.github.url}}/images/old_site/d/db/Linux3.jpg" width="300" height="240" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="{{site.github.url}}/images/old_site/d/db/Linux3.jpg" class="internal" title="Enlarge"><img src="/skins/common/images/magnify-clip.png" width="15" height="11" alt="" /></a></div>Enabling User Shares</div></div></div>
<p>To transfer the application to the Mono image, we need to create a NClass directory and turn on directory sharing.
</p>
<ul><li> Right click the desktop, choose Create Directory, name the directory NClass.
</li><li> Click the "Computer" menu in the bottom left, choose Control Center.
</li><li> Choose "YaST" at the bottom, the password is "mono".
</li><li> Choose "Network Services", then "Samba Server".
</li><li> Check "Allow Users to Share Their Directories" on the "Shares" tab.
</li><li> Choose "Finish".
</li><li> Back on the desktop, Right click the "NClass" folder you created and choose "Sharing Options".
</li><li> Check "Share this folder" and "Allow other people to write to this folder".
</li><li> Click "Modify Share".
</li></ul>
<p>Now go back to Windows, and access your new share by typing "\\mono\nclass" into the Run dialog.  Copy your NClass project to the Mono image share.
</p><p><br />
</p><p>On the Mono image desktop, double click your NClass folder, and navigate to your compiled NClass.NClass.exe application.  Double click it and the application should run.
</p><p><a href="{{site.github.url}}/images/old_site/0/02/Linux4.png" class="image"><img alt="Linux4.png" src="{{site.github.url}}/images/old_site/0/02/Linux4.png" width="700" height="559" /></a>
</p>
<h3> <span class="mw-headline" id="Linux_Platform_Differences"> Linux Platform Differences </span></h3>
<p>There are two classes of issues you may run into during your port.  The first class are issues stemming from differences between the .Net and Mono runtime.  These can be worked out while still on Windows as shown above.  However, there is a second class of issues that you may come across.  These are issues stemming from differences between Windows and Linux (or OSX, etc.).
</p><p>Common OS Porting Issues
</p>
<ul><li> Use of Win32 P/Invokes
</li><li> Case sensitivity in file names.
</li><li> Use of "\" in paths.
</li></ul>
<p>As an example, lets say you have a subdirectory in your application called "Sounds" that contains the file "Finished.wav".  To play this sound, you have the following function:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #008000;">&#91;</span>DllImport <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;winmm.dll&quot;</span>, SetLastError <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#93;</span>
<span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #0600FF; font-weight: bold;">extern</span> <span style="color: #6666cc; font-weight: bold;">bool</span> PlaySound <span style="color: #008000;">&#40;</span><span style="color: #6666cc; font-weight: bold;">string</span> pszSound, IntPtr hmod, <span style="color: #6666cc; font-weight: bold;">int</span> fdwSound<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&#160;
<span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> PlayFinishedSound <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
  <span style="color: #6666cc; font-weight: bold;">string</span> sound <span style="color: #008000;">=</span> Application<span style="color: #008000;">.</span><span style="color: #0000FF;">ExecutablePath</span> <span style="color: #008000;">+</span> <span style="color: #666666;">@&quot;\Sounds\finished.wav&quot;</span><span style="color: #008000;">;</span>
  PlaySound <span style="color: #008000;">&#40;</span>sound, IntPtr<span style="color: #008000;">.</span><span style="color: #0000FF;">Zero</span>, <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p>This function exhibits all three mentioned porting issues.
</p><p>Mono has a special execution mode that will help you get your port moving faster (if you do not want to change the filename casing or path separators, see the <a href="{{site.github.url}}/old_site/IOMap" title="IOMap">IOMap</a> page for details. 
</p>
<h4> <span class="mw-headline" id="Win32_P.2FInvokes"> Win32 P/Invokes </span></h4>
<p>The PlaySound function is declared in the Win32 API dll "winmm.dll", which does not exist on Linux.  There are two ways around this.  One is to find the equivalent function in your target platform's API, and use runtime detection to determine which API to call.  If you are lucky, the easy way is to replace your API call with managed code.  In this case, we can use the System.Media.SoundPlayer class to play the sound for us, like this:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> PlayFinishedSound <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
  <span style="color: #6666cc; font-weight: bold;">string</span> sound <span style="color: #008000;">=</span> Application<span style="color: #008000;">.</span><span style="color: #0000FF;">ExecutablePath</span> <span style="color: #008000;">+</span> <span style="color: #666666;">@&quot;\Sounds\finished.wav&quot;</span><span style="color: #008000;">;</span>
  SoundPlayer sp <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> SoundPlayer <span style="color: #008000;">&#40;</span>sound<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
  sp<span style="color: #008000;">.</span><span style="color: #0000FF;">Play</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<h4> <span class="mw-headline" id="Case_Sensitivity"> Case Sensitivity </span></h4>
<p>Another difference between Windows and many other operating systems such as Linux is that the file system is case sensitive.  That is, in Windows the files "readme.txt" and "README.TXT" are the same, but in Linux those are distinct files.  Looking at our example, our file is called "Finished.wav", but we are 
referencing it in code as "finished.wav".  Although this will work on Windows, it will generate a FileNotFoundException on Linux.  So we must be consistent about the case of our file names:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> PlayFinishedSound <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
  <span style="color: #6666cc; font-weight: bold;">string</span> sound <span style="color: #008000;">=</span> Application<span style="color: #008000;">.</span><span style="color: #0000FF;">ExecutablePath</span> <span style="color: #008000;">+</span> <span style="color: #666666;">@&quot;\Sounds\Finished.wav&quot;</span><span style="color: #008000;">;</span>
  SoundPlayer sp <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> SoundPlayer <span style="color: #008000;">&#40;</span>sound<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
  sp<span style="color: #008000;">.</span><span style="color: #0000FF;">Play</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<h4> <span class="mw-headline" id="The_Path_Separator"> The Path Separator </span></h4>
<p>Another issue you may run across is the path separator ("\") used in file paths.  In many other operating systems, such as Linux, the path separator is a forward slash ("/") instead of a backwards slash like Windows.  In our example, we have hard coded a backwards slash that will cause our file to not be found.
</p><p>We can correct this using Path.DirectorySeparatorChar:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> PlayFinishedSound <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
  <span style="color: #6666cc; font-weight: bold;">string</span> sound <span style="color: #008000;">=</span> Application<span style="color: #008000;">.</span><span style="color: #0000FF;">ExecutablePath</span> <span style="color: #008000;">+</span> <span style="color: #6666cc; font-weight: bold;">string</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Format</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;{0}Sounds{0}Finished.wav&quot;</span>, Path<span style="color: #008000;">.</span><span style="color: #0000FF;">DirectorySeparatorChar</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
  SoundPlayer sp <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> SoundPlayer <span style="color: #008000;">&#40;</span>sound<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
  sp<span style="color: #008000;">.</span><span style="color: #0000FF;">Play</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p>or using Path.Combine:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">public</span> <span style="color: #6666cc; font-weight: bold;">void</span> PlayFinishedSound <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
  <span style="color: #6666cc; font-weight: bold;">string</span> path <span style="color: #008000;">=</span> Path<span style="color: #008000;">.</span><span style="color: #0000FF;">Combine</span> <span style="color: #008000;">&#40;</span>Application<span style="color: #008000;">.</span><span style="color: #0000FF;">ExecutablePath</span>, <span style="color: #666666;">&quot;Sounds&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
  <span style="color: #6666cc; font-weight: bold;">string</span> sound <span style="color: #008000;">=</span> Path<span style="color: #008000;">.</span><span style="color: #0000FF;">Combine</span> <span style="color: #008000;">&#40;</span>path, <span style="color: #666666;">&quot;Finished.wav&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
  SoundPlayer sp <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> SoundPlayer <span style="color: #008000;">&#40;</span>sound<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
  sp<span style="color: #008000;">.</span><span style="color: #0000FF;">Play</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre>
<p>Either method will ensure that the correct path separator is used on the correct operating system.
</p><p>For some more issues you might run into and a more detailed look at options for dealing with them, see <a href="{{site.github.url}}/old_site/Guidelines:Application_Portability" title="Guidelines:Application Portability">Guidelines:Application Portability</a>.
</p>
<h2> <span class="mw-headline" id="Conclusion"> Conclusion </span></h2>
<p>Using this guide, we have managed to port a non-trivial winforms app to start up on Mono on Linux in a couple of hours.  Although it is not complete, once the application is starting up on Mono, it's a good beginning to test and see what issues remain.
</p>
<h2> <span class="mw-headline" id="Advanced_Guides"> Advanced Guides </span></h2>
<ul><li> <a href="{{site.github.url}}/old_site/Guide:_Debugging_With_MWF" title="Guide: Debugging With MWF">Guide: Debugging With MWF</a> - Shows how to use the MWF project file from SVN to debug issues.
</li></ul>

