---
layout: obsolete
title: "OutputFromConsoleApp"
permalink: /old_site/OutputFromConsoleApp/
redirect_from:
  - /OutputFromConsoleApp/
---

<h1>OutputFromConsoleApp</h1>

<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Table of contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Preface"><span class="tocnumber">1</span> <span class="toctext">Preface</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Some_Code"><span class="tocnumber">2</span> <span class="toctext">Some Code</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#A_Few_Words"><span class="tocnumber">2.1</span> <span class="toctext">A Few Words</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#References"><span class="tocnumber">3</span> <span class="toctext">References</span></a></li>
</ul>
</td></tr></table>
<h1> <span class="mw-headline" id="Preface"> Preface </span></h1>
<dl><dd>It's really useful to able to get some output from a console application, especially on Linux or other UNIX-like system, because there some really powerful command-line tools. Since I didn't find any information how to do this, I'm writing this MiniMini-HOWTO. Let's get some code and explain how it works.
</dd></dl>
<h1> <span class="mw-headline" id="Some_Code"> Some Code </span></h1>
<pre class="csharp" style="font-family:monospace;"><span style="color: #008080; font-style: italic;">// mcs proc.cs</span>
<span style="color: #008080; font-style: italic;">// Outputs the files in the directory where the program is located</span>
&#160;
<span style="color: #008080; font-style: italic;">// defines classes which we're going to use</span>
<span style="color: #0600FF; font-weight: bold;">using</span> <span style="color: #008080;">System</span><span style="color: #008000;">;</span>
<span style="color: #0600FF; font-weight: bold;">using</span> <span style="color: #008080;">System.Diagnostics</span><span style="color: #008000;">;</span>
&#160;
<span style="color: #6666cc; font-weight: bold;">class</span> ProcessOutput <span style="color: #008000;">&#123;</span>
&#160;
	<span style="color: #0600FF; font-weight: bold;">static</span> <span style="color: #6666cc; font-weight: bold;">void</span> Main <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span> <span style="color: #008080; font-style: italic;">// starting point of the program</span>
	<span style="color: #008000;">&#123;</span>
		<span style="color: #008080; font-style: italic;">// sets up our process, the first argument is the command </span>
		<span style="color: #008080; font-style: italic;">// and the second holds the arguments passed to the command</span>
		ProcessStartInfo ps <span style="color: #008000;">=</span> <a href="http://www.google.com/search?q=new+msdn.microsoft.com"><span style="color: #008000;">new</span></a> ProcessStartInfo <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;ls&quot;</span>, <span style="color: #666666;">&quot;./&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
		ps<span style="color: #008000;">.</span><span style="color: #0000FF;">UseShellExecute</span> <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">false</span><span style="color: #008000;">;</span>
&#160;
		<span style="color: #008080; font-style: italic;">// we need to redirect the standard output so we read it</span>
		<span style="color: #008080; font-style: italic;">// internally in out program</span>
		ps<span style="color: #008000;">.</span><span style="color: #0000FF;">RedirectStandardOutput</span> <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">true</span><span style="color: #008000;">;</span>
&#160;
		<span style="color: #008080; font-style: italic;">// starts the process</span>
		<span style="color: #0600FF; font-weight: bold;">using</span> <span style="color: #008000;">&#40;</span>Process p <span style="color: #008000;">=</span> Process<span style="color: #008000;">.</span><span style="color: #0000FF;">Start</span> <span style="color: #008000;">&#40;</span>ps<span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
&#160;
			<span style="color: #008080; font-style: italic;">// we read the output to a string</span>
			<span style="color: #6666cc; font-weight: bold;">string</span> output <span style="color: #008000;">=</span> p<span style="color: #008000;">.</span><span style="color: #0000FF;">StandardOutput</span><span style="color: #008000;">.</span><span style="color: #0000FF;">ReadToEnd</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&#160;
			<span style="color: #008080; font-style: italic;">// waits for the process to exit</span>
			<span style="color: #008080; font-style: italic;">// Must come *after* StandardOutput is &quot;empty&quot;</span>
			<span style="color: #008080; font-style: italic;">// so that we don't deadlock because the intermediate</span>
			<span style="color: #008080; font-style: italic;">// kernel pipe is full.</span>
			p<span style="color: #008000;">.</span><span style="color: #0000FF;">WaitForExit</span> <span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&#160;
			<span style="color: #008080; font-style: italic;">// finally output the string</span>
			Console<span style="color: #008000;">.</span><span style="color: #0000FF;">WriteLine</span> <span style="color: #008000;">&#40;</span>output<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
		<span style="color: #008000;">&#125;</span>
	<span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>
<h2> <span class="mw-headline" id="A_Few_Words"> A Few Words </span></h2>
<dl><dd>There's one thing I want to bring your attention to, look at this call:
</dd></dl>
<pre class="csharp" style="font-family:monospace;">p<span style="color: #008000;">.</span><span style="color: #0000FF;">WaitForExit</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<dl><dd>This call will cause your application to wait for the process you started to finish. Have in mind, that it will lock up your application. You can avoid this using threads, which will be a subject of another article.
</dd><dd> Keep in mind that the process output may be quite large, so calling <i>p.StandardOutput.ReadToEnd()</i> is likely a bad idea.  In this case you should use <i>p.StandardOutput.Read()</i> or <i>p.StandardOutput.ReadLine()</i> until you've consumed all output.
</dd></dl>
<h1> <span class="mw-headline" id="References"> References </span></h1>
<dl><dd><ul><li>[http:/monodoc/N:System.Diagnostics Documentation]
</li></ul>
</dd></dl>

