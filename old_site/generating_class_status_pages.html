---
layout: obsolete
title: "Generating class status pages"
permalink: /old_site/Generating_class_status_pages/
redirect_from:
  - /Generating_class_status_pages/
---

<h1>Generating class status pages</h1>

<p>As you evolve your APIs, you might want to ensure that you have not removed accidentally public API entry points, or changed their APIs if you want your users to experience a smooth upgrade to a new version of your library.
</p><p>To achieve this, you can use some tools that the Mono team uses internally.
</p>
<h2> <span class="mw-headline" id="The_Concept"> The Concept </span></h2>
<p>We use a couple of tools to check API compatibility.  The <b>mono-api-info</b> tool is used to generate an XML representation of an assembly, this is done by using reflection.  The tool is run on your original and new versions of the assemblies, and then you employ the <b>mono-api-diff</b> tool to generate a list of differences in your libraries.
</p><p>The differences can then be rendered into an DHTML page that allows the developers to browse the changes, or can be consumed by your own tools to document changes or annotate your documentation.
</p>
<h2> <span class="mw-headline" id="Using_our_tools"> Using our tools </span></h2>
<p>If you want to use our tools to compare your own libraries you will need to build the tools using SVN (see <a href="{{site.github.url}}/old_site/SourceCodeRepository">AnonSVN</a>).
</p><p>Once you check out the <i>mcs</i> module:
</p>
<ul><li> Go to <i>mcs/tools/corcompare</i> and type <i>make</i>. It will compile <b>mono-api-info</b> and <b>mono-api-diff</b>.
</li><li> Running the following command will give you /tmp/yourassembly-v1.xml containing a list of classes, methods, etc...:
</li></ul>
<pre class="bash" style="font-family:monospace;">mono mono-api-info.exe <span style="color: #000000; font-weight: bold;">/</span>home<span style="color: #000000; font-weight: bold;">/</span>user<span style="color: #000000; font-weight: bold;">/</span>blah<span style="color: #000000; font-weight: bold;">/</span>yourassembly-v1.dll <span style="color: #000000; font-weight: bold;">&gt;</span> <span style="color: #000000; font-weight: bold;">/</span>tmp<span style="color: #000000; font-weight: bold;">/</span>yourassembly-v1.xml</pre>
<ul><li> Run:
</li></ul>
<pre class="bash" style="font-family:monospace;">mono mono-api-info.exe <span style="color: #000000; font-weight: bold;">/</span>home<span style="color: #000000; font-weight: bold;">/</span>user<span style="color: #000000; font-weight: bold;">/</span>blah<span style="color: #000000; font-weight: bold;">/</span>yourassembly-v2.dll <span style="color: #000000; font-weight: bold;">&gt;</span> <span style="color: #000000; font-weight: bold;">/</span>tmp<span style="color: #000000; font-weight: bold;">/</span>yourassembly-v2.xml</pre>
<ul><li> Now we want to compare the two XML files that we have and generate another one that will be used when creating the web page.
</li></ul>
<pre class="bash" style="font-family:monospace;">mono mono-api-diff.exe <span style="color: #000000; font-weight: bold;">/</span>tmp<span style="color: #000000; font-weight: bold;">/</span>yourassembly-v1.xml <span style="color: #000000; font-weight: bold;">/</span>tmp<span style="color: #000000; font-weight: bold;">/</span>yourassembly-v2.xml <span style="color: #000000; font-weight: bold;">&gt;</span> <span style="color: #000000; font-weight: bold;">/</span>tmp<span style="color: #000000; font-weight: bold;">/</span>yourassembly-compare-v1-vs-v2.xml</pre>
<p>When you run <i>make</i> in <i>mcs/tools/corcompare</i>, <b>transform.exe</b> was also compiled. This is a small program that just applies a given XSL transformation to a XML file. In the same directory, there's a <b>mono-api.xsl</b> containing the XSL transformation that we use.
</p><p>The command:
</p>
<pre class="bash" style="font-family:monospace;">mono transform.exe <span style="color: #000000; font-weight: bold;">/</span>tmp<span style="color: #000000; font-weight: bold;">/</span>yourassembly-compare-v1-vs-v2.xml mono-api.xsl <span style="color: #000000; font-weight: bold;">&gt;</span> <span style="color: #000000; font-weight: bold;">/</span>tmp<span style="color: #000000; font-weight: bold;">/</span>v1-vs-v2.html</pre>
<p>will create the HTML page in /tmp/v1-vs-v2.html.
</p><p>The images and javascript files used by the generated HTML are also in module <i>mono</i>, directory <b>mono/web/web/deploy/cm</b>.
</p><p>For these files to work, you must insert the generated HTML into a container that pulls the scripts at startup, the "cm/cormissing.js" file and reference the file cm/cormissing.css as well, like this:
</p>
<pre class="xml" style="font-family:monospace;">   <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;head<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
     <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;link</span> <span style="color: #000066;">rel</span>=<span style="color: #ff0000;">&quot;stylesheet&quot;</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;text/css&quot;</span> <span style="color: #000066;">href</span>=<span style="color: #ff0000;">&quot;cm/cormissing.css&quot;</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>
     <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;script</span> <span style="color: #000066;">src</span>=<span style="color: #ff0000;">&quot;cm/cormissing.js&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span><span style="color: #000000; font-weight: bold;">&lt;/script<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
   <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/head<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre>

