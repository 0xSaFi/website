---
layout: obsolete
title: "FAQ: Security"
permalink: /old_site/FAQ:_Security/
---

<h1>FAQ: Security</h1>

<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Secure_Socket_Layer_.28SSL.29_.2F_Transport_Layer_Security_.28TLS.29"><span class="tocnumber">1</span> <span class="toctext">Secure Socket Layer (SSL) / Transport Layer Security (TLS)</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#WebRequest.Create_.28.22https:.2F.2Fwww.anywhere.com.22.29.3B_throws_an_exception"><span class="tocnumber">1.1</span> <span class="toctext">WebRequest.Create ("https://www.anywhere.com"); throws an exception</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#I_imported_the_root_certificate_but_it_still_doesn.27t_work.21"><span class="tocnumber">1.2</span> <span class="toctext">I imported the root certificate but it still doesn't work!</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#How_can_I_debug_https_traffic.3F"><span class="tocnumber">1.3</span> <span class="toctext">How can I debug https traffic?</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#I_got_the_root_certificate_but_it_doesn.27t_install.21"><span class="tocnumber">1.4</span> <span class="toctext">I got the root certificate but it doesn't install!</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Why_does_SSL_use_certificates_.3F"><span class="tocnumber">1.5</span> <span class="toctext">Why does SSL use certificates&#160;?</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Are_SSL_client_certificates_supported_.3F"><span class="tocnumber">1.6</span> <span class="toctext">Are SSL client certificates supported&#160;?</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Does_SSL_works_for_SMTP.2C_like_GMail_.3F"><span class="tocnumber">1.7</span> <span class="toctext">Does SSL works for SMTP, like GMail&#160;?</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#FIPS_Certification"><span class="tocnumber">2</span> <span class="toctext">FIPS Certification</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Are_there_any_efforts_to_bind_external_libraries_that_are_FIPS_certified.3F"><span class="tocnumber">2.1</span> <span class="toctext">Are there any efforts to bind external libraries that are FIPS certified?</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#Authenticode.28r.29_Code_Signing"><span class="tocnumber">3</span> <span class="toctext">Authenticode(r) Code Signing</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#Does_Mono_support_Authenticode.28r.29_signatures_.3F"><span class="tocnumber">3.1</span> <span class="toctext">Does Mono support Authenticode(r) signatures&#160;?</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Does_Mono_support_Authenticode.28r.29_signatures_on_CAB_file_.3F"><span class="tocnumber">3.2</span> <span class="toctext">Does Mono support Authenticode(r) signatures on CAB file&#160;?</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#What_does_.22signature_can.27t_be_traced_back_to_a_trusted_root.21.22_means_.3F"><span class="tocnumber">3.3</span> <span class="toctext">What does "signature can't be traced back to a trusted root!" means&#160;?</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15"><a href="#Public_Key_Infrastructure_.28PKI.29"><span class="tocnumber">4</span> <span class="toctext">Public Key Infrastructure (PKI)</span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="#Is_Mono_fully_compatible_with_RFC2459_or_RFC3280_.3F"><span class="tocnumber">4.1</span> <span class="toctext">Is Mono fully compatible with RFC2459 or RFC3280&#160;?</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Why_doesn.27t_Mono_includes_root_certificates_from_X.2C_Y_and_Z_.3F"><span class="tocnumber">4.2</span> <span class="toctext">Why doesn't Mono includes root certificates from X, Y and Z&#160;?</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#So_where_can_I_download_them_.3F"><span class="tocnumber">4.3</span> <span class="toctext">So where can I download them&#160;?</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Can_I_make_my_own_certificates_.3F"><span class="tocnumber">4.4</span> <span class="toctext">Can I make my own certificates&#160;?</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-20"><a href="#Code_Access_Security_.28CAS.29"><span class="tocnumber">5</span> <span class="toctext">Code Access Security (CAS)</span></a>
<ul>
<li class="toclevel-2 tocsection-21"><a href="#Does_Mono_support_CAS_.3F"><span class="tocnumber">5.1</span> <span class="toctext">Does Mono support CAS&#160;?</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#How_can_I_activate_CAS_.3F"><span class="tocnumber">5.2</span> <span class="toctext">How can I activate CAS&#160;?</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#Will_Mono_have_a_complete_verifier.3F"><span class="tocnumber">5.3</span> <span class="toctext">Will Mono have a complete verifier?</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#How_many_checks_are_missing_to_have_a_full_verifier.3F"><span class="tocnumber">5.4</span> <span class="toctext">How many checks are missing to have a full verifier?</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-25"><a href="#Security_related_compilation_issues"><span class="tocnumber">6</span> <span class="toctext">Security related compilation issues</span></a>
<ul>
<li class="toclevel-2 tocsection-26"><a href="#Compiling_Mono.27s_mscorlib.dll_with_CSC_7.x_.28Fx_1.x.29"><span class="tocnumber">6.1</span> <span class="toctext">Compiling Mono's mscorlib.dll with CSC 7.x (Fx 1.x)</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#System.Security.SecurityException_:_Failure_decoding_embedded_permission_set_object."><span class="tocnumber">6.2</span> <span class="toctext">System.Security.SecurityException&#160;: Failure decoding embedded permission set object.</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#How_are_Windows_roles_mapped_into_Unix_roles.3F"><span class="tocnumber">6.3</span> <span class="toctext">How are Windows roles mapped into Unix roles?</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#How_can_I_make_calls_to_WindowsPrincipal.IsInRole_.28.29_work_on_Linux.3F"><span class="tocnumber">6.4</span> <span class="toctext">How can I make calls to WindowsPrincipal.IsInRole () work on Linux?</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-30"><a href="#Other_resources_on_this_site"><span class="tocnumber">7</span> <span class="toctext">Other resources on this site</span></a>
<ul>
<li class="toclevel-2 tocsection-31"><a href="#Known_Vulnerabilities"><span class="tocnumber">7.1</span> <span class="toctext">Known Vulnerabilities</span></a></li>
</ul>
</li>
</ul>
</td></tr></table>
<h1> <span class="mw-headline" id="Secure_Socket_Layer_.28SSL.29_.2F_Transport_Layer_Security_.28TLS.29"> Secure Socket Layer (SSL) / Transport Layer Security (TLS) </span></h1>
<h2> <span class="mw-headline" id="WebRequest.Create_.28.22https:.2F.2Fwww.anywhere.com.22.29.3B_throws_an_exception"> WebRequest.Create ("<a href="https://www.anywhere.com" class="external free" rel="nofollow">https://www.anywhere.com</a>"); throws an exception </span></h2>
<p>That's probably because you do not trust the site you are connecting to. Note that a default installation of Mono doesn't trust anyone!
</p><p>You can confirm this by using the <a href="https://raw.github.com/mono/mono/master/mcs/class/Mono.Security/Test/tools/tlstest/tlstest.cs" class="external autonumber" rel="nofollow">[1]</a> tool.
</p><p><code>mcs tlstest.cs /r:System.dll /r:Mono.Security.dll
</p>
<pre>mono tlstest.exe <a href="https://www.anywhere.com" class="external free" rel="nofollow">https://www.anywhere.com</a>
</pre>
<p></code>
</p><p>There are three alternatives to solve this problem:
</p>
<ul><li> Implement a <code><a href="http://www.go-mono.com/docs/monodoc.ashx?link=T%3aSystem.Net.ICertificatePolicy" class="external text" rel="nofollow">ICertificatePolicy</a></code> class. By doing this you can override the normal results of the certificate validation (e.g. accepting an untrusted certificate). However you are now responsible of applying your own trust rules for your application. Further suggestions and source code are available in the <a href="{{site.baseurl}}/UsingTrustedRootsRespectfully" title="UsingTrustedRootsRespectfully">UsingTrustedRootsRespectfully</a> article.
</li></ul>
<ul><li> Use the <code>certmgr.exe</code> tool (included in Mono) to add the root certificates into the Mono <b>Trust</b> store. Every SSL certificate signed from this root will then be accepted (i.e. no exception will be thrown) for SSL usage (for all Mono applications running for the user or the computer - depending on the certificate store where the certificate was installed).
</li></ul>
<ul><li> Use the <code>mozroots.exe</code> tool (included in Mono 1.1.10 and later) to download and install <b>all</b> Mozilla's root certificates (i.e. the ones used in FireFox and other Mozilla's softwares). It's easier than finding a specific root but it's also less granular to make a decision about which one(s) you install or not.
</li></ul>
<h2> <span class="mw-headline" id="I_imported_the_root_certificate_but_it_still_doesn.27t_work.21"> I imported the root certificate but it still doesn't work! </span></h2>
<p><a href="http://www.ietf.org/rfc/rfc2818.txt" class="external text" rel="nofollow">HTTPS</a>, like many protocols using <a href="http://wp.netscape.com/eng/ssl3/" class="external text" rel="nofollow">SSL</a>/<a href="http://www.ietf.org/rfc/rfc2246.txt" class="external text" rel="nofollow">TLS</a>, doesn't requires the server to send its root certificate when negotiating the handshake. In this case it won't be possible to use <code>certmgr --ssl</code> to download automatically the root certificate into Mono's certificate stores.
</p><p>You'll need to either:
</p>
<ul><li> find the root certificate and install it manually with <code>certmgr</code>; <b>or</b>
</li><li> use the <code>mozroots</code> tool to install all (or part of) Mozilla's root certificates. This has a high probability to install the required root certificate - but will also install a lot of extra roots (about 100 of them).
</li></ul>
<h2> <span class="mw-headline" id="How_can_I_debug_https_traffic.3F"> How can I debug https traffic? </span></h2>
<p>Use the webscarab tool and set the http_proxy environment variable to the address of the webscarab server, this will allow you to watch the traffic unencrypted.
</p>
<h2> <span class="mw-headline" id="I_got_the_root_certificate_but_it_doesn.27t_install.21"> I got the root certificate but it doesn't install! </span></h2>
<p>Some Certificate Authorities (CA) still use <i>very old</i> root certificates signed with the <a href="http://www.ietf.org/rfc/rfc1319.txt" class="external text" rel="nofollow">MD2</a> digest algorithm. MD2 is old enough not to be part of the standard .NET framework. This makes it impossible to validate the root certificate digital signature.
</p><p>To correct this you must enabled MD2 support in your <code>machine.config</code> file. This is possible because the <code>Mono.Security.dll</code> assembly contains a managed MD2 implementation to ensure compatibility with older certificates. The following XML snippet must be added, inside the inside the <code>&lt;configuration&gt;</code> element of your <code>machine.config</code> file in order to associate the MD2 OID (object identifier) with the hash algorithm implementation.
­
</p>
<pre>&lt;mscorlib&gt;
    &lt;cryptographySettings&gt;
        &lt;cryptoNameMapping&gt;
            &lt;cryptoClasses&gt;
                &lt;cryptoClass monoMD2="Mono.Security.Cryptography.MD2Managed, Mono.Security,
                    Version=1.0.5000.0, Culture=neutral, PublicKeyToken=0738eb9f132ed756" /&gt;
            &lt;/cryptoClasses&gt;
            &lt;nameEntry name="MD2" class="monoMD2" /&gt;
        &lt;/cryptoNameMapping&gt;
        &lt;oidMap&gt;
            &lt;oidEntry OID="1.2.840.113549.2.2" name="MD2" /&gt;
        &lt;/oidMap&gt;
    &lt;/cryptographySettings&gt;
&lt;/mscorlib&gt;
</pre>
<p><br />
</p>
<h2> <span class="mw-headline" id="Why_does_SSL_use_certificates_.3F"> Why does SSL use certificates&#160;? </span></h2>
<ol><li> SSL encrypts data - but encrypting data to an untrusted server doesn't improve much security. You need to know who is on the other side of the socket! (e.g. think about a man-in-the-middle attack between you and your bank). 
</li><li> SSL use X.509 certificates for the purpose of binding a public key with an entity (in this case the web server). The server gets its certificate from a certificate authority (CA) who certify that the key belongs to its owner. Finally you must <b>trust</b> that CA to do its job properly.
</li></ol>
<p><br />
</p>
<h2> <span class="mw-headline" id="Are_SSL_client_certificates_supported_.3F"> Are SSL client certificates supported&#160;? </span></h2>
<p>Both SslClientStream and SslServerStream, in Mono.Security.dll, support client certificates, however HttpWebRequest doesn't due to a strange design/relationship between the 1.x framework and Windows/CryptoAPI (i.e. there is no managed API to associate a certificate with a private key). This should be fixed in the 2.0 profile as the X509Certificate class has been extended to provide this association.
</p><p>Also recent versions of <a href="http://www.mono-project.com/ASP.NET#XSP" class="external text" rel="nofollow">XSP</a> do support SSL/TLS and client certificates. See the <a href="{{site.baseurl}}/UsingClientCertificatesWithXSP" title="UsingClientCertificatesWithXSP">UsingClientCertificatesWithXSP</a> article for more details.
</p><p><br />
</p>
<h2> <span class="mw-headline" id="Does_SSL_works_for_SMTP.2C_like_GMail_.3F"> Does SSL works for SMTP, like GMail&#160;? </span></h2>
<p>Yes it does. First you must import the root certificates using the <code>mozroots</code> tool:
</p>
<pre>mozroots --import --ask-remove 
</pre>
<p>Note that if you are using a web application (i.e. not the current user) you must add the <code>--machine</code> option like this:
</p>
<pre>mozroots --import --ask-remove --machine
</pre>
<p>Next you need to import the intermediate certificates. You can do this by using the <code>certmgr</code> tool to connect to the SSL server. E.g.
</p>
<pre>certmgr -ssl smtps://smtp.gmail.com:465
</pre>
<p>Use the <code>-m</code> option to import the certificates into the machine store if required.
</p><p>Finally you need to make sure to use the SSL-enabled port in your application. This is generally 465 or 587 instead of port 25.
</p>
<h1> <span class="mw-headline" id="FIPS_Certification"> FIPS Certification </span></h1>
<p><b> What is the status of FIPS 140 certification? </b>
</p><p>The Mono cryptographic stack is not FIPS 140 certified and there are currently no plans on doing so as it is both a time consuming and expensive certification to go through.
</p><p>If you absolutely must use FIPS 140 certified code, you should be able to call a native library that has been FIPS 140 certified from managed code (say, wrapping NSS).
</p><p>Alternatively, if you have a certified implementation and the wrapper, you can instruct Mono to automatically use your new implementation by using the machine.config mapping.
</p>
<h2> <span class="mw-headline" id="Are_there_any_efforts_to_bind_external_libraries_that_are_FIPS_certified.3F"> Are there any efforts to bind external libraries that are FIPS certified? </span></h2>
<p>There is an ongoing effort part of Mono called the <a href="{{site.baseurl}}/Crimson" title="Crimson">Crimson</a> project, you might want to contribute to that effort.
</p><p><br />
</p>
<h1> <span class="mw-headline" id="Authenticode.28r.29_Code_Signing"> Authenticode(r) Code Signing </span></h1>
<h2> <span class="mw-headline" id="Does_Mono_support_Authenticode.28r.29_signatures_.3F"> Does Mono support Authenticode(r) signatures&#160;? </span></h2>
<p>Yes. Mono supports Authenticode signatures for <b>assemblies</b>. As assemblies are <b>PE</b> files this also means that Mono support signing any kind of PE file, e.g. EXE, DLL, OCX, SCR ...
</p>
<h2> <span class="mw-headline" id="Does_Mono_support_Authenticode.28r.29_signatures_on_CAB_file_.3F"> Does Mono support Authenticode(r) signatures on CAB file&#160;? </span></h2>
<p>No. CAB files aren't <b>PE</b> file. While the signature mechanim is probably much alike the CAB format is very different from the PE format. Mono doesn't requires CAB files at this time (and may never will) so support for signing/verifying CAB files is unlikely to appear (unless someone feel likes contributing it).
</p>
<h2> <span class="mw-headline" id="What_does_.22signature_can.27t_be_traced_back_to_a_trusted_root.21.22_means_.3F"> What does "<i>signature can't be traced back to a trusted root!</i>" means&#160;? </span></h2>
<p>The default installation of Mono doesn't trust any root certificate authority (CA). While verifying a signed PE file the <code>chktrust</code> utility will try to find a <b>trusted root</b> and if it cannot will display the following error.
</p>
<pre>Mono CheckTrust 1.1.4.0

Verifying file sample.exe for Authenticode(tm) signatures...

WARNING! sample.exe is not timestamped!

ERROR! sample.exe signature can't be traced back to a trusted root!
</pre>
<p>You can use the <code>certmgr</code> tool to add the code signing root certificate in the Mono trust certificate store.
</p>
<h1> <span class="mw-headline" id="Public_Key_Infrastructure_.28PKI.29"> Public Key Infrastructure (PKI) </span></h1>
<h2> <span class="mw-headline" id="Is_Mono_fully_compatible_with_RFC2459_or_RFC3280_.3F"> Is Mono fully compatible with RFC2459 or RFC3280&#160;? </span></h2>
<p>No. Mono support a limited subset of PKIX certificate path building and validation. This is enough to support <b>simple</b> cases like SSL/TLS and Authenticode(r). Version 2.0 of the .NET framework includes improved support for PKI, e.g. a new <code>X509Chain</code> class, so better support for PKI is on the Mono roadmap.
</p>
<h2> <span class="mw-headline" id="Why_doesn.27t_Mono_includes_root_certificates_from_X.2C_Y_and_Z_.3F"> Why doesn't Mono includes root certificates from X, Y and Z&#160;? </span></h2>
<p>There are two main reasons not to include "defaults" root certificates in Mono.
</p>
<ol><li> Digital certificates are, like many digital files, copyrightable. This means that <b>there are</b> restrictions on how the roots certificates can be distributed.
</li><li> We aren't in the business to decide on <b>who <u>you</u> are going to trust</b>. Certificates Authorities exists all around the world. The ones best suited to you aren't necessarily the ones best suited for everybody else and having a terribly long list of "trusted" roots isn't a very secure solution.
</li></ol>
<h2> <span class="mw-headline" id="So_where_can_I_download_them_.3F"> So where can I download them&#160;? </span></h2>
<p>Too many CA, too many places. The most common ones are (in alphabetical order):
</p>
<ul><li> <a href="http://www.cacert.org/index.php?id=3" class="external text" rel="nofollow">CAcert.org</a>
</li><li> <a href="http://www.entrust.net/developer/index.cfm" class="external text" rel="nofollow">Entrust</a>
</li><li> <a href="http://www.geotrust.com/resources/root_certificates/index.htm" class="external text" rel="nofollow">GeoTrust</a>
</li><li> <a href="http://www.thawte.com/roots/" class="external text" rel="nofollow">Thawte</a>
</li><li> <a href="http://www.verisign.com/support/roots.html" class="external text" rel="nofollow">VeriSign</a>
</li></ul>
<p>An easier alternative is to use the <code>mozroots</code> tool to download and install all Mozilla's root certificates. The downside is that it's more difficult to handpick only the one you really require.
</p>
<h2> <span class="mw-headline" id="Can_I_make_my_own_certificates_.3F"> Can I make my own certificates&#160;? </span></h2>
<p>Mono includes the <code>makecert</code> tool that can be used to create <b>test</b> (i.e. untrusted) certificates. The tool is generally used to create code-signing (i.e. Authenticode) certificates but can also be used to create both server and client SSL certificates.
</p>
<ul><li> Creating a SSL server <b>test</b> certificate
</li></ul>
<pre>makecert -r -eku 1.3.6.1.5.5.7.3.1 -n "CN=pollux" -sv pollux.pvk pollux.cer
</pre>
<p>where <b>1.3.6.1.5.5.7.3.1</b> is the OID for server-side authentication and <b>pollux</b> is your host name. The private key is stored in the PVK file and <b>isn't</b> password protected.
</p>
<ul><li> Creating a SSL client <b>test</b> certificate
</li></ul>
<pre>makecert -eku 1.3.6.1.5.5.7.3.2 -n "CN=poupou" -p12 poupou.p12 s3kr3t
</pre>
<p>where <b>1.3.6.1.5.5.7.3.2</b> is the OID for client-side authentication and <b>poupou</b> is your name. The <code>-p12</code> option is <b>mono specific</b> and creates a PKCS#12 file protected with the supplied password.
</p><p>Many more options are available from <code>makecert</code>. Consult the tool's <a href="http://anonsvn.mono-project.com/source/trunk/mono/man/makecert.1" class="external text" rel="nofollow">man page</a> (i.e. <code>man makecert</code>) for more details.
</p>
<h1> <span class="mw-headline" id="Code_Access_Security_.28CAS.29"> Code Access Security (CAS) </span></h1>
<h2> <span class="mw-headline" id="Does_Mono_support_CAS_.3F"> Does Mono support CAS&#160;? </span></h2>
<p>Mono 1.0.x <b>doesn't</b> support <a href="{{site.baseurl}}/CAS" title="CAS">Code Access Security</a>. Mono 1.2 has an experimental preview of the technology (turned <b>off</b> by default) with partial (and unaudited) class library support. 
</p><p>In addition, Mono currently does not have a complete verifier, which means that invalid assemblies will produce an assertion in the runtime.
</p>
<h2> <span class="mw-headline" id="How_can_I_activate_CAS_.3F"> How can I activate CAS&#160;? </span></h2>
<p>By default <a href="{{site.baseurl}}/CAS" title="CAS">Code Access Security</a> is turned <b>off</b> in Mono. On Mono 1.1.4 and later you can turn on the security manager by using the <code>--security</code> option. E.g.
</p>
<pre>mono --security sample.exe
</pre>
<h2> <span class="mw-headline" id="Will_Mono_have_a_complete_verifier.3F"> Will Mono have a complete verifier? </span></h2>
<p>Mono 2.0 already has an IL verifier while the metadata verifier will be complete by the time that <a href="{{site.baseurl}}/Moonlight" title="Moonlight">Moonlight</a> 2.0 ships.
</p><p>In the meantime, you can invoke Mono from the command line to test whether the metadata and code will be processed successfully by Mono, by calling Mono like this:
</p>
<pre class="bash" style="font-family:monospace;">   $ mono <span style="color: #660033;">--compile-all</span> myAssembly</pre>
<p>If this succeeds, it means that Mono will not assert at runtime due to invalid metadata or invalid code (sometimes produced by obfuscators, which break the ECMA requirements for valid code).
</p>
<h2> <span class="mw-headline" id="How_many_checks_are_missing_to_have_a_full_verifier.3F"> How many checks are missing to have a full verifier? </span></h2>
<p>There are many checks that need to be performed, it's not as simple as doing opcode checks as someone could believe. The only way to know which are missing is to review all the code. Of course the review needs to be done independently by multiple people with the right skills and mindset (and time)...
</p>
<h1> <span class="mw-headline" id="Security_related_compilation_issues"> Security related compilation issues </span></h1>
<h2> <span class="mw-headline" id="Compiling_Mono.27s_mscorlib.dll_with_CSC_7.x_.28Fx_1.x.29"> Compiling Mono's mscorlib.dll with CSC 7.x (Fx 1.x) </span></h2>
<p>With the CLR 1.x a security permission object (implementing <a href="http://www.go-mono.com/docs/monodoc.ashx?link=T%3aSystem.Security.IPermission" class="external text" rel="nofollow">IPermission</a>) must be created, from its security attribute (inherited from <a href="http://www.go-mono.com/docs/monodoc.ashx?link=T%3aSystem.Security.Permissions.SecurityAttribute" class="external text" rel="nofollow">SecurityAttribute</a>), to generate the XML output that is embedded in the assembly. This means that the compiler cannot accept the use of <i>PermissionX</i> if <i>PermissionX</i> is defined in the assembly being compiled. This cause a problem for some assemblies, like <code>mscorlib.dll</code> which consume its own permission.
</p><p>In order to bootstrap such assemblies CSC 7.x looks for the environment variable <code>__SECURITY_BOOTSTRAP_DB</code> to create a security database. The information within (format unknown) enables CSC to compile them.
</p><p>From the <a href="http://anonsvn.mono-project.com/source/trunk/mcs/class/corlib/Makefile" class="external text" rel="nofollow">/mcs/class/corlib/Makefile</a> file:
</p>
<pre>export __SECURITY_BOOTSTRAP_DB=$(topdir)/class/corlib
</pre>
<p><b>Notes</b>
</p>
<ul><li> The results of using <code>__SECURITY_BOOTSTRAP_DB</code> for other assemblies is unknown (i.e. we don't know what else in CSC may be affected by the environment variable) so it should only be used when necessary;
</li><li> The CLR 2.x supports a new binary format for security attributes (very much like serialization) that is make directly from the security attribute (i.e. doesn't involve the permission class).
</li></ul>
<p><br />
</p>
<h2> <span class="mw-headline" id="System.Security.SecurityException_:_Failure_decoding_embedded_permission_set_object."> System.Security.SecurityException&#160;: Failure decoding embedded permission set object. </span></h2>
<p>This exception can occurs when using a path/file in a declarative <a href="http://www.go-mono.com/docs/monodoc.ashx?link=T%3aSystem.Security.Permissions.FileIOPermissionAttribute" class="external text" rel="nofollow">FileIOPermission</a> attribute (or any other security attribute accepting filenames). The Mono runtime supports UNIX-style filename when compiling (e.g. MCS) but the Microsoft runtime won't be able to decode them. The solution is to use imperative security when dealing with filenames.
</p><p><br />
<b>Note</b>: You can see this problem if you compile corlib's unit tests under Linux then try to execute the tests under the MS runtime.
</p>
<h2> <span class="mw-headline" id="How_are_Windows_roles_mapped_into_Unix_roles.3F"> How are Windows roles mapped into Unix roles? </span></h2>
<p>We map roles from WindowsPrincipal.IsInRole to Unix groups.
</p>
<h2> <span class="mw-headline" id="How_can_I_make_calls_to_WindowsPrincipal.IsInRole_.28.29_work_on_Linux.3F"> How can I make calls to WindowsPrincipal.IsInRole () work on Linux? </span></h2>
<p>If you have an application that makes a call like this:
</p>
<pre class="csharp" style="font-family:monospace;"><span style="color: #6666cc; font-weight: bold;">bool</span> allowed <span style="color: #008000;">=</span> WindowsPrincipal<span style="color: #008000;">.</span><span style="color: #0000FF;">IsInRole</span> <span style="color: #008000;">&#40;</span><span style="color: #666666;">&quot;USAGNT<span style="color: #008080; font-weight: bold;">\\</span>UGR_RBP&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span></pre>
<p>To make this work on Unix, you have to add a Unix group to the system, and list all the users that are to participate in this role, this can be done by adding the following line to /etc/group:
</p>
<pre class="bash" style="font-family:monospace;">USAGNT\UGR_RBP:x:<span style="color: #000000;">300</span>:miguel,don,jon,julia</pre>
<p>Where each of the users that belong to the group are added there.
</p>
<h1> <span class="mw-headline" id="Other_resources_on_this_site"> Other resources on this site </span></h1>
<h2> <span class="mw-headline" id="Known_Vulnerabilities"> Known Vulnerabilities </span></h2>
<p>A list of known <a href="{{site.baseurl}}/Vulnerabilities" title="Vulnerabilities">vulnerabilities</a> affecting older versions of Mono is available.
</p>
