---
layout: releasenotes
title: 'Mono 5.0.0 Release Notes'
version: 5.0.0
---

**THIS IS A DRAFT/WORK IN PROGRESS PLACEHOLDER OF THE 5.0 RELEASE NOTES**

Preview Releases
================

Highlights
==========

In Depth
========

Runtime
-------

### SIMD Acceleration support ###

Generating SIMD accelerated native code for the classes in the
Mono.Simd assembly is deprecated in this release, and it will be
removed in +2 releases. Users should transition to using the Vector
classes, which are part of the official .net class libraries.

### Environment Memory Management And System.Configuration ###

As per the Unix specification, getenv may return a pointer into static memory. Future calls to getenv can overwrite
the memory returned from previous calls to getenv. Mono kept many pointers into this memory while concurrently calling
getenv on multiple threads. We now lock around the environment-changing functions and to duplicate all returned strings. 
Unfortunately, mono will use the environment to find which configuration file to read for System.Configuration.
Configurations that were set might not have been used, as managed code was seeing nulls. This is how the bug surfaced, it
is not hypothetical. Users who set a custom configuration file (via MONO_CFG_DIR) are encouraged to check that using 
previously-ignored configuration files does not lead to unexpected breakage.

### Match semantics of rethrow instruction with .NET runtime ###

Mono used to cut off the stack trace at the point where an exception is
rethrown, however, it should retain the stack trace if `rethrow` [is
used](https://msdn.microsoft.com/en-us/library/ms182363.aspx).

### Experimental runtime interpreter ###

We revived the interpreter back from the old days (aka. `mint`).  It now
supports generics, and was updated to match internal API changes. It is
disabled per default and shouldn't be used in production yet.

### Unwinding on Android ###

On a native crash on Android, the mono runtime tried to `dlopen` libcorkscrew
or libunwind (depending on what is available) in order to obtain a native stack
trace. However, this approach was unreliable, as some devices don't even
ship said libraries. Furthermore, Android will restrict the `dlopen` syscall
in an unfavorable way for this approach in a future version.

We changed our approach by trying to do _less_ work: We now rely on a system
process by Android aka. `debuggerd` to provide us a native stack trace. On some
Android versions this requires us to set `DUMPABLE`.

### Clean-ups around native crashes ###

Native crashes now end up a single handler `mono_handle_native_crash`, that
tries to provide as much information as possible.  Also, `SIGILL` won't get
wrapped into a managed exception anymore but results into a native crash.

### Make PowerPC great again ###

Mono can bootstrap on `ppc64le`.


Windows
-------

macOS
=====

The Mono.framework package that we distribute for macOS now uses the
AppleTLS stack for implementing our SSL/TLS transport.  This brings
full support for TLS 1.2 for `SslStream` and our various HTTP web
clients.

We do offer a way of using the old SSL/TLS stack, set the
`MONO_TLS_PROVIDER` environment variable to `legacy` to use the old
Mono managed TLS 1.0 stack.   From your shell, you can do it like this:

```
export MONO_TLS_PROVIDER=legacy
```

CoreFX + Reference Source Adoption
----------------------------------

As we [announced](http://www.mono-project.com/news/2016/11/29/mono-code-sharing/) we are adopting
a new strategy to share code with .NET.   With this release we started this effort where the
code is shared between .NET Core and Mono and not just the Reference Source release.


Bug Fixes
=========

Contributors
============
