---
layout: releasenotes
title: 'Mono 5.0.0 Release Notes'
version: 5.0.0
---

**THIS IS A DRAFT/WORK IN PROGRESS PLACEHOLDER OF THE 5.0 RELEASE NOTES**

Preview Releases
================

Highlights
==========

In Depth
========

Runtime
-------

### SIMD Acceleration support ###

Generating SIMD accelerated native code for the classes in the
Mono.Simd assembly is deprecated in this release, and it will be
removed in +2 releases. Users should transition to using the Vector
classes, which are part of the official .net class libraries.

### Thread.Abort harderning ###

The runtime was hardened to further its resilience in face of thread aborts.
It now won't abort in-flight class constructors.
Thread abort is important for application using multiple AppDomains.

### Memory usage ###

Improvements in the runtime representation of the type system should yield a 5% memory saving
in most workloads. It was archieved by using a more efficient representation for arrays and generic instances.

A linearalizable property bag was added to replace the current mechanism of rare fields in runtime metadata.
More rarely used fields were moved to use it as they now use significantly less memory when used.

### Lazy array interfaces ###

One curious aspect of C# is that arrays implement invarient interfaces as if they were covariant. This happens for `IList<T>, ICollection<T> and IEnumerable<T>` which means, for example, that `string[]` implements both `IList<string>` and `IList<object>`.

Mono traditionally implemented this by creating the runtime-side metadata for all of those interfaces and that came with an extraordinary memory cost of creating a lot of interfaces that never ended up being referenced by C# code.

With mono 5.0 we now treat those interfaces as magic/special and use a different casting codepath. This allow them to be lazily implemented in arrays, which can save a lot of memory in LINQ-heavy workloads. As part of this work we refactored the casting code in the JIT to be simpler and more maintainable.

### Symbolification ###

The runtime crash stack traces now include information on managed stack traces to allow them to be symbolificated. Tooling was adjusted to handle the slightly different format.

### Workaround for netstandard nugets on desktop ###

Some netstandard NuGets like System.IO.Compression resolve to assemblies that won't work with mono on Desktop. To handle this we implemented a series of workarounds:

- Deny loading problematic assemblies. They will be handled as if they did not exist
- Deny remapping to problematic assembly versions. The system version will be used instead.

Windows
-------


CoreFX + Reference Source Adoption
----------------------------------

As we [announced](http://www.mono-project.com/news/2016/11/29/mono-code-sharing/) we are adopting
a new strategy to share code with .NET.   With this release we started this effort where the
code is shared between .NET Core and Mono and not just the Reference Source release.


Bug Fixes
=========

Contributors
============
